(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function P_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Pd={exports:{}},Ua={},Nd={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg;function kE(){if(Vg)return ke;Vg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.iterator;function R(V){return V===null||typeof V!="object"?null:(V=I&&V[I]||V["@@iterator"],typeof V=="function"?V:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,U={};function k(V,Q,ye){this.props=V,this.context=Q,this.refs=U,this.updater=ye||M}k.prototype.isReactComponent={},k.prototype.setState=function(V,Q){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,Q,"setState")},k.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function W(){}W.prototype=k.prototype;function K(V,Q,ye){this.props=V,this.context=Q,this.refs=U,this.updater=ye||M}var te=K.prototype=new W;te.constructor=K,j(te,k.prototype),te.isPureReactComponent=!0;var ne=Array.isArray,ue=Object.prototype.hasOwnProperty,ge={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function S(V,Q,ye){var Re,Ce={},Me=null,Be=null;if(Q!=null)for(Re in Q.ref!==void 0&&(Be=Q.ref),Q.key!==void 0&&(Me=""+Q.key),Q)ue.call(Q,Re)&&!P.hasOwnProperty(Re)&&(Ce[Re]=Q[Re]);var $e=arguments.length-2;if($e===1)Ce.children=ye;else if(1<$e){for(var Ye=Array($e),It=0;It<$e;It++)Ye[It]=arguments[It+2];Ce.children=Ye}if(V&&V.defaultProps)for(Re in $e=V.defaultProps,$e)Ce[Re]===void 0&&(Ce[Re]=$e[Re]);return{$$typeof:r,type:V,key:Me,ref:Be,props:Ce,_owner:ge.current}}function x(V,Q){return{$$typeof:r,type:V.type,key:Q,ref:V.ref,props:V.props,_owner:V._owner}}function N(V){return typeof V=="object"&&V!==null&&V.$$typeof===r}function O(V){var Q={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ye){return Q[ye]})}var L=/\/+/g;function C(V,Q){return typeof V=="object"&&V!==null&&V.key!=null?O(""+V.key):Q.toString(36)}function Qe(V,Q,ye,Re,Ce){var Me=typeof V;(Me==="undefined"||Me==="boolean")&&(V=null);var Be=!1;if(V===null)Be=!0;else switch(Me){case"string":case"number":Be=!0;break;case"object":switch(V.$$typeof){case r:case e:Be=!0}}if(Be)return Be=V,Ce=Ce(Be),V=Re===""?"."+C(Be,0):Re,ne(Ce)?(ye="",V!=null&&(ye=V.replace(L,"$&/")+"/"),Qe(Ce,Q,ye,"",function(It){return It})):Ce!=null&&(N(Ce)&&(Ce=x(Ce,ye+(!Ce.key||Be&&Be.key===Ce.key?"":(""+Ce.key).replace(L,"$&/")+"/")+V)),Q.push(Ce)),1;if(Be=0,Re=Re===""?".":Re+":",ne(V))for(var $e=0;$e<V.length;$e++){Me=V[$e];var Ye=Re+C(Me,$e);Be+=Qe(Me,Q,ye,Ye,Ce)}else if(Ye=R(V),typeof Ye=="function")for(V=Ye.call(V),$e=0;!(Me=V.next()).done;)Me=Me.value,Ye=Re+C(Me,$e++),Be+=Qe(Me,Q,ye,Ye,Ce);else if(Me==="object")throw Q=String(V),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return Be}function Le(V,Q,ye){if(V==null)return V;var Re=[],Ce=0;return Qe(V,Re,"","",function(Me){return Q.call(ye,Me,Ce++)}),Re}function Pe(V){if(V._status===-1){var Q=V._result;Q=Q(),Q.then(function(ye){(V._status===0||V._status===-1)&&(V._status=1,V._result=ye)},function(ye){(V._status===0||V._status===-1)&&(V._status=2,V._result=ye)}),V._status===-1&&(V._status=0,V._result=Q)}if(V._status===1)return V._result.default;throw V._result}var Ne={current:null},ie={transition:null},Y={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:ie,ReactCurrentOwner:ge};function re(){throw Error("act(...) is not supported in production builds of React.")}return ke.Children={map:Le,forEach:function(V,Q,ye){Le(V,function(){Q.apply(this,arguments)},ye)},count:function(V){var Q=0;return Le(V,function(){Q++}),Q},toArray:function(V){return Le(V,function(Q){return Q})||[]},only:function(V){if(!N(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},ke.Component=k,ke.Fragment=t,ke.Profiler=o,ke.PureComponent=K,ke.StrictMode=s,ke.Suspense=g,ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,ke.act=re,ke.cloneElement=function(V,Q,ye){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var Re=j({},V.props),Ce=V.key,Me=V.ref,Be=V._owner;if(Q!=null){if(Q.ref!==void 0&&(Me=Q.ref,Be=ge.current),Q.key!==void 0&&(Ce=""+Q.key),V.type&&V.type.defaultProps)var $e=V.type.defaultProps;for(Ye in Q)ue.call(Q,Ye)&&!P.hasOwnProperty(Ye)&&(Re[Ye]=Q[Ye]===void 0&&$e!==void 0?$e[Ye]:Q[Ye])}var Ye=arguments.length-2;if(Ye===1)Re.children=ye;else if(1<Ye){$e=Array(Ye);for(var It=0;It<Ye;It++)$e[It]=arguments[It+2];Re.children=$e}return{$$typeof:r,type:V.type,key:Ce,ref:Me,props:Re,_owner:Be}},ke.createContext=function(V){return V={$$typeof:h,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:l,_context:V},V.Consumer=V},ke.createElement=S,ke.createFactory=function(V){var Q=S.bind(null,V);return Q.type=V,Q},ke.createRef=function(){return{current:null}},ke.forwardRef=function(V){return{$$typeof:f,render:V}},ke.isValidElement=N,ke.lazy=function(V){return{$$typeof:w,_payload:{_status:-1,_result:V},_init:Pe}},ke.memo=function(V,Q){return{$$typeof:y,type:V,compare:Q===void 0?null:Q}},ke.startTransition=function(V){var Q=ie.transition;ie.transition={};try{V()}finally{ie.transition=Q}},ke.unstable_act=re,ke.useCallback=function(V,Q){return Ne.current.useCallback(V,Q)},ke.useContext=function(V){return Ne.current.useContext(V)},ke.useDebugValue=function(){},ke.useDeferredValue=function(V){return Ne.current.useDeferredValue(V)},ke.useEffect=function(V,Q){return Ne.current.useEffect(V,Q)},ke.useId=function(){return Ne.current.useId()},ke.useImperativeHandle=function(V,Q,ye){return Ne.current.useImperativeHandle(V,Q,ye)},ke.useInsertionEffect=function(V,Q){return Ne.current.useInsertionEffect(V,Q)},ke.useLayoutEffect=function(V,Q){return Ne.current.useLayoutEffect(V,Q)},ke.useMemo=function(V,Q){return Ne.current.useMemo(V,Q)},ke.useReducer=function(V,Q,ye){return Ne.current.useReducer(V,Q,ye)},ke.useRef=function(V){return Ne.current.useRef(V)},ke.useState=function(V){return Ne.current.useState(V)},ke.useSyncExternalStore=function(V,Q,ye){return Ne.current.useSyncExternalStore(V,Q,ye)},ke.useTransition=function(){return Ne.current.useTransition()},ke.version="18.3.1",ke}var Lg;function Vf(){return Lg||(Lg=1,Nd.exports=kE()),Nd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg;function PE(){if(Mg)return Ua;Mg=1;var r=Vf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,y){var w,I={},R=null,M=null;y!==void 0&&(R=""+y),g.key!==void 0&&(R=""+g.key),g.ref!==void 0&&(M=g.ref);for(w in g)s.call(g,w)&&!l.hasOwnProperty(w)&&(I[w]=g[w]);if(f&&f.defaultProps)for(w in g=f.defaultProps,g)I[w]===void 0&&(I[w]=g[w]);return{$$typeof:e,type:f,key:R,ref:M,props:I,_owner:o.current}}return Ua.Fragment=t,Ua.jsx=h,Ua.jsxs=h,Ua}var jg;function NE(){return jg||(jg=1,Pd.exports=PE()),Pd.exports}var E=NE(),ae=Vf();const bE=P_(ae);var $u={},bd={exports:{}},rn={},Dd={exports:{}},Od={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function DE(){return Ug||(Ug=1,(function(r){function e(ie,Y){var re=ie.length;ie.push(Y);e:for(;0<re;){var V=re-1>>>1,Q=ie[V];if(0<o(Q,Y))ie[V]=Y,ie[re]=Q,re=V;else break e}}function t(ie){return ie.length===0?null:ie[0]}function s(ie){if(ie.length===0)return null;var Y=ie[0],re=ie.pop();if(re!==Y){ie[0]=re;e:for(var V=0,Q=ie.length,ye=Q>>>1;V<ye;){var Re=2*(V+1)-1,Ce=ie[Re],Me=Re+1,Be=ie[Me];if(0>o(Ce,re))Me<Q&&0>o(Be,Ce)?(ie[V]=Be,ie[Me]=re,V=Me):(ie[V]=Ce,ie[Re]=re,V=Re);else if(Me<Q&&0>o(Be,re))ie[V]=Be,ie[Me]=re,V=Me;else break e}}return Y}function o(ie,Y){var re=ie.sortIndex-Y.sortIndex;return re!==0?re:ie.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var g=[],y=[],w=1,I=null,R=3,M=!1,j=!1,U=!1,k=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(ie){for(var Y=t(y);Y!==null;){if(Y.callback===null)s(y);else if(Y.startTime<=ie)s(y),Y.sortIndex=Y.expirationTime,e(g,Y);else break;Y=t(y)}}function ne(ie){if(U=!1,te(ie),!j)if(t(g)!==null)j=!0,Pe(ue);else{var Y=t(y);Y!==null&&Ne(ne,Y.startTime-ie)}}function ue(ie,Y){j=!1,U&&(U=!1,W(S),S=-1),M=!0;var re=R;try{for(te(Y),I=t(g);I!==null&&(!(I.expirationTime>Y)||ie&&!O());){var V=I.callback;if(typeof V=="function"){I.callback=null,R=I.priorityLevel;var Q=V(I.expirationTime<=Y);Y=r.unstable_now(),typeof Q=="function"?I.callback=Q:I===t(g)&&s(g),te(Y)}else s(g);I=t(g)}if(I!==null)var ye=!0;else{var Re=t(y);Re!==null&&Ne(ne,Re.startTime-Y),ye=!1}return ye}finally{I=null,R=re,M=!1}}var ge=!1,P=null,S=-1,x=5,N=-1;function O(){return!(r.unstable_now()-N<x)}function L(){if(P!==null){var ie=r.unstable_now();N=ie;var Y=!0;try{Y=P(!0,ie)}finally{Y?C():(ge=!1,P=null)}}else ge=!1}var C;if(typeof K=="function")C=function(){K(L)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,Le=Qe.port2;Qe.port1.onmessage=L,C=function(){Le.postMessage(null)}}else C=function(){k(L,0)};function Pe(ie){P=ie,ge||(ge=!0,C())}function Ne(ie,Y){S=k(function(){ie(r.unstable_now())},Y)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ie){ie.callback=null},r.unstable_continueExecution=function(){j||M||(j=!0,Pe(ue))},r.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<ie?Math.floor(1e3/ie):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(ie){switch(R){case 1:case 2:case 3:var Y=3;break;default:Y=R}var re=R;R=Y;try{return ie()}finally{R=re}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ie,Y){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var re=R;R=ie;try{return Y()}finally{R=re}},r.unstable_scheduleCallback=function(ie,Y,re){var V=r.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?V+re:V):re=V,ie){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=re+Q,ie={id:w++,callback:Y,priorityLevel:ie,startTime:re,expirationTime:Q,sortIndex:-1},re>V?(ie.sortIndex=re,e(y,ie),t(g)===null&&ie===t(y)&&(U?(W(S),S=-1):U=!0,Ne(ne,re-V))):(ie.sortIndex=Q,e(g,ie),j||M||(j=!0,Pe(ue))),ie},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(ie){var Y=R;return function(){var re=R;R=Y;try{return ie.apply(this,arguments)}finally{R=re}}}})(Od)),Od}var Fg;function OE(){return Fg||(Fg=1,Dd.exports=DE()),Dd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg;function VE(){if(zg)return rn;zg=1;var r=Vf(),e=OE();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},I={};function R(n){return g.call(I,n)?!0:g.call(w,n)?!1:y.test(n)?I[n]=!0:(w[n]=!0,!1)}function M(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function j(n,i,a,c){if(i===null||typeof i>"u"||M(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function U(n,i,a,c,d,m,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=m,this.removeEmptyString=v}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){k[n]=new U(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];k[i]=new U(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){k[n]=new U(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){k[n]=new U(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){k[n]=new U(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){k[n]=new U(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){k[n]=new U(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){k[n]=new U(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){k[n]=new U(n,5,!1,n.toLowerCase(),null,!1,!1)});var W=/[\-:]([a-z])/g;function K(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(W,K);k[i]=new U(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(W,K);k[i]=new U(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(W,K);k[i]=new U(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){k[n]=new U(n,1,!1,n.toLowerCase(),null,!1,!1)}),k.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){k[n]=new U(n,1,!1,n.toLowerCase(),null,!0,!0)});function te(n,i,a,c){var d=k.hasOwnProperty(i)?k[i]:null;(d!==null?d.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(j(i,a,d,c)&&(a=null),c||d===null?R(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var ne=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ue=Symbol.for("react.element"),ge=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),O=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),Qe=Symbol.for("react.suspense_list"),Le=Symbol.for("react.memo"),Pe=Symbol.for("react.lazy"),Ne=Symbol.for("react.offscreen"),ie=Symbol.iterator;function Y(n){return n===null||typeof n!="object"?null:(n=ie&&n[ie]||n["@@iterator"],typeof n=="function"?n:null)}var re=Object.assign,V;function Q(n){if(V===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);V=i&&i[1]||""}return`
`+V+n}var ye=!1;function Re(n,i){if(!n||ye)return"";ye=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch($){var c=$}Reflect.construct(n,[],i)}else{try{i.call()}catch($){c=$}n.call(i.prototype)}else{try{throw Error()}catch($){c=$}n()}}catch($){if($&&c&&typeof $.stack=="string"){for(var d=$.stack.split(`
`),m=c.stack.split(`
`),v=d.length-1,A=m.length-1;1<=v&&0<=A&&d[v]!==m[A];)A--;for(;1<=v&&0<=A;v--,A--)if(d[v]!==m[A]){if(v!==1||A!==1)do if(v--,A--,0>A||d[v]!==m[A]){var b=`
`+d[v].replace(" at new "," at ");return n.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",n.displayName)),b}while(1<=v&&0<=A);break}}}finally{ye=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?Q(n):""}function Ce(n){switch(n.tag){case 5:return Q(n.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return n=Re(n.type,!1),n;case 11:return n=Re(n.type.render,!1),n;case 1:return n=Re(n.type,!0),n;default:return""}}function Me(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case P:return"Fragment";case ge:return"Portal";case x:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case Qe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case O:return(n.displayName||"Context")+".Consumer";case N:return(n._context.displayName||"Context")+".Provider";case L:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Le:return i=n.displayName||null,i!==null?i:Me(n.type)||"Memo";case Pe:i=n._payload,n=n._init;try{return Me(n(i))}catch{}}return null}function Be(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Me(i);case 8:return i===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function $e(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ye(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function It(n){var i=Ye(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(v){c=""+v,m.call(this,v)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function mr(n){n._valueTracker||(n._valueTracker=It(n))}function Ri(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=Ye(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function Hr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ls(n,i){var a=i.checked;return re({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Ci(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=$e(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Ho(n,i){i=i.checked,i!=null&&te(n,"checked",i,!1)}function Wo(n,i){Ho(n,i);var a=$e(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?ki(n,i.type,a):i.hasOwnProperty("defaultValue")&&ki(n,i.type,$e(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function Cl(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function ki(n,i,a){(i!=="number"||Hr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var gr=Array.isArray;function yr(n,i,a,c){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+$e(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Ko(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return re({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Pi(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(gr(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:$e(a)}}function Ni(n,i){var a=$e(i.value),c=$e(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Go(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function gt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yt(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?gt(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var _r,Qo=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,d)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(_r=_r||document.createElement("div"),_r.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=_r.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Wr(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Ms={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},js=["Webkit","ms","Moz","O"];Object.keys(Ms).forEach(function(n){js.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Ms[i]=Ms[n]})});function Yo(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Ms.hasOwnProperty(n)&&Ms[n]?(""+i).trim():i+"px"}function Jo(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Yo(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Xo=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zo(n,i){if(i){if(Xo[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function ea(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Us=null;function bi(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Di=null,yn=null,Qn=null;function Oi(n){if(n=Sa(n)){if(typeof Di!="function")throw Error(t(280));var i=n.stateNode;i&&(i=su(i),Di(n.stateNode,n.type,i))}}function Yn(n){yn?Qn?Qn.push(n):Qn=[n]:yn=n}function ta(){if(yn){var n=yn,i=Qn;if(Qn=yn=null,Oi(n),i)for(n=0;n<i.length;n++)Oi(i[n])}}function Fs(n,i){return n(i)}function na(){}var vr=!1;function ra(n,i,a){if(vr)return n(i,a);vr=!0;try{return Fs(n,i,a)}finally{vr=!1,(yn!==null||Qn!==null)&&(na(),ta())}}function ut(n,i){var a=n.stateNode;if(a===null)return null;var c=su(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Vi=!1;if(f)try{var Pn={};Object.defineProperty(Pn,"passive",{get:function(){Vi=!0}}),window.addEventListener("test",Pn,Pn),window.removeEventListener("test",Pn,Pn)}catch{Vi=!1}function zs(n,i,a,c,d,m,v,A,b){var $=Array.prototype.slice.call(arguments,3);try{i.apply(a,$)}catch(X){this.onError(X)}}var Bs=!1,Li=null,Nn=!1,sa=null,sh={onError:function(n){Bs=!0,Li=n}};function Mi(n,i,a,c,d,m,v,A,b){Bs=!1,Li=null,zs.apply(sh,arguments)}function kl(n,i,a,c,d,m,v,A,b){if(Mi.apply(this,arguments),Bs){if(Bs){var $=Li;Bs=!1,Li=null}else throw Error(t(198));Nn||(Nn=!0,sa=$)}}function bn(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function $s(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Dn(n){if(bn(n)!==n)throw Error(t(188))}function Pl(n){var i=n.alternate;if(!i){if(i=bn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return Dn(d),n;if(m===c)return Dn(d),i;m=m.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=m;else{for(var v=!1,A=d.child;A;){if(A===a){v=!0,a=d,c=m;break}if(A===c){v=!0,c=d,a=m;break}A=A.sibling}if(!v){for(A=m.child;A;){if(A===a){v=!0,a=m,c=d;break}if(A===c){v=!0,c=m,a=d;break}A=A.sibling}if(!v)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function ia(n){return n=Pl(n),n!==null?ji(n):null}function ji(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=ji(n);if(i!==null)return i;n=n.sibling}return null}var Ui=e.unstable_scheduleCallback,oa=e.unstable_cancelCallback,Nl=e.unstable_shouldYield,ih=e.unstable_requestPaint,Je=e.unstable_now,bl=e.unstable_getCurrentPriorityLevel,qs=e.unstable_ImmediatePriority,Kr=e.unstable_UserBlockingPriority,_n=e.unstable_NormalPriority,aa=e.unstable_LowPriority,Dl=e.unstable_IdlePriority,Hs=null,un=null;function Ol(n){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Hs,n,void 0,(n.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:Ll,la=Math.log,Vl=Math.LN2;function Ll(n){return n>>>=0,n===0?32:31-(la(n)/Vl|0)|0}var Fi=64,zi=4194304;function Gr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ws(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,m=n.pingedLanes,v=a&268435455;if(v!==0){var A=v&~d;A!==0?c=Gr(A):(m&=v,m!==0&&(c=Gr(m)))}else v=a&~d,v!==0?c=Gr(v):m!==0&&(c=Gr(m));if(c===0)return 0;if(i!==0&&i!==c&&(i&d)===0&&(d=c&-c,m=i&-i,d>=m||d===16&&(m&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-Wt(i),d=1<<a,c|=n[a],i&=~d;return c}function oh(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wr(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes;0<m;){var v=31-Wt(m),A=1<<v,b=d[v];b===-1?((A&a)===0||(A&c)!==0)&&(d[v]=oh(A,i)):b<=i&&(n.expiredLanes|=A),m&=~A}}function cn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Ks(){var n=Fi;return Fi<<=1,(Fi&4194240)===0&&(Fi=64),n}function Qr(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Yr(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Wt(i),n[i]=a}function Ge(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-Wt(a),m=1<<d;i[d]=0,c[d]=-1,n[d]=-1,a&=~m}}function Jr(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-Wt(a),d=1<<c;d&i|n[c]&i&&(n[c]|=i),a&=~d}}var Ve=0;function Xr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Ml,Bi,jl,Ul,Fl,ua=!1,Jn=[],Pt=null,On=null,Vn=null,Zr=new Map,vn=new Map,Xn=[],ah="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zl(n,i){switch(n){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":On=null;break;case"mouseover":case"mouseout":Vn=null;break;case"pointerover":case"pointerout":Zr.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":vn.delete(i.pointerId)}}function Yt(n,i,a,c,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[d]},i!==null&&(i=Sa(i),i!==null&&Bi(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function lh(n,i,a,c,d){switch(i){case"focusin":return Pt=Yt(Pt,n,i,a,c,d),!0;case"dragenter":return On=Yt(On,n,i,a,c,d),!0;case"mouseover":return Vn=Yt(Vn,n,i,a,c,d),!0;case"pointerover":var m=d.pointerId;return Zr.set(m,Yt(Zr.get(m)||null,n,i,a,c,d)),!0;case"gotpointercapture":return m=d.pointerId,vn.set(m,Yt(vn.get(m)||null,n,i,a,c,d)),!0}return!1}function Bl(n){var i=Xs(n.target);if(i!==null){var a=bn(i);if(a!==null){if(i=a.tag,i===13){if(i=$s(a),i!==null){n.blockedOn=i,Fl(n.priority,function(){jl(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Er(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=$i(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Us=c,a.target.dispatchEvent(c),Us=null}else return i=Sa(a),i!==null&&Bi(i),n.blockedOn=a,!1;i.shift()}return!0}function Gs(n,i,a){Er(n)&&a.delete(i)}function $l(){ua=!1,Pt!==null&&Er(Pt)&&(Pt=null),On!==null&&Er(On)&&(On=null),Vn!==null&&Er(Vn)&&(Vn=null),Zr.forEach(Gs),vn.forEach(Gs)}function Ln(n,i){n.blockedOn===i&&(n.blockedOn=null,ua||(ua=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$l)))}function Mn(n){function i(d){return Ln(d,n)}if(0<Jn.length){Ln(Jn[0],n);for(var a=1;a<Jn.length;a++){var c=Jn[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Pt!==null&&Ln(Pt,n),On!==null&&Ln(On,n),Vn!==null&&Ln(Vn,n),Zr.forEach(i),vn.forEach(i),a=0;a<Xn.length;a++)c=Xn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Xn.length&&(a=Xn[0],a.blockedOn===null);)Bl(a),a.blockedOn===null&&Xn.shift()}var Tr=ne.ReactCurrentBatchConfig,es=!0;function nt(n,i,a,c){var d=Ve,m=Tr.transition;Tr.transition=null;try{Ve=1,ca(n,i,a,c)}finally{Ve=d,Tr.transition=m}}function uh(n,i,a,c){var d=Ve,m=Tr.transition;Tr.transition=null;try{Ve=4,ca(n,i,a,c)}finally{Ve=d,Tr.transition=m}}function ca(n,i,a,c){if(es){var d=$i(n,i,a,c);if(d===null)wh(n,i,c,Qs,a),zl(n,c);else if(lh(d,n,i,a,c))c.stopPropagation();else if(zl(n,c),i&4&&-1<ah.indexOf(n)){for(;d!==null;){var m=Sa(d);if(m!==null&&Ml(m),m=$i(n,i,a,c),m===null&&wh(n,i,c,Qs,a),m===d)break;d=m}d!==null&&c.stopPropagation()}else wh(n,i,c,null,a)}}var Qs=null;function $i(n,i,a,c){if(Qs=null,n=bi(c),n=Xs(n),n!==null)if(i=bn(n),i===null)n=null;else if(a=i.tag,a===13){if(n=$s(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Qs=n,null}function ha(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bl()){case qs:return 1;case Kr:return 4;case _n:case aa:return 16;case Dl:return 536870912;default:return 16}default:return 16}}var hn=null,qi=null,Jt=null;function da(){if(Jt)return Jt;var n,i=qi,a=i.length,c,d="value"in hn?hn.value:hn.textContent,m=d.length;for(n=0;n<a&&i[n]===d[n];n++);var v=a-n;for(c=1;c<=v&&i[a-c]===d[m-c];c++);return Jt=d.slice(n,1<c?1-c:void 0)}function Hi(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Zn(){return!0}function fa(){return!1}function Nt(n){function i(a,c,d,m,v){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(m):m[A]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Zn:fa,this.isPropagationStopped=fa,this}return re(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Zn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Zn)},persist:function(){},isPersistent:Zn}),i}var jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wi=Nt(jn),er=re({},jn,{view:0,detail:0}),ch=Nt(er),Ki,Ir,ts,Ys=re({},er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ts&&(ts&&n.type==="mousemove"?(Ki=n.screenX-ts.screenX,Ir=n.screenY-ts.screenY):Ir=Ki=0,ts=n),Ki)},movementY:function(n){return"movementY"in n?n.movementY:Ir}}),Gi=Nt(Ys),pa=re({},Ys,{dataTransfer:0}),ql=Nt(pa),Qi=re({},er,{relatedTarget:0}),Yi=Nt(Qi),Hl=re({},jn,{animationName:0,elapsedTime:0,pseudoElement:0}),Sr=Nt(Hl),Wl=re({},jn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Kl=Nt(Wl),Gl=re({},jn,{data:0}),ma=Nt(Gl),Ji={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ql={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Ql[n])?!!i[n]:!1}function tr(){return Yl}var u=re({},er,{key:function(n){if(n.key){var i=Ji[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Hi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Kt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tr,charCode:function(n){return n.type==="keypress"?Hi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Hi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),p=Nt(u),_=re({},Ys,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Nt(_),F=re({},er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tr}),q=Nt(F),oe=re({},jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),He=Nt(oe),_t=re({},Ys,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),je=Nt(_t),St=[9,13,27,32],dt=f&&"CompositionEvent"in window,wn=null;f&&"documentMode"in document&&(wn=document.documentMode);var dn=f&&"TextEvent"in window&&!wn,Js=f&&(!dt||wn&&8<wn&&11>=wn),Xi=" ",kp=!1;function Pp(n,i){switch(n){case"keyup":return St.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Np(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Zi=!1;function xw(n,i){switch(n){case"compositionend":return Np(i);case"keypress":return i.which!==32?null:(kp=!0,Xi);case"textInput":return n=i.data,n===Xi&&kp?null:n;default:return null}}function Rw(n,i){if(Zi)return n==="compositionend"||!dt&&Pp(n,i)?(n=da(),Jt=qi=hn=null,Zi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Js&&i.locale!=="ko"?null:i.data;default:return null}}var Cw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Cw[n.type]:i==="textarea"}function Dp(n,i,a,c){Yn(c),i=tu(i,"onChange"),0<i.length&&(a=new Wi("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var ga=null,ya=null;function kw(n){Jp(n,0)}function Jl(n){var i=so(n);if(Ri(i))return n}function Pw(n,i){if(n==="change")return i}var Op=!1;if(f){var hh;if(f){var dh="oninput"in document;if(!dh){var Vp=document.createElement("div");Vp.setAttribute("oninput","return;"),dh=typeof Vp.oninput=="function"}hh=dh}else hh=!1;Op=hh&&(!document.documentMode||9<document.documentMode)}function Lp(){ga&&(ga.detachEvent("onpropertychange",Mp),ya=ga=null)}function Mp(n){if(n.propertyName==="value"&&Jl(ya)){var i=[];Dp(i,ya,n,bi(n)),ra(kw,i)}}function Nw(n,i,a){n==="focusin"?(Lp(),ga=i,ya=a,ga.attachEvent("onpropertychange",Mp)):n==="focusout"&&Lp()}function bw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Jl(ya)}function Dw(n,i){if(n==="click")return Jl(i)}function Ow(n,i){if(n==="input"||n==="change")return Jl(i)}function Vw(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Un=typeof Object.is=="function"?Object.is:Vw;function _a(n,i){if(Un(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(i,d)||!Un(n[d],i[d]))return!1}return!0}function jp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Up(n,i){var a=jp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=jp(a)}}function Fp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Fp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function zp(){for(var n=window,i=Hr();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Hr(n.document)}return i}function fh(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function Lw(n){var i=zp(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&Fp(a.ownerDocument.documentElement,a)){if(c!==null&&fh(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,m=Math.min(c.start,d);c=c.end===void 0?m:Math.min(c.end,d),!n.extend&&m>c&&(d=c,c=m,m=d),d=Up(a,m);var v=Up(a,c);d&&v&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),m>c?(n.addRange(i),n.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Mw=f&&"documentMode"in document&&11>=document.documentMode,eo=null,ph=null,va=null,mh=!1;function Bp(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;mh||eo==null||eo!==Hr(c)||(c=eo,"selectionStart"in c&&fh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),va&&_a(va,c)||(va=c,c=tu(ph,"onSelect"),0<c.length&&(i=new Wi("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=eo)))}function Xl(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var to={animationend:Xl("Animation","AnimationEnd"),animationiteration:Xl("Animation","AnimationIteration"),animationstart:Xl("Animation","AnimationStart"),transitionend:Xl("Transition","TransitionEnd")},gh={},$p={};f&&($p=document.createElement("div").style,"AnimationEvent"in window||(delete to.animationend.animation,delete to.animationiteration.animation,delete to.animationstart.animation),"TransitionEvent"in window||delete to.transitionend.transition);function Zl(n){if(gh[n])return gh[n];if(!to[n])return n;var i=to[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in $p)return gh[n]=i[a];return n}var qp=Zl("animationend"),Hp=Zl("animationiteration"),Wp=Zl("animationstart"),Kp=Zl("transitionend"),Gp=new Map,Qp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ns(n,i){Gp.set(n,i),l(i,[n])}for(var yh=0;yh<Qp.length;yh++){var _h=Qp[yh],jw=_h.toLowerCase(),Uw=_h[0].toUpperCase()+_h.slice(1);ns(jw,"on"+Uw)}ns(qp,"onAnimationEnd"),ns(Hp,"onAnimationIteration"),ns(Wp,"onAnimationStart"),ns("dblclick","onDoubleClick"),ns("focusin","onFocus"),ns("focusout","onBlur"),ns(Kp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fw=new Set("cancel close invalid load scroll toggle".split(" ").concat(wa));function Yp(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,kl(c,i,void 0,n),n.currentTarget=null}function Jp(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var m=void 0;if(i)for(var v=c.length-1;0<=v;v--){var A=c[v],b=A.instance,$=A.currentTarget;if(A=A.listener,b!==m&&d.isPropagationStopped())break e;Yp(d,A,$),m=b}else for(v=0;v<c.length;v++){if(A=c[v],b=A.instance,$=A.currentTarget,A=A.listener,b!==m&&d.isPropagationStopped())break e;Yp(d,A,$),m=b}}}if(Nn)throw n=sa,Nn=!1,sa=null,n}function Ze(n,i){var a=i[xh];a===void 0&&(a=i[xh]=new Set);var c=n+"__bubble";a.has(c)||(Xp(i,n,2,!1),a.add(c))}function vh(n,i,a){var c=0;i&&(c|=4),Xp(a,n,c,i)}var eu="_reactListening"+Math.random().toString(36).slice(2);function Ea(n){if(!n[eu]){n[eu]=!0,s.forEach(function(a){a!=="selectionchange"&&(Fw.has(a)||vh(a,!1,n),vh(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[eu]||(i[eu]=!0,vh("selectionchange",!1,i))}}function Xp(n,i,a,c){switch(ha(i)){case 1:var d=nt;break;case 4:d=uh;break;default:d=ca}a=d.bind(null,i,a,n),d=void 0,!Vi||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function wh(n,i,a,c,d){var m=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var A=c.stateNode.containerInfo;if(A===d||A.nodeType===8&&A.parentNode===d)break;if(v===4)for(v=c.return;v!==null;){var b=v.tag;if((b===3||b===4)&&(b=v.stateNode.containerInfo,b===d||b.nodeType===8&&b.parentNode===d))return;v=v.return}for(;A!==null;){if(v=Xs(A),v===null)return;if(b=v.tag,b===5||b===6){c=m=v;continue e}A=A.parentNode}}c=c.return}ra(function(){var $=m,X=bi(a),ee=[];e:{var J=Gp.get(n);if(J!==void 0){var le=Wi,de=n;switch(n){case"keypress":if(Hi(a)===0)break e;case"keydown":case"keyup":le=p;break;case"focusin":de="focus",le=Yi;break;case"focusout":de="blur",le=Yi;break;case"beforeblur":case"afterblur":le=Yi;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Gi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=ql;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=q;break;case qp:case Hp:case Wp:le=Sr;break;case Kp:le=He;break;case"scroll":le=ch;break;case"wheel":le=je;break;case"copy":case"cut":case"paste":le=Kl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=T}var fe=(i&4)!==0,ct=!fe&&n==="scroll",z=fe?J!==null?J+"Capture":null:J;fe=[];for(var D=$,B;D!==null;){B=D;var se=B.stateNode;if(B.tag===5&&se!==null&&(B=se,z!==null&&(se=ut(D,z),se!=null&&fe.push(Ta(D,se,B)))),ct)break;D=D.return}0<fe.length&&(J=new le(J,de,null,a,X),ee.push({event:J,listeners:fe}))}}if((i&7)===0){e:{if(J=n==="mouseover"||n==="pointerover",le=n==="mouseout"||n==="pointerout",J&&a!==Us&&(de=a.relatedTarget||a.fromElement)&&(Xs(de)||de[Ar]))break e;if((le||J)&&(J=X.window===X?X:(J=X.ownerDocument)?J.defaultView||J.parentWindow:window,le?(de=a.relatedTarget||a.toElement,le=$,de=de?Xs(de):null,de!==null&&(ct=bn(de),de!==ct||de.tag!==5&&de.tag!==6)&&(de=null)):(le=null,de=$),le!==de)){if(fe=Gi,se="onMouseLeave",z="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(fe=T,se="onPointerLeave",z="onPointerEnter",D="pointer"),ct=le==null?J:so(le),B=de==null?J:so(de),J=new fe(se,D+"leave",le,a,X),J.target=ct,J.relatedTarget=B,se=null,Xs(X)===$&&(fe=new fe(z,D+"enter",de,a,X),fe.target=B,fe.relatedTarget=ct,se=fe),ct=se,le&&de)t:{for(fe=le,z=de,D=0,B=fe;B;B=no(B))D++;for(B=0,se=z;se;se=no(se))B++;for(;0<D-B;)fe=no(fe),D--;for(;0<B-D;)z=no(z),B--;for(;D--;){if(fe===z||z!==null&&fe===z.alternate)break t;fe=no(fe),z=no(z)}fe=null}else fe=null;le!==null&&Zp(ee,J,le,fe,!1),de!==null&&ct!==null&&Zp(ee,ct,de,fe,!0)}}e:{if(J=$?so($):window,le=J.nodeName&&J.nodeName.toLowerCase(),le==="select"||le==="input"&&J.type==="file")var pe=Pw;else if(bp(J))if(Op)pe=Ow;else{pe=bw;var _e=Nw}else(le=J.nodeName)&&le.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(pe=Dw);if(pe&&(pe=pe(n,$))){Dp(ee,pe,a,X);break e}_e&&_e(n,J,$),n==="focusout"&&(_e=J._wrapperState)&&_e.controlled&&J.type==="number"&&ki(J,"number",J.value)}switch(_e=$?so($):window,n){case"focusin":(bp(_e)||_e.contentEditable==="true")&&(eo=_e,ph=$,va=null);break;case"focusout":va=ph=eo=null;break;case"mousedown":mh=!0;break;case"contextmenu":case"mouseup":case"dragend":mh=!1,Bp(ee,a,X);break;case"selectionchange":if(Mw)break;case"keydown":case"keyup":Bp(ee,a,X)}var ve;if(dt)e:{switch(n){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Zi?Pp(n,a)&&(Ie="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ie="onCompositionStart");Ie&&(Js&&a.locale!=="ko"&&(Zi||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Zi&&(ve=da()):(hn=X,qi="value"in hn?hn.value:hn.textContent,Zi=!0)),_e=tu($,Ie),0<_e.length&&(Ie=new ma(Ie,n,null,a,X),ee.push({event:Ie,listeners:_e}),ve?Ie.data=ve:(ve=Np(a),ve!==null&&(Ie.data=ve)))),(ve=dn?xw(n,a):Rw(n,a))&&($=tu($,"onBeforeInput"),0<$.length&&(X=new ma("onBeforeInput","beforeinput",null,a,X),ee.push({event:X,listeners:$}),X.data=ve))}Jp(ee,i)})}function Ta(n,i,a){return{instance:n,listener:i,currentTarget:a}}function tu(n,i){for(var a=i+"Capture",c=[];n!==null;){var d=n,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=ut(n,a),m!=null&&c.unshift(Ta(n,m,d)),m=ut(n,i),m!=null&&c.push(Ta(n,m,d))),n=n.return}return c}function no(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Zp(n,i,a,c,d){for(var m=i._reactName,v=[];a!==null&&a!==c;){var A=a,b=A.alternate,$=A.stateNode;if(b!==null&&b===c)break;A.tag===5&&$!==null&&(A=$,d?(b=ut(a,m),b!=null&&v.unshift(Ta(a,b,A))):d||(b=ut(a,m),b!=null&&v.push(Ta(a,b,A)))),a=a.return}v.length!==0&&n.push({event:i,listeners:v})}var zw=/\r\n?/g,Bw=/\u0000|\uFFFD/g;function em(n){return(typeof n=="string"?n:""+n).replace(zw,`
`).replace(Bw,"")}function nu(n,i,a){if(i=em(i),em(n)!==i&&a)throw Error(t(425))}function ru(){}var Eh=null,Th=null;function Ih(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Sh=typeof setTimeout=="function"?setTimeout:void 0,$w=typeof clearTimeout=="function"?clearTimeout:void 0,tm=typeof Promise=="function"?Promise:void 0,qw=typeof queueMicrotask=="function"?queueMicrotask:typeof tm<"u"?function(n){return tm.resolve(null).then(n).catch(Hw)}:Sh;function Hw(n){setTimeout(function(){throw n})}function Ah(n,i){var a=i,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),Mn(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Mn(i)}function rs(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function nm(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var ro=Math.random().toString(36).slice(2),nr="__reactFiber$"+ro,Ia="__reactProps$"+ro,Ar="__reactContainer$"+ro,xh="__reactEvents$"+ro,Ww="__reactListeners$"+ro,Kw="__reactHandles$"+ro;function Xs(n){var i=n[nr];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Ar]||a[nr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=nm(n);n!==null;){if(a=n[nr])return a;n=nm(n)}return i}n=a,a=n.parentNode}return null}function Sa(n){return n=n[nr]||n[Ar],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function so(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function su(n){return n[Ia]||null}var Rh=[],io=-1;function ss(n){return{current:n}}function et(n){0>io||(n.current=Rh[io],Rh[io]=null,io--)}function Xe(n,i){io++,Rh[io]=n.current,n.current=i}var is={},Mt=ss(is),Xt=ss(!1),Zs=is;function oo(n,i){var a=n.type.contextTypes;if(!a)return is;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in a)d[m]=i[m];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function Zt(n){return n=n.childContextTypes,n!=null}function iu(){et(Xt),et(Mt)}function rm(n,i,a){if(Mt.current!==is)throw Error(t(168));Xe(Mt,i),Xe(Xt,a)}function sm(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in i))throw Error(t(108,Be(n)||"Unknown",d));return re({},a,c)}function ou(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||is,Zs=Mt.current,Xe(Mt,n),Xe(Xt,Xt.current),!0}function im(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=sm(n,i,Zs),c.__reactInternalMemoizedMergedChildContext=n,et(Xt),et(Mt),Xe(Mt,n)):et(Xt),Xe(Xt,a)}var xr=null,au=!1,Ch=!1;function om(n){xr===null?xr=[n]:xr.push(n)}function Gw(n){au=!0,om(n)}function os(){if(!Ch&&xr!==null){Ch=!0;var n=0,i=Ve;try{var a=xr;for(Ve=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}xr=null,au=!1}catch(d){throw xr!==null&&(xr=xr.slice(n+1)),Ui(qs,os),d}finally{Ve=i,Ch=!1}}return null}var ao=[],lo=0,lu=null,uu=0,En=[],Tn=0,ei=null,Rr=1,Cr="";function ti(n,i){ao[lo++]=uu,ao[lo++]=lu,lu=n,uu=i}function am(n,i,a){En[Tn++]=Rr,En[Tn++]=Cr,En[Tn++]=ei,ei=n;var c=Rr;n=Cr;var d=32-Wt(c)-1;c&=~(1<<d),a+=1;var m=32-Wt(i)+d;if(30<m){var v=d-d%5;m=(c&(1<<v)-1).toString(32),c>>=v,d-=v,Rr=1<<32-Wt(i)+d|a<<d|c,Cr=m+n}else Rr=1<<m|a<<d|c,Cr=n}function kh(n){n.return!==null&&(ti(n,1),am(n,1,0))}function Ph(n){for(;n===lu;)lu=ao[--lo],ao[lo]=null,uu=ao[--lo],ao[lo]=null;for(;n===ei;)ei=En[--Tn],En[Tn]=null,Cr=En[--Tn],En[Tn]=null,Rr=En[--Tn],En[Tn]=null}var fn=null,pn=null,rt=!1,Fn=null;function lm(n,i){var a=xn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function um(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,fn=n,pn=rs(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,fn=n,pn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=ei!==null?{id:Rr,overflow:Cr}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=xn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,fn=n,pn=null,!0):!1;default:return!1}}function Nh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function bh(n){if(rt){var i=pn;if(i){var a=i;if(!um(n,i)){if(Nh(n))throw Error(t(418));i=rs(a.nextSibling);var c=fn;i&&um(n,i)?lm(c,a):(n.flags=n.flags&-4097|2,rt=!1,fn=n)}}else{if(Nh(n))throw Error(t(418));n.flags=n.flags&-4097|2,rt=!1,fn=n}}}function cm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;fn=n}function cu(n){if(n!==fn)return!1;if(!rt)return cm(n),rt=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Ih(n.type,n.memoizedProps)),i&&(i=pn)){if(Nh(n))throw hm(),Error(t(418));for(;i;)lm(n,i),i=rs(i.nextSibling)}if(cm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){pn=rs(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}pn=null}}else pn=fn?rs(n.stateNode.nextSibling):null;return!0}function hm(){for(var n=pn;n;)n=rs(n.nextSibling)}function uo(){pn=fn=null,rt=!1}function Dh(n){Fn===null?Fn=[n]:Fn.push(n)}var Qw=ne.ReactCurrentBatchConfig;function Aa(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,m=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===m?i.ref:(i=function(v){var A=d.refs;v===null?delete A[m]:A[m]=v},i._stringRef=m,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function hu(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function dm(n){var i=n._init;return i(n._payload)}function fm(n){function i(z,D){if(n){var B=z.deletions;B===null?(z.deletions=[D],z.flags|=16):B.push(D)}}function a(z,D){if(!n)return null;for(;D!==null;)i(z,D),D=D.sibling;return null}function c(z,D){for(z=new Map;D!==null;)D.key!==null?z.set(D.key,D):z.set(D.index,D),D=D.sibling;return z}function d(z,D){return z=ps(z,D),z.index=0,z.sibling=null,z}function m(z,D,B){return z.index=B,n?(B=z.alternate,B!==null?(B=B.index,B<D?(z.flags|=2,D):B):(z.flags|=2,D)):(z.flags|=1048576,D)}function v(z){return n&&z.alternate===null&&(z.flags|=2),z}function A(z,D,B,se){return D===null||D.tag!==6?(D=Sd(B,z.mode,se),D.return=z,D):(D=d(D,B),D.return=z,D)}function b(z,D,B,se){var pe=B.type;return pe===P?X(z,D,B.props.children,se,B.key):D!==null&&(D.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===Pe&&dm(pe)===D.type)?(se=d(D,B.props),se.ref=Aa(z,D,B),se.return=z,se):(se=Vu(B.type,B.key,B.props,null,z.mode,se),se.ref=Aa(z,D,B),se.return=z,se)}function $(z,D,B,se){return D===null||D.tag!==4||D.stateNode.containerInfo!==B.containerInfo||D.stateNode.implementation!==B.implementation?(D=Ad(B,z.mode,se),D.return=z,D):(D=d(D,B.children||[]),D.return=z,D)}function X(z,D,B,se,pe){return D===null||D.tag!==7?(D=ui(B,z.mode,se,pe),D.return=z,D):(D=d(D,B),D.return=z,D)}function ee(z,D,B){if(typeof D=="string"&&D!==""||typeof D=="number")return D=Sd(""+D,z.mode,B),D.return=z,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ue:return B=Vu(D.type,D.key,D.props,null,z.mode,B),B.ref=Aa(z,null,D),B.return=z,B;case ge:return D=Ad(D,z.mode,B),D.return=z,D;case Pe:var se=D._init;return ee(z,se(D._payload),B)}if(gr(D)||Y(D))return D=ui(D,z.mode,B,null),D.return=z,D;hu(z,D)}return null}function J(z,D,B,se){var pe=D!==null?D.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return pe!==null?null:A(z,D,""+B,se);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case ue:return B.key===pe?b(z,D,B,se):null;case ge:return B.key===pe?$(z,D,B,se):null;case Pe:return pe=B._init,J(z,D,pe(B._payload),se)}if(gr(B)||Y(B))return pe!==null?null:X(z,D,B,se,null);hu(z,B)}return null}function le(z,D,B,se,pe){if(typeof se=="string"&&se!==""||typeof se=="number")return z=z.get(B)||null,A(D,z,""+se,pe);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case ue:return z=z.get(se.key===null?B:se.key)||null,b(D,z,se,pe);case ge:return z=z.get(se.key===null?B:se.key)||null,$(D,z,se,pe);case Pe:var _e=se._init;return le(z,D,B,_e(se._payload),pe)}if(gr(se)||Y(se))return z=z.get(B)||null,X(D,z,se,pe,null);hu(D,se)}return null}function de(z,D,B,se){for(var pe=null,_e=null,ve=D,Ie=D=0,Rt=null;ve!==null&&Ie<B.length;Ie++){ve.index>Ie?(Rt=ve,ve=null):Rt=ve.sibling;var ze=J(z,ve,B[Ie],se);if(ze===null){ve===null&&(ve=Rt);break}n&&ve&&ze.alternate===null&&i(z,ve),D=m(ze,D,Ie),_e===null?pe=ze:_e.sibling=ze,_e=ze,ve=Rt}if(Ie===B.length)return a(z,ve),rt&&ti(z,Ie),pe;if(ve===null){for(;Ie<B.length;Ie++)ve=ee(z,B[Ie],se),ve!==null&&(D=m(ve,D,Ie),_e===null?pe=ve:_e.sibling=ve,_e=ve);return rt&&ti(z,Ie),pe}for(ve=c(z,ve);Ie<B.length;Ie++)Rt=le(ve,z,Ie,B[Ie],se),Rt!==null&&(n&&Rt.alternate!==null&&ve.delete(Rt.key===null?Ie:Rt.key),D=m(Rt,D,Ie),_e===null?pe=Rt:_e.sibling=Rt,_e=Rt);return n&&ve.forEach(function(ms){return i(z,ms)}),rt&&ti(z,Ie),pe}function fe(z,D,B,se){var pe=Y(B);if(typeof pe!="function")throw Error(t(150));if(B=pe.call(B),B==null)throw Error(t(151));for(var _e=pe=null,ve=D,Ie=D=0,Rt=null,ze=B.next();ve!==null&&!ze.done;Ie++,ze=B.next()){ve.index>Ie?(Rt=ve,ve=null):Rt=ve.sibling;var ms=J(z,ve,ze.value,se);if(ms===null){ve===null&&(ve=Rt);break}n&&ve&&ms.alternate===null&&i(z,ve),D=m(ms,D,Ie),_e===null?pe=ms:_e.sibling=ms,_e=ms,ve=Rt}if(ze.done)return a(z,ve),rt&&ti(z,Ie),pe;if(ve===null){for(;!ze.done;Ie++,ze=B.next())ze=ee(z,ze.value,se),ze!==null&&(D=m(ze,D,Ie),_e===null?pe=ze:_e.sibling=ze,_e=ze);return rt&&ti(z,Ie),pe}for(ve=c(z,ve);!ze.done;Ie++,ze=B.next())ze=le(ve,z,Ie,ze.value,se),ze!==null&&(n&&ze.alternate!==null&&ve.delete(ze.key===null?Ie:ze.key),D=m(ze,D,Ie),_e===null?pe=ze:_e.sibling=ze,_e=ze);return n&&ve.forEach(function(CE){return i(z,CE)}),rt&&ti(z,Ie),pe}function ct(z,D,B,se){if(typeof B=="object"&&B!==null&&B.type===P&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case ue:e:{for(var pe=B.key,_e=D;_e!==null;){if(_e.key===pe){if(pe=B.type,pe===P){if(_e.tag===7){a(z,_e.sibling),D=d(_e,B.props.children),D.return=z,z=D;break e}}else if(_e.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===Pe&&dm(pe)===_e.type){a(z,_e.sibling),D=d(_e,B.props),D.ref=Aa(z,_e,B),D.return=z,z=D;break e}a(z,_e);break}else i(z,_e);_e=_e.sibling}B.type===P?(D=ui(B.props.children,z.mode,se,B.key),D.return=z,z=D):(se=Vu(B.type,B.key,B.props,null,z.mode,se),se.ref=Aa(z,D,B),se.return=z,z=se)}return v(z);case ge:e:{for(_e=B.key;D!==null;){if(D.key===_e)if(D.tag===4&&D.stateNode.containerInfo===B.containerInfo&&D.stateNode.implementation===B.implementation){a(z,D.sibling),D=d(D,B.children||[]),D.return=z,z=D;break e}else{a(z,D);break}else i(z,D);D=D.sibling}D=Ad(B,z.mode,se),D.return=z,z=D}return v(z);case Pe:return _e=B._init,ct(z,D,_e(B._payload),se)}if(gr(B))return de(z,D,B,se);if(Y(B))return fe(z,D,B,se);hu(z,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,D!==null&&D.tag===6?(a(z,D.sibling),D=d(D,B),D.return=z,z=D):(a(z,D),D=Sd(B,z.mode,se),D.return=z,z=D),v(z)):a(z,D)}return ct}var co=fm(!0),pm=fm(!1),du=ss(null),fu=null,ho=null,Oh=null;function Vh(){Oh=ho=fu=null}function Lh(n){var i=du.current;et(du),n._currentValue=i}function Mh(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function fo(n,i){fu=n,Oh=ho=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(en=!0),n.firstContext=null)}function In(n){var i=n._currentValue;if(Oh!==n)if(n={context:n,memoizedValue:i,next:null},ho===null){if(fu===null)throw Error(t(308));ho=n,fu.dependencies={lanes:0,firstContext:n}}else ho=ho.next=n;return i}var ni=null;function jh(n){ni===null?ni=[n]:ni.push(n)}function mm(n,i,a,c){var d=i.interleaved;return d===null?(a.next=a,jh(i)):(a.next=d.next,d.next=a),i.interleaved=a,kr(n,c)}function kr(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var as=!1;function Uh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gm(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Pr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function ls(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Fe&2)!==0){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,kr(n,a)}return d=c.interleaved,d===null?(i.next=i,jh(c)):(i.next=d.next,d.next=i),c.interleaved=i,kr(n,a)}function pu(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Jr(n,a)}}function ym(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?d=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?d=m=i:m=m.next=i}else d=m=i;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function mu(n,i,a,c){var d=n.updateQueue;as=!1;var m=d.firstBaseUpdate,v=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var b=A,$=b.next;b.next=null,v===null?m=$:v.next=$,v=b;var X=n.alternate;X!==null&&(X=X.updateQueue,A=X.lastBaseUpdate,A!==v&&(A===null?X.firstBaseUpdate=$:A.next=$,X.lastBaseUpdate=b))}if(m!==null){var ee=d.baseState;v=0,X=$=b=null,A=m;do{var J=A.lane,le=A.eventTime;if((c&J)===J){X!==null&&(X=X.next={eventTime:le,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var de=n,fe=A;switch(J=i,le=a,fe.tag){case 1:if(de=fe.payload,typeof de=="function"){ee=de.call(le,ee,J);break e}ee=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=fe.payload,J=typeof de=="function"?de.call(le,ee,J):de,J==null)break e;ee=re({},ee,J);break e;case 2:as=!0}}A.callback!==null&&A.lane!==0&&(n.flags|=64,J=d.effects,J===null?d.effects=[A]:J.push(A))}else le={eventTime:le,lane:J,tag:A.tag,payload:A.payload,callback:A.callback,next:null},X===null?($=X=le,b=ee):X=X.next=le,v|=J;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;J=A,A=J.next,J.next=null,d.lastBaseUpdate=J,d.shared.pending=null}}while(!0);if(X===null&&(b=ee),d.baseState=b,d.firstBaseUpdate=$,d.lastBaseUpdate=X,i=d.shared.interleaved,i!==null){d=i;do v|=d.lane,d=d.next;while(d!==i)}else m===null&&(d.shared.lanes=0);ii|=v,n.lanes=v,n.memoizedState=ee}}function _m(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var xa={},rr=ss(xa),Ra=ss(xa),Ca=ss(xa);function ri(n){if(n===xa)throw Error(t(174));return n}function Fh(n,i){switch(Xe(Ca,i),Xe(Ra,n),Xe(rr,xa),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:yt(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=yt(i,n)}et(rr),Xe(rr,i)}function po(){et(rr),et(Ra),et(Ca)}function vm(n){ri(Ca.current);var i=ri(rr.current),a=yt(i,n.type);i!==a&&(Xe(Ra,n),Xe(rr,a))}function zh(n){Ra.current===n&&(et(rr),et(Ra))}var st=ss(0);function gu(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Bh=[];function $h(){for(var n=0;n<Bh.length;n++)Bh[n]._workInProgressVersionPrimary=null;Bh.length=0}var yu=ne.ReactCurrentDispatcher,qh=ne.ReactCurrentBatchConfig,si=0,it=null,vt=null,At=null,_u=!1,ka=!1,Pa=0,Yw=0;function jt(){throw Error(t(321))}function Hh(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Un(n[a],i[a]))return!1;return!0}function Wh(n,i,a,c,d,m){if(si=m,it=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,yu.current=n===null||n.memoizedState===null?eE:tE,n=a(c,d),ka){m=0;do{if(ka=!1,Pa=0,25<=m)throw Error(t(301));m+=1,At=vt=null,i.updateQueue=null,yu.current=nE,n=a(c,d)}while(ka)}if(yu.current=Eu,i=vt!==null&&vt.next!==null,si=0,At=vt=it=null,_u=!1,i)throw Error(t(300));return n}function Kh(){var n=Pa!==0;return Pa=0,n}function sr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?it.memoizedState=At=n:At=At.next=n,At}function Sn(){if(vt===null){var n=it.alternate;n=n!==null?n.memoizedState:null}else n=vt.next;var i=At===null?it.memoizedState:At.next;if(i!==null)At=i,vt=n;else{if(n===null)throw Error(t(310));vt=n,n={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},At===null?it.memoizedState=At=n:At=At.next=n}return At}function Na(n,i){return typeof i=="function"?i(n):i}function Gh(n){var i=Sn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=vt,d=c.baseQueue,m=a.pending;if(m!==null){if(d!==null){var v=d.next;d.next=m.next,m.next=v}c.baseQueue=d=m,a.pending=null}if(d!==null){m=d.next,c=c.baseState;var A=v=null,b=null,$=m;do{var X=$.lane;if((si&X)===X)b!==null&&(b=b.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),c=$.hasEagerState?$.eagerState:n(c,$.action);else{var ee={lane:X,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};b===null?(A=b=ee,v=c):b=b.next=ee,it.lanes|=X,ii|=X}$=$.next}while($!==null&&$!==m);b===null?v=c:b.next=A,Un(c,i.memoizedState)||(en=!0),i.memoizedState=c,i.baseState=v,i.baseQueue=b,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do m=d.lane,it.lanes|=m,ii|=m,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Qh(n){var i=Sn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,m=i.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do m=n(m,v.action),v=v.next;while(v!==d);Un(m,i.memoizedState)||(en=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,c]}function wm(){}function Em(n,i){var a=it,c=Sn(),d=i(),m=!Un(c.memoizedState,d);if(m&&(c.memoizedState=d,en=!0),c=c.queue,Yh(Sm.bind(null,a,c,n),[n]),c.getSnapshot!==i||m||At!==null&&At.memoizedState.tag&1){if(a.flags|=2048,ba(9,Im.bind(null,a,c,d,i),void 0,null),xt===null)throw Error(t(349));(si&30)!==0||Tm(a,i,d)}return d}function Tm(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=it.updateQueue,i===null?(i={lastEffect:null,stores:null},it.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Im(n,i,a,c){i.value=a,i.getSnapshot=c,Am(i)&&xm(n)}function Sm(n,i,a){return a(function(){Am(i)&&xm(n)})}function Am(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Un(n,a)}catch{return!0}}function xm(n){var i=kr(n,1);i!==null&&qn(i,n,1,-1)}function Rm(n){var i=sr();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:n},i.queue=n,n=n.dispatch=Zw.bind(null,it,n),[i.memoizedState,n]}function ba(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=it.updateQueue,i===null?(i={lastEffect:null,stores:null},it.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function Cm(){return Sn().memoizedState}function vu(n,i,a,c){var d=sr();it.flags|=n,d.memoizedState=ba(1|i,a,void 0,c===void 0?null:c)}function wu(n,i,a,c){var d=Sn();c=c===void 0?null:c;var m=void 0;if(vt!==null){var v=vt.memoizedState;if(m=v.destroy,c!==null&&Hh(c,v.deps)){d.memoizedState=ba(i,a,m,c);return}}it.flags|=n,d.memoizedState=ba(1|i,a,m,c)}function km(n,i){return vu(8390656,8,n,i)}function Yh(n,i){return wu(2048,8,n,i)}function Pm(n,i){return wu(4,2,n,i)}function Nm(n,i){return wu(4,4,n,i)}function bm(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Dm(n,i,a){return a=a!=null?a.concat([n]):null,wu(4,4,bm.bind(null,i,n),a)}function Jh(){}function Om(n,i){var a=Sn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Hh(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function Vm(n,i){var a=Sn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Hh(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function Lm(n,i,a){return(si&21)===0?(n.baseState&&(n.baseState=!1,en=!0),n.memoizedState=a):(Un(a,i)||(a=Ks(),it.lanes|=a,ii|=a,n.baseState=!0),i)}function Jw(n,i){var a=Ve;Ve=a!==0&&4>a?a:4,n(!0);var c=qh.transition;qh.transition={};try{n(!1),i()}finally{Ve=a,qh.transition=c}}function Mm(){return Sn().memoizedState}function Xw(n,i,a){var c=ds(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},jm(n))Um(i,a);else if(a=mm(n,i,a,c),a!==null){var d=Qt();qn(a,n,c,d),Fm(a,i,c)}}function Zw(n,i,a){var c=ds(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(jm(n))Um(i,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var v=i.lastRenderedState,A=m(v,a);if(d.hasEagerState=!0,d.eagerState=A,Un(A,v)){var b=i.interleaved;b===null?(d.next=d,jh(i)):(d.next=b.next,b.next=d),i.interleaved=d;return}}catch{}finally{}a=mm(n,i,d,c),a!==null&&(d=Qt(),qn(a,n,c,d),Fm(a,i,c))}}function jm(n){var i=n.alternate;return n===it||i!==null&&i===it}function Um(n,i){ka=_u=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Fm(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Jr(n,a)}}var Eu={readContext:In,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},eE={readContext:In,useCallback:function(n,i){return sr().memoizedState=[n,i===void 0?null:i],n},useContext:In,useEffect:km,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,vu(4194308,4,bm.bind(null,i,n),a)},useLayoutEffect:function(n,i){return vu(4194308,4,n,i)},useInsertionEffect:function(n,i){return vu(4,2,n,i)},useMemo:function(n,i){var a=sr();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=sr();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=Xw.bind(null,it,n),[c.memoizedState,n]},useRef:function(n){var i=sr();return n={current:n},i.memoizedState=n},useState:Rm,useDebugValue:Jh,useDeferredValue:function(n){return sr().memoizedState=n},useTransition:function(){var n=Rm(!1),i=n[0];return n=Jw.bind(null,n[1]),sr().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=it,d=sr();if(rt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),xt===null)throw Error(t(349));(si&30)!==0||Tm(c,i,a)}d.memoizedState=a;var m={value:a,getSnapshot:i};return d.queue=m,km(Sm.bind(null,c,m,n),[n]),c.flags|=2048,ba(9,Im.bind(null,c,m,a,i),void 0,null),a},useId:function(){var n=sr(),i=xt.identifierPrefix;if(rt){var a=Cr,c=Rr;a=(c&~(1<<32-Wt(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=Pa++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=Yw++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},tE={readContext:In,useCallback:Om,useContext:In,useEffect:Yh,useImperativeHandle:Dm,useInsertionEffect:Pm,useLayoutEffect:Nm,useMemo:Vm,useReducer:Gh,useRef:Cm,useState:function(){return Gh(Na)},useDebugValue:Jh,useDeferredValue:function(n){var i=Sn();return Lm(i,vt.memoizedState,n)},useTransition:function(){var n=Gh(Na)[0],i=Sn().memoizedState;return[n,i]},useMutableSource:wm,useSyncExternalStore:Em,useId:Mm,unstable_isNewReconciler:!1},nE={readContext:In,useCallback:Om,useContext:In,useEffect:Yh,useImperativeHandle:Dm,useInsertionEffect:Pm,useLayoutEffect:Nm,useMemo:Vm,useReducer:Qh,useRef:Cm,useState:function(){return Qh(Na)},useDebugValue:Jh,useDeferredValue:function(n){var i=Sn();return vt===null?i.memoizedState=n:Lm(i,vt.memoizedState,n)},useTransition:function(){var n=Qh(Na)[0],i=Sn().memoizedState;return[n,i]},useMutableSource:wm,useSyncExternalStore:Em,useId:Mm,unstable_isNewReconciler:!1};function zn(n,i){if(n&&n.defaultProps){i=re({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function Xh(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:re({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Tu={isMounted:function(n){return(n=n._reactInternals)?bn(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=Qt(),d=ds(n),m=Pr(c,d);m.payload=i,a!=null&&(m.callback=a),i=ls(n,m,d),i!==null&&(qn(i,n,d,c),pu(i,n,d))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=Qt(),d=ds(n),m=Pr(c,d);m.tag=1,m.payload=i,a!=null&&(m.callback=a),i=ls(n,m,d),i!==null&&(qn(i,n,d,c),pu(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Qt(),c=ds(n),d=Pr(a,c);d.tag=2,i!=null&&(d.callback=i),i=ls(n,d,c),i!==null&&(qn(i,n,c,a),pu(i,n,c))}};function zm(n,i,a,c,d,m,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,v):i.prototype&&i.prototype.isPureReactComponent?!_a(a,c)||!_a(d,m):!0}function Bm(n,i,a){var c=!1,d=is,m=i.contextType;return typeof m=="object"&&m!==null?m=In(m):(d=Zt(i)?Zs:Mt.current,c=i.contextTypes,m=(c=c!=null)?oo(n,d):is),i=new i(a,m),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Tu,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=m),i}function $m(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&Tu.enqueueReplaceState(i,i.state,null)}function Zh(n,i,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Uh(n);var m=i.contextType;typeof m=="object"&&m!==null?d.context=In(m):(m=Zt(i)?Zs:Mt.current,d.context=oo(n,m)),d.state=n.memoizedState,m=i.getDerivedStateFromProps,typeof m=="function"&&(Xh(n,i,m,a),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&Tu.enqueueReplaceState(d,d.state,null),mu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function mo(n,i){try{var a="",c=i;do a+=Ce(c),c=c.return;while(c);var d=a}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:i,stack:d,digest:null}}function ed(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function td(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var rE=typeof WeakMap=="function"?WeakMap:Map;function qm(n,i,a){a=Pr(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){ku||(ku=!0,gd=c),td(n,i)},a}function Hm(n,i,a){a=Pr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=i.value;a.payload=function(){return c(d)},a.callback=function(){td(n,i)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){td(n,i),typeof c!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),a}function Wm(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new rE;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(a)||(d.add(a),n=yE.bind(null,n,i,a),i.then(n,n))}function Km(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Gm(n,i,a,c,d){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Pr(-1,1),i.tag=2,ls(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var sE=ne.ReactCurrentOwner,en=!1;function Gt(n,i,a,c){i.child=n===null?pm(i,null,a,c):co(i,n.child,a,c)}function Qm(n,i,a,c,d){a=a.render;var m=i.ref;return fo(i,d),c=Wh(n,i,a,c,m,d),a=Kh(),n!==null&&!en?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Nr(n,i,d)):(rt&&a&&kh(i),i.flags|=1,Gt(n,i,c,d),i.child)}function Ym(n,i,a,c,d){if(n===null){var m=a.type;return typeof m=="function"&&!Id(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=m,Jm(n,i,m,c,d)):(n=Vu(a.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,(n.lanes&d)===0){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:_a,a(v,c)&&n.ref===i.ref)return Nr(n,i,d)}return i.flags|=1,n=ps(m,c),n.ref=i.ref,n.return=i,i.child=n}function Jm(n,i,a,c,d){if(n!==null){var m=n.memoizedProps;if(_a(m,c)&&n.ref===i.ref)if(en=!1,i.pendingProps=c=m,(n.lanes&d)!==0)(n.flags&131072)!==0&&(en=!0);else return i.lanes=n.lanes,Nr(n,i,d)}return nd(n,i,a,c,d)}function Xm(n,i,a){var c=i.pendingProps,d=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(yo,mn),mn|=a;else{if((a&1073741824)===0)return n=m!==null?m.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Xe(yo,mn),mn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,Xe(yo,mn),mn|=c}else m!==null?(c=m.baseLanes|a,i.memoizedState=null):c=a,Xe(yo,mn),mn|=c;return Gt(n,i,d,a),i.child}function Zm(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function nd(n,i,a,c,d){var m=Zt(a)?Zs:Mt.current;return m=oo(i,m),fo(i,d),a=Wh(n,i,a,c,m,d),c=Kh(),n!==null&&!en?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Nr(n,i,d)):(rt&&c&&kh(i),i.flags|=1,Gt(n,i,a,d),i.child)}function eg(n,i,a,c,d){if(Zt(a)){var m=!0;ou(i)}else m=!1;if(fo(i,d),i.stateNode===null)Su(n,i),Bm(i,a,c),Zh(i,a,c,d),c=!0;else if(n===null){var v=i.stateNode,A=i.memoizedProps;v.props=A;var b=v.context,$=a.contextType;typeof $=="object"&&$!==null?$=In($):($=Zt(a)?Zs:Mt.current,$=oo(i,$));var X=a.getDerivedStateFromProps,ee=typeof X=="function"||typeof v.getSnapshotBeforeUpdate=="function";ee||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==c||b!==$)&&$m(i,v,c,$),as=!1;var J=i.memoizedState;v.state=J,mu(i,c,v,d),b=i.memoizedState,A!==c||J!==b||Xt.current||as?(typeof X=="function"&&(Xh(i,a,X,c),b=i.memoizedState),(A=as||zm(i,a,A,c,J,b,$))?(ee||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=b),v.props=c,v.state=b,v.context=$,c=A):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{v=i.stateNode,gm(n,i),A=i.memoizedProps,$=i.type===i.elementType?A:zn(i.type,A),v.props=$,ee=i.pendingProps,J=v.context,b=a.contextType,typeof b=="object"&&b!==null?b=In(b):(b=Zt(a)?Zs:Mt.current,b=oo(i,b));var le=a.getDerivedStateFromProps;(X=typeof le=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==ee||J!==b)&&$m(i,v,c,b),as=!1,J=i.memoizedState,v.state=J,mu(i,c,v,d);var de=i.memoizedState;A!==ee||J!==de||Xt.current||as?(typeof le=="function"&&(Xh(i,a,le,c),de=i.memoizedState),($=as||zm(i,a,$,c,J,de,b)||!1)?(X||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,de,b),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,de,b)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===n.memoizedProps&&J===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&J===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=de),v.props=c,v.state=de,v.context=b,c=$):(typeof v.componentDidUpdate!="function"||A===n.memoizedProps&&J===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&J===n.memoizedState||(i.flags|=1024),c=!1)}return rd(n,i,a,c,m,d)}function rd(n,i,a,c,d,m){Zm(n,i);var v=(i.flags&128)!==0;if(!c&&!v)return d&&im(i,a,!1),Nr(n,i,m);c=i.stateNode,sE.current=i;var A=v&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&v?(i.child=co(i,n.child,null,m),i.child=co(i,null,A,m)):Gt(n,i,A,m),i.memoizedState=c.state,d&&im(i,a,!0),i.child}function tg(n){var i=n.stateNode;i.pendingContext?rm(n,i.pendingContext,i.pendingContext!==i.context):i.context&&rm(n,i.context,!1),Fh(n,i.containerInfo)}function ng(n,i,a,c,d){return uo(),Dh(d),i.flags|=256,Gt(n,i,a,c),i.child}var sd={dehydrated:null,treeContext:null,retryLane:0};function id(n){return{baseLanes:n,cachePool:null,transitions:null}}function rg(n,i,a){var c=i.pendingProps,d=st.current,m=!1,v=(i.flags&128)!==0,A;if((A=v)||(A=n!==null&&n.memoizedState===null?!1:(d&2)!==0),A?(m=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Xe(st,d&1),n===null)return bh(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(v=c.children,n=c.fallback,m?(c=i.mode,m=i.child,v={mode:"hidden",children:v},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=v):m=Lu(v,c,0,null),n=ui(n,c,a,null),m.return=i,n.return=i,m.sibling=n,i.child=m,i.child.memoizedState=id(a),i.memoizedState=sd,n):od(i,v));if(d=n.memoizedState,d!==null&&(A=d.dehydrated,A!==null))return iE(n,i,v,c,A,d,a);if(m){m=c.fallback,v=i.mode,d=n.child,A=d.sibling;var b={mode:"hidden",children:c.children};return(v&1)===0&&i.child!==d?(c=i.child,c.childLanes=0,c.pendingProps=b,i.deletions=null):(c=ps(d,b),c.subtreeFlags=d.subtreeFlags&14680064),A!==null?m=ps(A,m):(m=ui(m,v,a,null),m.flags|=2),m.return=i,c.return=i,c.sibling=m,i.child=c,c=m,m=i.child,v=n.child.memoizedState,v=v===null?id(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},m.memoizedState=v,m.childLanes=n.childLanes&~a,i.memoizedState=sd,c}return m=n.child,n=m.sibling,c=ps(m,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function od(n,i){return i=Lu({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Iu(n,i,a,c){return c!==null&&Dh(c),co(i,n.child,null,a),n=od(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function iE(n,i,a,c,d,m,v){if(a)return i.flags&256?(i.flags&=-257,c=ed(Error(t(422))),Iu(n,i,v,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(m=c.fallback,d=i.mode,c=Lu({mode:"visible",children:c.children},d,0,null),m=ui(m,d,v,null),m.flags|=2,c.return=i,m.return=i,c.sibling=m,i.child=c,(i.mode&1)!==0&&co(i,n.child,null,v),i.child.memoizedState=id(v),i.memoizedState=sd,m);if((i.mode&1)===0)return Iu(n,i,v,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var A=c.dgst;return c=A,m=Error(t(419)),c=ed(m,c,void 0),Iu(n,i,v,c)}if(A=(v&n.childLanes)!==0,en||A){if(c=xt,c!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|v))!==0?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,kr(n,d),qn(c,n,d,-1))}return Td(),c=ed(Error(t(421))),Iu(n,i,v,c)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=_E.bind(null,n),d._reactRetry=i,null):(n=m.treeContext,pn=rs(d.nextSibling),fn=i,rt=!0,Fn=null,n!==null&&(En[Tn++]=Rr,En[Tn++]=Cr,En[Tn++]=ei,Rr=n.id,Cr=n.overflow,ei=i),i=od(i,c.children),i.flags|=4096,i)}function sg(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Mh(n.return,i,a)}function ad(n,i,a,c,d){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=d)}function ig(n,i,a){var c=i.pendingProps,d=c.revealOrder,m=c.tail;if(Gt(n,i,c.children,a),c=st.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&sg(n,a,i);else if(n.tag===19)sg(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Xe(st,c),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&gu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),ad(i,!1,d,a,m);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&gu(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}ad(i,!0,a,null,m);break;case"together":ad(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Su(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Nr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),ii|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=ps(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=ps(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function oE(n,i,a){switch(i.tag){case 3:tg(i),uo();break;case 5:vm(i);break;case 1:Zt(i.type)&&ou(i);break;case 4:Fh(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,d=i.memoizedProps.value;Xe(du,c._currentValue),c._currentValue=d;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(Xe(st,st.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?rg(n,i,a):(Xe(st,st.current&1),n=Nr(n,i,a),n!==null?n.sibling:null);Xe(st,st.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return ig(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Xe(st,st.current),c)break;return null;case 22:case 23:return i.lanes=0,Xm(n,i,a)}return Nr(n,i,a)}var og,ld,ag,lg;og=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},ld=function(){},ag=function(n,i,a,c){var d=n.memoizedProps;if(d!==c){n=i.stateNode,ri(rr.current);var m=null;switch(a){case"input":d=Ls(n,d),c=Ls(n,c),m=[];break;case"select":d=re({},d,{value:void 0}),c=re({},c,{value:void 0}),m=[];break;case"textarea":d=Ko(n,d),c=Ko(n,c),m=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=ru)}Zo(a,c);var v;a=null;for($ in d)if(!c.hasOwnProperty($)&&d.hasOwnProperty($)&&d[$]!=null)if($==="style"){var A=d[$];for(v in A)A.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?m||(m=[]):(m=m||[]).push($,null));for($ in c){var b=c[$];if(A=d?.[$],c.hasOwnProperty($)&&b!==A&&(b!=null||A!=null))if($==="style")if(A){for(v in A)!A.hasOwnProperty(v)||b&&b.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in b)b.hasOwnProperty(v)&&A[v]!==b[v]&&(a||(a={}),a[v]=b[v])}else a||(m||(m=[]),m.push($,a)),a=b;else $==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,A=A?A.__html:void 0,b!=null&&A!==b&&(m=m||[]).push($,b)):$==="children"?typeof b!="string"&&typeof b!="number"||(m=m||[]).push($,""+b):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(b!=null&&$==="onScroll"&&Ze("scroll",n),m||A===b||(m=[])):(m=m||[]).push($,b))}a&&(m=m||[]).push("style",a);var $=m;(i.updateQueue=$)&&(i.flags|=4)}},lg=function(n,i,a,c){a!==c&&(i.flags|=4)};function Da(n,i){if(!rt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ut(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function aE(n,i,a){var c=i.pendingProps;switch(Ph(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(i),null;case 1:return Zt(i.type)&&iu(),Ut(i),null;case 3:return c=i.stateNode,po(),et(Xt),et(Mt),$h(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(cu(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Fn!==null&&(vd(Fn),Fn=null))),ld(n,i),Ut(i),null;case 5:zh(i);var d=ri(Ca.current);if(a=i.type,n!==null&&i.stateNode!=null)ag(n,i,a,c,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return Ut(i),null}if(n=ri(rr.current),cu(i)){c=i.stateNode,a=i.type;var m=i.memoizedProps;switch(c[nr]=i,c[Ia]=m,n=(i.mode&1)!==0,a){case"dialog":Ze("cancel",c),Ze("close",c);break;case"iframe":case"object":case"embed":Ze("load",c);break;case"video":case"audio":for(d=0;d<wa.length;d++)Ze(wa[d],c);break;case"source":Ze("error",c);break;case"img":case"image":case"link":Ze("error",c),Ze("load",c);break;case"details":Ze("toggle",c);break;case"input":Ci(c,m),Ze("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},Ze("invalid",c);break;case"textarea":Pi(c,m),Ze("invalid",c)}Zo(a,m),d=null;for(var v in m)if(m.hasOwnProperty(v)){var A=m[v];v==="children"?typeof A=="string"?c.textContent!==A&&(m.suppressHydrationWarning!==!0&&nu(c.textContent,A,n),d=["children",A]):typeof A=="number"&&c.textContent!==""+A&&(m.suppressHydrationWarning!==!0&&nu(c.textContent,A,n),d=["children",""+A]):o.hasOwnProperty(v)&&A!=null&&v==="onScroll"&&Ze("scroll",c)}switch(a){case"input":mr(c),Cl(c,m,!0);break;case"textarea":mr(c),Go(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=ru)}c=d,i.updateQueue=c,c!==null&&(i.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=gt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=v.createElement(a,{is:c.is}):(n=v.createElement(a),a==="select"&&(v=n,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):n=v.createElementNS(n,a),n[nr]=i,n[Ia]=c,og(n,i,!1,!1),i.stateNode=n;e:{switch(v=ea(a,c),a){case"dialog":Ze("cancel",n),Ze("close",n),d=c;break;case"iframe":case"object":case"embed":Ze("load",n),d=c;break;case"video":case"audio":for(d=0;d<wa.length;d++)Ze(wa[d],n);d=c;break;case"source":Ze("error",n),d=c;break;case"img":case"image":case"link":Ze("error",n),Ze("load",n),d=c;break;case"details":Ze("toggle",n),d=c;break;case"input":Ci(n,c),d=Ls(n,c),Ze("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=re({},c,{value:void 0}),Ze("invalid",n);break;case"textarea":Pi(n,c),d=Ko(n,c),Ze("invalid",n);break;default:d=c}Zo(a,d),A=d;for(m in A)if(A.hasOwnProperty(m)){var b=A[m];m==="style"?Jo(n,b):m==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&Qo(n,b)):m==="children"?typeof b=="string"?(a!=="textarea"||b!=="")&&Wr(n,b):typeof b=="number"&&Wr(n,""+b):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?b!=null&&m==="onScroll"&&Ze("scroll",n):b!=null&&te(n,m,b,v))}switch(a){case"input":mr(n),Cl(n,c,!1);break;case"textarea":mr(n),Go(n);break;case"option":c.value!=null&&n.setAttribute("value",""+$e(c.value));break;case"select":n.multiple=!!c.multiple,m=c.value,m!=null?yr(n,!!c.multiple,m,!1):c.defaultValue!=null&&yr(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=ru)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Ut(i),null;case 6:if(n&&i.stateNode!=null)lg(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=ri(Ca.current),ri(rr.current),cu(i)){if(c=i.stateNode,a=i.memoizedProps,c[nr]=i,(m=c.nodeValue!==a)&&(n=fn,n!==null))switch(n.tag){case 3:nu(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&nu(c.nodeValue,a,(n.mode&1)!==0)}m&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[nr]=i,i.stateNode=c}return Ut(i),null;case 13:if(et(st),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(rt&&pn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)hm(),uo(),i.flags|=98560,m=!1;else if(m=cu(i),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[nr]=i}else uo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ut(i),m=!1}else Fn!==null&&(vd(Fn),Fn=null),m=!0;if(!m)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(st.current&1)!==0?wt===0&&(wt=3):Td())),i.updateQueue!==null&&(i.flags|=4),Ut(i),null);case 4:return po(),ld(n,i),n===null&&Ea(i.stateNode.containerInfo),Ut(i),null;case 10:return Lh(i.type._context),Ut(i),null;case 17:return Zt(i.type)&&iu(),Ut(i),null;case 19:if(et(st),m=i.memoizedState,m===null)return Ut(i),null;if(c=(i.flags&128)!==0,v=m.rendering,v===null)if(c)Da(m,!1);else{if(wt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(v=gu(n),v!==null){for(i.flags|=128,Da(m,!1),c=v.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)m=a,n=c,m.flags&=14680066,v=m.alternate,v===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=v.childLanes,m.lanes=v.lanes,m.child=v.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=v.memoizedProps,m.memoizedState=v.memoizedState,m.updateQueue=v.updateQueue,m.type=v.type,n=v.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Xe(st,st.current&1|2),i.child}n=n.sibling}m.tail!==null&&Je()>_o&&(i.flags|=128,c=!0,Da(m,!1),i.lanes=4194304)}else{if(!c)if(n=gu(v),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Da(m,!0),m.tail===null&&m.tailMode==="hidden"&&!v.alternate&&!rt)return Ut(i),null}else 2*Je()-m.renderingStartTime>_o&&a!==1073741824&&(i.flags|=128,c=!0,Da(m,!1),i.lanes=4194304);m.isBackwards?(v.sibling=i.child,i.child=v):(a=m.last,a!==null?a.sibling=v:i.child=v,m.last=v)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=Je(),i.sibling=null,a=st.current,Xe(st,c?a&1|2:a&1),i):(Ut(i),null);case 22:case 23:return Ed(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(mn&1073741824)!==0&&(Ut(i),i.subtreeFlags&6&&(i.flags|=8192)):Ut(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function lE(n,i){switch(Ph(i),i.tag){case 1:return Zt(i.type)&&iu(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return po(),et(Xt),et(Mt),$h(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return zh(i),null;case 13:if(et(st),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));uo()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return et(st),null;case 4:return po(),null;case 10:return Lh(i.type._context),null;case 22:case 23:return Ed(),null;case 24:return null;default:return null}}var Au=!1,Ft=!1,uE=typeof WeakSet=="function"?WeakSet:Set,he=null;function go(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){lt(n,i,c)}else a.current=null}function ud(n,i,a){try{a()}catch(c){lt(n,i,c)}}var ug=!1;function cE(n,i){if(Eh=es,n=zp(),fh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var v=0,A=-1,b=-1,$=0,X=0,ee=n,J=null;t:for(;;){for(var le;ee!==a||d!==0&&ee.nodeType!==3||(A=v+d),ee!==m||c!==0&&ee.nodeType!==3||(b=v+c),ee.nodeType===3&&(v+=ee.nodeValue.length),(le=ee.firstChild)!==null;)J=ee,ee=le;for(;;){if(ee===n)break t;if(J===a&&++$===d&&(A=v),J===m&&++X===c&&(b=v),(le=ee.nextSibling)!==null)break;ee=J,J=ee.parentNode}ee=le}a=A===-1||b===-1?null:{start:A,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(Th={focusedElem:n,selectionRange:a},es=!1,he=i;he!==null;)if(i=he,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,he=n;else for(;he!==null;){i=he;try{var de=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var fe=de.memoizedProps,ct=de.memoizedState,z=i.stateNode,D=z.getSnapshotBeforeUpdate(i.elementType===i.type?fe:zn(i.type,fe),ct);z.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var B=i.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){lt(i,i.return,se)}if(n=i.sibling,n!==null){n.return=i.return,he=n;break}he=i.return}return de=ug,ug=!1,de}function Oa(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var m=d.destroy;d.destroy=void 0,m!==void 0&&ud(i,a,m)}d=d.next}while(d!==c)}}function xu(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function cd(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function cg(n){var i=n.alternate;i!==null&&(n.alternate=null,cg(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[nr],delete i[Ia],delete i[xh],delete i[Ww],delete i[Kw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function hg(n){return n.tag===5||n.tag===3||n.tag===4}function dg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||hg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function hd(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ru));else if(c!==4&&(n=n.child,n!==null))for(hd(n,i,a),n=n.sibling;n!==null;)hd(n,i,a),n=n.sibling}function dd(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(dd(n,i,a),n=n.sibling;n!==null;)dd(n,i,a),n=n.sibling}var bt=null,Bn=!1;function us(n,i,a){for(a=a.child;a!==null;)fg(n,i,a),a=a.sibling}function fg(n,i,a){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Hs,a)}catch{}switch(a.tag){case 5:Ft||go(a,i);case 6:var c=bt,d=Bn;bt=null,us(n,i,a),bt=c,Bn=d,bt!==null&&(Bn?(n=bt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):bt.removeChild(a.stateNode));break;case 18:bt!==null&&(Bn?(n=bt,a=a.stateNode,n.nodeType===8?Ah(n.parentNode,a):n.nodeType===1&&Ah(n,a),Mn(n)):Ah(bt,a.stateNode));break;case 4:c=bt,d=Bn,bt=a.stateNode.containerInfo,Bn=!0,us(n,i,a),bt=c,Bn=d;break;case 0:case 11:case 14:case 15:if(!Ft&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var m=d,v=m.destroy;m=m.tag,v!==void 0&&((m&2)!==0||(m&4)!==0)&&ud(a,i,v),d=d.next}while(d!==c)}us(n,i,a);break;case 1:if(!Ft&&(go(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(A){lt(a,i,A)}us(n,i,a);break;case 21:us(n,i,a);break;case 22:a.mode&1?(Ft=(c=Ft)||a.memoizedState!==null,us(n,i,a),Ft=c):us(n,i,a);break;default:us(n,i,a)}}function pg(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new uE),i.forEach(function(c){var d=vE.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function $n(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var m=n,v=i,A=v;e:for(;A!==null;){switch(A.tag){case 5:bt=A.stateNode,Bn=!1;break e;case 3:bt=A.stateNode.containerInfo,Bn=!0;break e;case 4:bt=A.stateNode.containerInfo,Bn=!0;break e}A=A.return}if(bt===null)throw Error(t(160));fg(m,v,d),bt=null,Bn=!1;var b=d.alternate;b!==null&&(b.return=null),d.return=null}catch($){lt(d,i,$)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)mg(i,n),i=i.sibling}function mg(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if($n(i,n),ir(n),c&4){try{Oa(3,n,n.return),xu(3,n)}catch(fe){lt(n,n.return,fe)}try{Oa(5,n,n.return)}catch(fe){lt(n,n.return,fe)}}break;case 1:$n(i,n),ir(n),c&512&&a!==null&&go(a,a.return);break;case 5:if($n(i,n),ir(n),c&512&&a!==null&&go(a,a.return),n.flags&32){var d=n.stateNode;try{Wr(d,"")}catch(fe){lt(n,n.return,fe)}}if(c&4&&(d=n.stateNode,d!=null)){var m=n.memoizedProps,v=a!==null?a.memoizedProps:m,A=n.type,b=n.updateQueue;if(n.updateQueue=null,b!==null)try{A==="input"&&m.type==="radio"&&m.name!=null&&Ho(d,m),ea(A,v);var $=ea(A,m);for(v=0;v<b.length;v+=2){var X=b[v],ee=b[v+1];X==="style"?Jo(d,ee):X==="dangerouslySetInnerHTML"?Qo(d,ee):X==="children"?Wr(d,ee):te(d,X,ee,$)}switch(A){case"input":Wo(d,m);break;case"textarea":Ni(d,m);break;case"select":var J=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var le=m.value;le!=null?yr(d,!!m.multiple,le,!1):J!==!!m.multiple&&(m.defaultValue!=null?yr(d,!!m.multiple,m.defaultValue,!0):yr(d,!!m.multiple,m.multiple?[]:"",!1))}d[Ia]=m}catch(fe){lt(n,n.return,fe)}}break;case 6:if($n(i,n),ir(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,m=n.memoizedProps;try{d.nodeValue=m}catch(fe){lt(n,n.return,fe)}}break;case 3:if($n(i,n),ir(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Mn(i.containerInfo)}catch(fe){lt(n,n.return,fe)}break;case 4:$n(i,n),ir(n);break;case 13:$n(i,n),ir(n),d=n.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(md=Je())),c&4&&pg(n);break;case 22:if(X=a!==null&&a.memoizedState!==null,n.mode&1?(Ft=($=Ft)||X,$n(i,n),Ft=$):$n(i,n),ir(n),c&8192){if($=n.memoizedState!==null,(n.stateNode.isHidden=$)&&!X&&(n.mode&1)!==0)for(he=n,X=n.child;X!==null;){for(ee=he=X;he!==null;){switch(J=he,le=J.child,J.tag){case 0:case 11:case 14:case 15:Oa(4,J,J.return);break;case 1:go(J,J.return);var de=J.stateNode;if(typeof de.componentWillUnmount=="function"){c=J,a=J.return;try{i=c,de.props=i.memoizedProps,de.state=i.memoizedState,de.componentWillUnmount()}catch(fe){lt(c,a,fe)}}break;case 5:go(J,J.return);break;case 22:if(J.memoizedState!==null){_g(ee);continue}}le!==null?(le.return=J,he=le):_g(ee)}X=X.sibling}e:for(X=null,ee=n;;){if(ee.tag===5){if(X===null){X=ee;try{d=ee.stateNode,$?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(A=ee.stateNode,b=ee.memoizedProps.style,v=b!=null&&b.hasOwnProperty("display")?b.display:null,A.style.display=Yo("display",v))}catch(fe){lt(n,n.return,fe)}}}else if(ee.tag===6){if(X===null)try{ee.stateNode.nodeValue=$?"":ee.memoizedProps}catch(fe){lt(n,n.return,fe)}}else if((ee.tag!==22&&ee.tag!==23||ee.memoizedState===null||ee===n)&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===n)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===n)break e;X===ee&&(X=null),ee=ee.return}X===ee&&(X=null),ee.sibling.return=ee.return,ee=ee.sibling}}break;case 19:$n(i,n),ir(n),c&4&&pg(n);break;case 21:break;default:$n(i,n),ir(n)}}function ir(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(hg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Wr(d,""),c.flags&=-33);var m=dg(n);dd(n,m,d);break;case 3:case 4:var v=c.stateNode.containerInfo,A=dg(n);hd(n,A,v);break;default:throw Error(t(161))}}catch(b){lt(n,n.return,b)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function hE(n,i,a){he=n,gg(n)}function gg(n,i,a){for(var c=(n.mode&1)!==0;he!==null;){var d=he,m=d.child;if(d.tag===22&&c){var v=d.memoizedState!==null||Au;if(!v){var A=d.alternate,b=A!==null&&A.memoizedState!==null||Ft;A=Au;var $=Ft;if(Au=v,(Ft=b)&&!$)for(he=d;he!==null;)v=he,b=v.child,v.tag===22&&v.memoizedState!==null?vg(d):b!==null?(b.return=v,he=b):vg(d);for(;m!==null;)he=m,gg(m),m=m.sibling;he=d,Au=A,Ft=$}yg(n)}else(d.subtreeFlags&8772)!==0&&m!==null?(m.return=d,he=m):yg(n)}}function yg(n){for(;he!==null;){var i=he;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Ft||xu(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!Ft)if(a===null)c.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:zn(i.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=i.updateQueue;m!==null&&_m(i,m,c);break;case 3:var v=i.updateQueue;if(v!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}_m(i,v,a)}break;case 5:var A=i.stateNode;if(a===null&&i.flags&4){a=A;var b=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&a.focus();break;case"img":b.src&&(a.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var $=i.alternate;if($!==null){var X=$.memoizedState;if(X!==null){var ee=X.dehydrated;ee!==null&&Mn(ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ft||i.flags&512&&cd(i)}catch(J){lt(i,i.return,J)}}if(i===n){he=null;break}if(a=i.sibling,a!==null){a.return=i.return,he=a;break}he=i.return}}function _g(n){for(;he!==null;){var i=he;if(i===n){he=null;break}var a=i.sibling;if(a!==null){a.return=i.return,he=a;break}he=i.return}}function vg(n){for(;he!==null;){var i=he;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{xu(4,i)}catch(b){lt(i,a,b)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var d=i.return;try{c.componentDidMount()}catch(b){lt(i,d,b)}}var m=i.return;try{cd(i)}catch(b){lt(i,m,b)}break;case 5:var v=i.return;try{cd(i)}catch(b){lt(i,v,b)}}}catch(b){lt(i,i.return,b)}if(i===n){he=null;break}var A=i.sibling;if(A!==null){A.return=i.return,he=A;break}he=i.return}}var dE=Math.ceil,Ru=ne.ReactCurrentDispatcher,fd=ne.ReactCurrentOwner,An=ne.ReactCurrentBatchConfig,Fe=0,xt=null,ft=null,Dt=0,mn=0,yo=ss(0),wt=0,Va=null,ii=0,Cu=0,pd=0,La=null,tn=null,md=0,_o=1/0,br=null,ku=!1,gd=null,cs=null,Pu=!1,hs=null,Nu=0,Ma=0,yd=null,bu=-1,Du=0;function Qt(){return(Fe&6)!==0?Je():bu!==-1?bu:bu=Je()}function ds(n){return(n.mode&1)===0?1:(Fe&2)!==0&&Dt!==0?Dt&-Dt:Qw.transition!==null?(Du===0&&(Du=Ks()),Du):(n=Ve,n!==0||(n=window.event,n=n===void 0?16:ha(n.type)),n)}function qn(n,i,a,c){if(50<Ma)throw Ma=0,yd=null,Error(t(185));Yr(n,a,c),((Fe&2)===0||n!==xt)&&(n===xt&&((Fe&2)===0&&(Cu|=a),wt===4&&fs(n,Dt)),nn(n,c),a===1&&Fe===0&&(i.mode&1)===0&&(_o=Je()+500,au&&os()))}function nn(n,i){var a=n.callbackNode;wr(n,i);var c=Ws(n,n===xt?Dt:0);if(c===0)a!==null&&oa(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&oa(a),i===1)n.tag===0?Gw(Eg.bind(null,n)):om(Eg.bind(null,n)),qw(function(){(Fe&6)===0&&os()}),a=null;else{switch(Xr(c)){case 1:a=qs;break;case 4:a=Kr;break;case 16:a=_n;break;case 536870912:a=Dl;break;default:a=_n}a=kg(a,wg.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function wg(n,i){if(bu=-1,Du=0,(Fe&6)!==0)throw Error(t(327));var a=n.callbackNode;if(vo()&&n.callbackNode!==a)return null;var c=Ws(n,n===xt?Dt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=Ou(n,c);else{i=c;var d=Fe;Fe|=2;var m=Ig();(xt!==n||Dt!==i)&&(br=null,_o=Je()+500,ai(n,i));do try{mE();break}catch(A){Tg(n,A)}while(!0);Vh(),Ru.current=m,Fe=d,ft!==null?i=0:(xt=null,Dt=0,i=wt)}if(i!==0){if(i===2&&(d=cn(n),d!==0&&(c=d,i=_d(n,d))),i===1)throw a=Va,ai(n,0),fs(n,c),nn(n,Je()),a;if(i===6)fs(n,c);else{if(d=n.current.alternate,(c&30)===0&&!fE(d)&&(i=Ou(n,c),i===2&&(m=cn(n),m!==0&&(c=m,i=_d(n,m))),i===1))throw a=Va,ai(n,0),fs(n,c),nn(n,Je()),a;switch(n.finishedWork=d,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:li(n,tn,br);break;case 3:if(fs(n,c),(c&130023424)===c&&(i=md+500-Je(),10<i)){if(Ws(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Qt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Sh(li.bind(null,n,tn,br),i);break}li(n,tn,br);break;case 4:if(fs(n,c),(c&4194240)===c)break;for(i=n.eventTimes,d=-1;0<c;){var v=31-Wt(c);m=1<<v,v=i[v],v>d&&(d=v),c&=~m}if(c=d,c=Je()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*dE(c/1960))-c,10<c){n.timeoutHandle=Sh(li.bind(null,n,tn,br),c);break}li(n,tn,br);break;case 5:li(n,tn,br);break;default:throw Error(t(329))}}}return nn(n,Je()),n.callbackNode===a?wg.bind(null,n):null}function _d(n,i){var a=La;return n.current.memoizedState.isDehydrated&&(ai(n,i).flags|=256),n=Ou(n,i),n!==2&&(i=tn,tn=a,i!==null&&vd(i)),n}function vd(n){tn===null?tn=n:tn.push.apply(tn,n)}function fE(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],m=d.getSnapshot;d=d.value;try{if(!Un(m(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function fs(n,i){for(i&=~pd,i&=~Cu,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-Wt(i),c=1<<a;n[a]=-1,i&=~c}}function Eg(n){if((Fe&6)!==0)throw Error(t(327));vo();var i=Ws(n,0);if((i&1)===0)return nn(n,Je()),null;var a=Ou(n,i);if(n.tag!==0&&a===2){var c=cn(n);c!==0&&(i=c,a=_d(n,c))}if(a===1)throw a=Va,ai(n,0),fs(n,i),nn(n,Je()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,li(n,tn,br),nn(n,Je()),null}function wd(n,i){var a=Fe;Fe|=1;try{return n(i)}finally{Fe=a,Fe===0&&(_o=Je()+500,au&&os())}}function oi(n){hs!==null&&hs.tag===0&&(Fe&6)===0&&vo();var i=Fe;Fe|=1;var a=An.transition,c=Ve;try{if(An.transition=null,Ve=1,n)return n()}finally{Ve=c,An.transition=a,Fe=i,(Fe&6)===0&&os()}}function Ed(){mn=yo.current,et(yo)}function ai(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,$w(a)),ft!==null)for(a=ft.return;a!==null;){var c=a;switch(Ph(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&iu();break;case 3:po(),et(Xt),et(Mt),$h();break;case 5:zh(c);break;case 4:po();break;case 13:et(st);break;case 19:et(st);break;case 10:Lh(c.type._context);break;case 22:case 23:Ed()}a=a.return}if(xt=n,ft=n=ps(n.current,null),Dt=mn=i,wt=0,Va=null,pd=Cu=ii=0,tn=La=null,ni!==null){for(i=0;i<ni.length;i++)if(a=ni[i],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,m=a.pending;if(m!==null){var v=m.next;m.next=d,c.next=v}a.pending=c}ni=null}return n}function Tg(n,i){do{var a=ft;try{if(Vh(),yu.current=Eu,_u){for(var c=it.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}_u=!1}if(si=0,At=vt=it=null,ka=!1,Pa=0,fd.current=null,a===null||a.return===null){wt=1,Va=i,ft=null;break}e:{var m=n,v=a.return,A=a,b=i;if(i=Dt,A.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var $=b,X=A,ee=X.tag;if((X.mode&1)===0&&(ee===0||ee===11||ee===15)){var J=X.alternate;J?(X.updateQueue=J.updateQueue,X.memoizedState=J.memoizedState,X.lanes=J.lanes):(X.updateQueue=null,X.memoizedState=null)}var le=Km(v);if(le!==null){le.flags&=-257,Gm(le,v,A,m,i),le.mode&1&&Wm(m,$,i),i=le,b=$;var de=i.updateQueue;if(de===null){var fe=new Set;fe.add(b),i.updateQueue=fe}else de.add(b);break e}else{if((i&1)===0){Wm(m,$,i),Td();break e}b=Error(t(426))}}else if(rt&&A.mode&1){var ct=Km(v);if(ct!==null){(ct.flags&65536)===0&&(ct.flags|=256),Gm(ct,v,A,m,i),Dh(mo(b,A));break e}}m=b=mo(b,A),wt!==4&&(wt=2),La===null?La=[m]:La.push(m),m=v;do{switch(m.tag){case 3:m.flags|=65536,i&=-i,m.lanes|=i;var z=qm(m,b,i);ym(m,z);break e;case 1:A=b;var D=m.type,B=m.stateNode;if((m.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(cs===null||!cs.has(B)))){m.flags|=65536,i&=-i,m.lanes|=i;var se=Hm(m,A,i);ym(m,se);break e}}m=m.return}while(m!==null)}Ag(a)}catch(pe){i=pe,ft===a&&a!==null&&(ft=a=a.return);continue}break}while(!0)}function Ig(){var n=Ru.current;return Ru.current=Eu,n===null?Eu:n}function Td(){(wt===0||wt===3||wt===2)&&(wt=4),xt===null||(ii&268435455)===0&&(Cu&268435455)===0||fs(xt,Dt)}function Ou(n,i){var a=Fe;Fe|=2;var c=Ig();(xt!==n||Dt!==i)&&(br=null,ai(n,i));do try{pE();break}catch(d){Tg(n,d)}while(!0);if(Vh(),Fe=a,Ru.current=c,ft!==null)throw Error(t(261));return xt=null,Dt=0,wt}function pE(){for(;ft!==null;)Sg(ft)}function mE(){for(;ft!==null&&!Nl();)Sg(ft)}function Sg(n){var i=Cg(n.alternate,n,mn);n.memoizedProps=n.pendingProps,i===null?Ag(n):ft=i,fd.current=null}function Ag(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=aE(a,i,mn),a!==null){ft=a;return}}else{if(a=lE(a,i),a!==null){a.flags&=32767,ft=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{wt=6,ft=null;return}}if(i=i.sibling,i!==null){ft=i;return}ft=i=n}while(i!==null);wt===0&&(wt=5)}function li(n,i,a){var c=Ve,d=An.transition;try{An.transition=null,Ve=1,gE(n,i,a,c)}finally{An.transition=d,Ve=c}return null}function gE(n,i,a,c){do vo();while(hs!==null);if((Fe&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(Ge(n,m),n===xt&&(ft=xt=null,Dt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Pu||(Pu=!0,kg(_n,function(){return vo(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=An.transition,An.transition=null;var v=Ve;Ve=1;var A=Fe;Fe|=4,fd.current=null,cE(n,a),mg(a,n),Lw(Th),es=!!Eh,Th=Eh=null,n.current=a,hE(a),ih(),Fe=A,Ve=v,An.transition=m}else n.current=a;if(Pu&&(Pu=!1,hs=n,Nu=d),m=n.pendingLanes,m===0&&(cs=null),Ol(a.stateNode),nn(n,Je()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)d=i[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(ku)throw ku=!1,n=gd,gd=null,n;return(Nu&1)!==0&&n.tag!==0&&vo(),m=n.pendingLanes,(m&1)!==0?n===yd?Ma++:(Ma=0,yd=n):Ma=0,os(),null}function vo(){if(hs!==null){var n=Xr(Nu),i=An.transition,a=Ve;try{if(An.transition=null,Ve=16>n?16:n,hs===null)var c=!1;else{if(n=hs,hs=null,Nu=0,(Fe&6)!==0)throw Error(t(331));var d=Fe;for(Fe|=4,he=n.current;he!==null;){var m=he,v=m.child;if((he.flags&16)!==0){var A=m.deletions;if(A!==null){for(var b=0;b<A.length;b++){var $=A[b];for(he=$;he!==null;){var X=he;switch(X.tag){case 0:case 11:case 15:Oa(8,X,m)}var ee=X.child;if(ee!==null)ee.return=X,he=ee;else for(;he!==null;){X=he;var J=X.sibling,le=X.return;if(cg(X),X===$){he=null;break}if(J!==null){J.return=le,he=J;break}he=le}}}var de=m.alternate;if(de!==null){var fe=de.child;if(fe!==null){de.child=null;do{var ct=fe.sibling;fe.sibling=null,fe=ct}while(fe!==null)}}he=m}}if((m.subtreeFlags&2064)!==0&&v!==null)v.return=m,he=v;else e:for(;he!==null;){if(m=he,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:Oa(9,m,m.return)}var z=m.sibling;if(z!==null){z.return=m.return,he=z;break e}he=m.return}}var D=n.current;for(he=D;he!==null;){v=he;var B=v.child;if((v.subtreeFlags&2064)!==0&&B!==null)B.return=v,he=B;else e:for(v=D;he!==null;){if(A=he,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:xu(9,A)}}catch(pe){lt(A,A.return,pe)}if(A===v){he=null;break e}var se=A.sibling;if(se!==null){se.return=A.return,he=se;break e}he=A.return}}if(Fe=d,os(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Hs,n)}catch{}c=!0}return c}finally{Ve=a,An.transition=i}}return!1}function xg(n,i,a){i=mo(a,i),i=qm(n,i,1),n=ls(n,i,1),i=Qt(),n!==null&&(Yr(n,1,i),nn(n,i))}function lt(n,i,a){if(n.tag===3)xg(n,n,a);else for(;i!==null;){if(i.tag===3){xg(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(cs===null||!cs.has(c))){n=mo(a,n),n=Hm(i,n,1),i=ls(i,n,1),n=Qt(),i!==null&&(Yr(i,1,n),nn(i,n));break}}i=i.return}}function yE(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=Qt(),n.pingedLanes|=n.suspendedLanes&a,xt===n&&(Dt&a)===a&&(wt===4||wt===3&&(Dt&130023424)===Dt&&500>Je()-md?ai(n,0):pd|=a),nn(n,i)}function Rg(n,i){i===0&&((n.mode&1)===0?i=1:(i=zi,zi<<=1,(zi&130023424)===0&&(zi=4194304)));var a=Qt();n=kr(n,i),n!==null&&(Yr(n,i,a),nn(n,a))}function _E(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Rg(n,a)}function vE(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),Rg(n,a)}var Cg;Cg=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Xt.current)en=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return en=!1,oE(n,i,a);en=(n.flags&131072)!==0}else en=!1,rt&&(i.flags&1048576)!==0&&am(i,uu,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;Su(n,i),n=i.pendingProps;var d=oo(i,Mt.current);fo(i,a),d=Wh(null,i,c,n,d,a);var m=Kh();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Zt(c)?(m=!0,ou(i)):m=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Uh(i),d.updater=Tu,i.stateNode=d,d._reactInternals=i,Zh(i,c,n,a),i=rd(null,i,c,!0,m,a)):(i.tag=0,rt&&m&&kh(i),Gt(null,i,d,a),i=i.child),i;case 16:c=i.elementType;e:{switch(Su(n,i),n=i.pendingProps,d=c._init,c=d(c._payload),i.type=c,d=i.tag=EE(c),n=zn(c,n),d){case 0:i=nd(null,i,c,n,a);break e;case 1:i=eg(null,i,c,n,a);break e;case 11:i=Qm(null,i,c,n,a);break e;case 14:i=Ym(null,i,c,zn(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:zn(c,d),nd(n,i,c,d,a);case 1:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:zn(c,d),eg(n,i,c,d,a);case 3:e:{if(tg(i),n===null)throw Error(t(387));c=i.pendingProps,m=i.memoizedState,d=m.element,gm(n,i),mu(i,c,null,a);var v=i.memoizedState;if(c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){d=mo(Error(t(423)),i),i=ng(n,i,c,a,d);break e}else if(c!==d){d=mo(Error(t(424)),i),i=ng(n,i,c,a,d);break e}else for(pn=rs(i.stateNode.containerInfo.firstChild),fn=i,rt=!0,Fn=null,a=pm(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(uo(),c===d){i=Nr(n,i,a);break e}Gt(n,i,c,a)}i=i.child}return i;case 5:return vm(i),n===null&&bh(i),c=i.type,d=i.pendingProps,m=n!==null?n.memoizedProps:null,v=d.children,Ih(c,d)?v=null:m!==null&&Ih(c,m)&&(i.flags|=32),Zm(n,i),Gt(n,i,v,a),i.child;case 6:return n===null&&bh(i),null;case 13:return rg(n,i,a);case 4:return Fh(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=co(i,null,c,a):Gt(n,i,c,a),i.child;case 11:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:zn(c,d),Qm(n,i,c,d,a);case 7:return Gt(n,i,i.pendingProps,a),i.child;case 8:return Gt(n,i,i.pendingProps.children,a),i.child;case 12:return Gt(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,d=i.pendingProps,m=i.memoizedProps,v=d.value,Xe(du,c._currentValue),c._currentValue=v,m!==null)if(Un(m.value,v)){if(m.children===d.children&&!Xt.current){i=Nr(n,i,a);break e}}else for(m=i.child,m!==null&&(m.return=i);m!==null;){var A=m.dependencies;if(A!==null){v=m.child;for(var b=A.firstContext;b!==null;){if(b.context===c){if(m.tag===1){b=Pr(-1,a&-a),b.tag=2;var $=m.updateQueue;if($!==null){$=$.shared;var X=$.pending;X===null?b.next=b:(b.next=X.next,X.next=b),$.pending=b}}m.lanes|=a,b=m.alternate,b!==null&&(b.lanes|=a),Mh(m.return,a,i),A.lanes|=a;break}b=b.next}}else if(m.tag===10)v=m.type===i.type?null:m.child;else if(m.tag===18){if(v=m.return,v===null)throw Error(t(341));v.lanes|=a,A=v.alternate,A!==null&&(A.lanes|=a),Mh(v,a,i),v=m.sibling}else v=m.child;if(v!==null)v.return=m;else for(v=m;v!==null;){if(v===i){v=null;break}if(m=v.sibling,m!==null){m.return=v.return,v=m;break}v=v.return}m=v}Gt(n,i,d.children,a),i=i.child}return i;case 9:return d=i.type,c=i.pendingProps.children,fo(i,a),d=In(d),c=c(d),i.flags|=1,Gt(n,i,c,a),i.child;case 14:return c=i.type,d=zn(c,i.pendingProps),d=zn(c.type,d),Ym(n,i,c,d,a);case 15:return Jm(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:zn(c,d),Su(n,i),i.tag=1,Zt(c)?(n=!0,ou(i)):n=!1,fo(i,a),Bm(i,c,d),Zh(i,c,d,a),rd(null,i,c,!0,n,a);case 19:return ig(n,i,a);case 22:return Xm(n,i,a)}throw Error(t(156,i.tag))};function kg(n,i){return Ui(n,i)}function wE(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(n,i,a,c){return new wE(n,i,a,c)}function Id(n){return n=n.prototype,!(!n||!n.isReactComponent)}function EE(n){if(typeof n=="function")return Id(n)?1:0;if(n!=null){if(n=n.$$typeof,n===L)return 11;if(n===Le)return 14}return 2}function ps(n,i){var a=n.alternate;return a===null?(a=xn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Vu(n,i,a,c,d,m){var v=2;if(c=n,typeof n=="function")Id(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case P:return ui(a.children,d,m,i);case S:v=8,d|=8;break;case x:return n=xn(12,a,i,d|2),n.elementType=x,n.lanes=m,n;case C:return n=xn(13,a,i,d),n.elementType=C,n.lanes=m,n;case Qe:return n=xn(19,a,i,d),n.elementType=Qe,n.lanes=m,n;case Ne:return Lu(a,d,m,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case N:v=10;break e;case O:v=9;break e;case L:v=11;break e;case Le:v=14;break e;case Pe:v=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=xn(v,a,i,d),i.elementType=n,i.type=c,i.lanes=m,i}function ui(n,i,a,c){return n=xn(7,n,c,i),n.lanes=a,n}function Lu(n,i,a,c){return n=xn(22,n,c,i),n.elementType=Ne,n.lanes=a,n.stateNode={isHidden:!1},n}function Sd(n,i,a){return n=xn(6,n,null,i),n.lanes=a,n}function Ad(n,i,a){return i=xn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function TE(n,i,a,c,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qr(0),this.expirationTimes=Qr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qr(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function xd(n,i,a,c,d,m,v,A,b){return n=new TE(n,i,a,A,b),i===1?(i=1,m===!0&&(i|=8)):i=0,m=xn(3,null,null,i),n.current=m,m.stateNode=n,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uh(m),n}function IE(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ge,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function Pg(n){if(!n)return is;n=n._reactInternals;e:{if(bn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Zt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Zt(a))return sm(n,a,i)}return i}function Ng(n,i,a,c,d,m,v,A,b){return n=xd(a,c,!0,n,d,m,v,A,b),n.context=Pg(null),a=n.current,c=Qt(),d=ds(a),m=Pr(c,d),m.callback=i??null,ls(a,m,d),n.current.lanes=d,Yr(n,d,c),nn(n,c),n}function Mu(n,i,a,c){var d=i.current,m=Qt(),v=ds(d);return a=Pg(a),i.context===null?i.context=a:i.pendingContext=a,i=Pr(m,v),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=ls(d,i,v),n!==null&&(qn(n,d,v,m),pu(n,d,v)),v}function ju(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function bg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Rd(n,i){bg(n,i),(n=n.alternate)&&bg(n,i)}function SE(){return null}var Dg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Cd(n){this._internalRoot=n}Uu.prototype.render=Cd.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Mu(n,i,null,null)},Uu.prototype.unmount=Cd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;oi(function(){Mu(null,n,null,null)}),i[Ar]=null}};function Uu(n){this._internalRoot=n}Uu.prototype.unstable_scheduleHydration=function(n){if(n){var i=Ul();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Xn.length&&i!==0&&i<Xn[a].priority;a++);Xn.splice(a,0,n),a===0&&Bl(n)}};function kd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Fu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Og(){}function AE(n,i,a,c,d){if(d){if(typeof c=="function"){var m=c;c=function(){var $=ju(v);m.call($)}}var v=Ng(i,c,n,0,null,!1,!1,"",Og);return n._reactRootContainer=v,n[Ar]=v.current,Ea(n.nodeType===8?n.parentNode:n),oi(),v}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var A=c;c=function(){var $=ju(b);A.call($)}}var b=xd(n,0,!1,null,null,!1,!1,"",Og);return n._reactRootContainer=b,n[Ar]=b.current,Ea(n.nodeType===8?n.parentNode:n),oi(function(){Mu(i,b,a,c)}),b}function zu(n,i,a,c,d){var m=a._reactRootContainer;if(m){var v=m;if(typeof d=="function"){var A=d;d=function(){var b=ju(v);A.call(b)}}Mu(i,v,n,d)}else v=AE(a,i,n,d,c);return ju(v)}Ml=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=Gr(i.pendingLanes);a!==0&&(Jr(i,a|1),nn(i,Je()),(Fe&6)===0&&(_o=Je()+500,os()))}break;case 13:oi(function(){var c=kr(n,1);if(c!==null){var d=Qt();qn(c,n,1,d)}}),Rd(n,1)}},Bi=function(n){if(n.tag===13){var i=kr(n,134217728);if(i!==null){var a=Qt();qn(i,n,134217728,a)}Rd(n,134217728)}},jl=function(n){if(n.tag===13){var i=ds(n),a=kr(n,i);if(a!==null){var c=Qt();qn(a,n,i,c)}Rd(n,i)}},Ul=function(){return Ve},Fl=function(n,i){var a=Ve;try{return Ve=n,i()}finally{Ve=a}},Di=function(n,i,a){switch(i){case"input":if(Wo(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var d=su(c);if(!d)throw Error(t(90));Ri(c),Wo(c,d)}}}break;case"textarea":Ni(n,a);break;case"select":i=a.value,i!=null&&yr(n,!!a.multiple,i,!1)}},Fs=wd,na=oi;var xE={usingClientEntryPoint:!1,Events:[Sa,so,su,Yn,ta,wd]},ja={findFiberByHostInstance:Xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},RE={bundleType:ja.bundleType,version:ja.version,rendererPackageName:ja.rendererPackageName,rendererConfig:ja.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ia(n),n===null?null:n.stateNode},findFiberByHostInstance:ja.findFiberByHostInstance||SE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bu.isDisabled&&Bu.supportsFiber)try{Hs=Bu.inject(RE),un=Bu}catch{}}return rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xE,rn.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kd(i))throw Error(t(200));return IE(n,i,null,a)},rn.createRoot=function(n,i){if(!kd(n))throw Error(t(299));var a=!1,c="",d=Dg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=xd(n,1,!1,null,null,a,!1,c,d),n[Ar]=i.current,Ea(n.nodeType===8?n.parentNode:n),new Cd(i)},rn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=ia(i),n=n===null?null:n.stateNode,n},rn.flushSync=function(n){return oi(n)},rn.hydrate=function(n,i,a){if(!Fu(i))throw Error(t(200));return zu(null,n,i,!0,a)},rn.hydrateRoot=function(n,i,a){if(!kd(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,m="",v=Dg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),i=Ng(i,null,n,1,a??null,d,!1,m,v),n[Ar]=i.current,Ea(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new Uu(i)},rn.render=function(n,i,a){if(!Fu(i))throw Error(t(200));return zu(null,n,i,!1,a)},rn.unmountComponentAtNode=function(n){if(!Fu(n))throw Error(t(40));return n._reactRootContainer?(oi(function(){zu(null,null,n,!1,function(){n._reactRootContainer=null,n[Ar]=null})}),!0):!1},rn.unstable_batchedUpdates=wd,rn.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Fu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return zu(n,i,a,!1,c)},rn.version="18.3.1-next-f1338f8080-20240426",rn}var Bg;function LE(){if(Bg)return bd.exports;Bg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),bd.exports=VE(),bd.exports}var $g;function ME(){if($g)return $u;$g=1;var r=LE();return $u.createRoot=r.createRoot,$u.hydrateRoot=r.hydrateRoot,$u}var jE=ME();const UE=P_(jE),FE=()=>{};var qg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},zE=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},b_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,w=l>>2,I=(l&3)<<4|f>>4;let R=(f&15)<<2|y>>6,M=y&63;g||(M=64,h||(R=64)),s.push(t[w],t[I],t[R],t[M])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(N_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):zE(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const I=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||y==null||I==null)throw new BE;const R=l<<2|f>>4;if(s.push(R),y!==64){const M=f<<4&240|y>>2;if(s.push(M),I!==64){const j=y<<6&192|I;s.push(j)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class BE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $E=function(r){const e=N_(r);return b_.encodeByteArray(e,!0)},hc=function(r){return $E(r).replace(/\./g,"")},D_=function(r){try{return b_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE=()=>qE().__FIREBASE_DEFAULTS__,WE=()=>{if(typeof process>"u"||typeof qg>"u")return;const r=qg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},KE=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&D_(r[1]);return e&&JSON.parse(e)},Vc=()=>{try{return FE()||HE()||WE()||KE()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},O_=r=>Vc()?.emulatorHosts?.[r],GE=r=>{const e=O_(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},V_=()=>Vc()?.config,L_=r=>Vc()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function M_(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[hc(JSON.stringify(t)),hc(JSON.stringify(h)),""].join(".")}const Ga={};function JE(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ga))Ga[e]?r.emulator.push(e):r.prod.push(e);return r}function XE(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Hg=!1;function j_(r,e){if(typeof window>"u"||typeof document>"u"||!Lo(window.location.host)||Ga[r]===e||Ga[r]||Hg)return;Ga[r]=e;function t(R){return`__firebase__banner__${R}`}const s="__firebase__banner",l=JE().prod.length>0;function h(){const R=document.getElementById(s);R&&R.remove()}function f(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function g(R,M){R.setAttribute("width","24"),R.setAttribute("id",M),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function y(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{Hg=!0,h()},R}function w(R,M){R.setAttribute("id",M),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function I(){const R=XE(s),M=t("text"),j=document.getElementById(M)||document.createElement("span"),U=t("learnmore"),k=document.getElementById(U)||document.createElement("a"),W=t("preprendIcon"),K=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const te=R.element;f(te),w(k,U);const ne=y();g(K,W),te.append(K,j,k,ne),document.body.appendChild(te)}l?(j.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function eT(){const r=Vc()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function rT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sT(){const r=Ht();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function iT(){return!eT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oT(){try{return typeof indexedDB=="object"}catch{return!1}}function aT(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="FirebaseError";class $r extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=lT,Object.setPrototypeOf(this,$r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fl.prototype.create)}}class fl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?uT(l,s):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new $r(o,f,s)}}function uT(r,e){return r.replace(cT,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const cT=/\{\$([^}]+)}/g;function hT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function gi(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(Wg(l)&&Wg(h)){if(!gi(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Wg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Ba(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function $a(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function dT(r,e){const t=new fT(r,e);return t.subscribe.bind(t)}class fT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");pT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Vd),o.error===void 0&&(o.error=Vd),o.complete===void 0&&(o.complete=Vd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pT(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Vd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(r){return r&&r._delegate?r._delegate:r}class yi{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new QE;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yT(e))try{this.getOrInitializeService({instanceIdentifier:ci})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=ci){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ci){return this.instances.has(e)}getOptions(e=ci){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&h.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:gT(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ci){return this.component?this.component.multipleInstances?e:ci:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gT(r){return r===ci?void 0:r}function yT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new mT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(be||(be={}));const vT={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},wT=be.INFO,ET={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},TT=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=ET[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Lf{constructor(e){this.name=e,this._logLevel=wT,this._logHandler=TT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const IT=(r,e)=>e.some(t=>r instanceof t);let Kg,Gg;function ST(){return Kg||(Kg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AT(){return Gg||(Gg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const U_=new WeakMap,ef=new WeakMap,F_=new WeakMap,Ld=new WeakMap,Mf=new WeakMap;function xT(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(Is(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&U_.set(t,r)}).catch(()=>{}),Mf.set(e,r),e}function RT(r){if(ef.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});ef.set(r,e)}let tf={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return ef.get(r);if(e==="objectStoreNames")return r.objectStoreNames||F_.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Is(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function CT(r){tf=r(tf)}function kT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Md(this),e,...t);return F_.set(s,e.sort?e.sort():[e]),Is(s)}:AT().includes(r)?function(...e){return r.apply(Md(this),e),Is(U_.get(this))}:function(...e){return Is(r.apply(Md(this),e))}}function PT(r){return typeof r=="function"?kT(r):(r instanceof IDBTransaction&&RT(r),IT(r,ST())?new Proxy(r,tf):r)}function Is(r){if(r instanceof IDBRequest)return xT(r);if(Ld.has(r))return Ld.get(r);const e=PT(r);return e!==r&&(Ld.set(r,e),Mf.set(e,r)),e}const Md=r=>Mf.get(r);function NT(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=Is(h);return s&&h.addEventListener("upgradeneeded",g=>{s(Is(h.result),g.oldVersion,g.newVersion,Is(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const bT=["get","getKey","getAll","getAllKeys","count"],DT=["put","add","delete","clear"],jd=new Map;function Qg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(jd.get(e))return jd.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=DT.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||bT.includes(t)))return;const l=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&g.done]))[0]};return jd.set(e,l),l}CT(r=>({...r,get:(e,t,s)=>Qg(e,t)||r.get(e,t,s),has:(e,t)=>!!Qg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(VT(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function VT(r){return r.getComponent()?.type==="VERSION"}const nf="@firebase/app",Yg="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur=new Lf("@firebase/app"),LT="@firebase/app-compat",MT="@firebase/analytics-compat",jT="@firebase/analytics",UT="@firebase/app-check-compat",FT="@firebase/app-check",zT="@firebase/auth",BT="@firebase/auth-compat",$T="@firebase/database",qT="@firebase/data-connect",HT="@firebase/database-compat",WT="@firebase/functions",KT="@firebase/functions-compat",GT="@firebase/installations",QT="@firebase/installations-compat",YT="@firebase/messaging",JT="@firebase/messaging-compat",XT="@firebase/performance",ZT="@firebase/performance-compat",e1="@firebase/remote-config",t1="@firebase/remote-config-compat",n1="@firebase/storage",r1="@firebase/storage-compat",s1="@firebase/firestore",i1="@firebase/ai",o1="@firebase/firestore-compat",a1="firebase",l1="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf="[DEFAULT]",u1={[nf]:"fire-core",[LT]:"fire-core-compat",[jT]:"fire-analytics",[MT]:"fire-analytics-compat",[FT]:"fire-app-check",[UT]:"fire-app-check-compat",[zT]:"fire-auth",[BT]:"fire-auth-compat",[$T]:"fire-rtdb",[qT]:"fire-data-connect",[HT]:"fire-rtdb-compat",[WT]:"fire-fn",[KT]:"fire-fn-compat",[GT]:"fire-iid",[QT]:"fire-iid-compat",[YT]:"fire-fcm",[JT]:"fire-fcm-compat",[XT]:"fire-perf",[ZT]:"fire-perf-compat",[e1]:"fire-rc",[t1]:"fire-rc-compat",[n1]:"fire-gcs",[r1]:"fire-gcs-compat",[s1]:"fire-fst",[o1]:"fire-fst-compat",[i1]:"fire-vertex","fire-js":"fire-js",[a1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=new Map,c1=new Map,sf=new Map;function Jg(r,e){try{r.container.addComponent(e)}catch(t){Ur.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Co(r){const e=r.name;if(sf.has(e))return Ur.debug(`There were multiple attempts to register component ${e}.`),!1;sf.set(e,r);for(const t of dc.values())Jg(t,r);for(const t of c1.values())Jg(t,r);return!0}function jf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function gn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ss=new fl("app","Firebase",h1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new yi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ss.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=l1;function z_(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:rf,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Ss.create("bad-app-name",{appName:String(o)});if(t||(t=V_()),!t)throw Ss.create("no-options");const l=dc.get(o);if(l){if(gi(t,l.options)&&gi(s,l.config))return l;throw Ss.create("duplicate-app",{appName:o})}const h=new _T(o);for(const g of sf.values())h.addComponent(g);const f=new d1(t,s,h);return dc.set(o,f),f}function B_(r=rf){const e=dc.get(r);if(!e&&r===rf&&V_())return z_();if(!e)throw Ss.create("no-app",{appName:r});return e}function As(r,e,t){let s=u1[r]??r;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ur.warn(h.join(" "));return}Co(new yi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="firebase-heartbeat-database",p1=1,tl="firebase-heartbeat-store";let Ud=null;function $_(){return Ud||(Ud=NT(f1,p1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(tl)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ss.create("idb-open",{originalErrorMessage:r.message})})),Ud}async function m1(r){try{const t=(await $_()).transaction(tl),s=await t.objectStore(tl).get(q_(r));return await t.done,s}catch(e){if(e instanceof $r)Ur.warn(e.message);else{const t=Ss.create("idb-get",{originalErrorMessage:e?.message});Ur.warn(t.message)}}}async function Xg(r,e){try{const s=(await $_()).transaction(tl,"readwrite");await s.objectStore(tl).put(e,q_(r)),await s.done}catch(t){if(t instanceof $r)Ur.warn(t.message);else{const s=Ss.create("idb-set",{originalErrorMessage:t?.message});Ur.warn(s.message)}}}function q_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=1024,y1=30;class _1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new w1(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Zg();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>y1){const o=E1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ur.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Zg(),{heartbeatsToSend:t,unsentEntries:s}=v1(this._heartbeatsCache.heartbeats),o=hc(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Ur.warn(e),""}}}function Zg(){return new Date().toISOString().substring(0,10)}function v1(r,e=g1){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),ey(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ey(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class w1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oT()?aT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await m1(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Xg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Xg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ey(r){return hc(JSON.stringify({version:2,heartbeats:r})).length}function E1(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(r){Co(new yi("platform-logger",e=>new OT(e),"PRIVATE")),Co(new yi("heartbeat",e=>new _1(e),"PRIVATE")),As(nf,Yg,r),As(nf,Yg,"esm2020"),As("fire-js","")}T1("");function H_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const I1=H_,W_=new fl("auth","Firebase",H_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=new Lf("@firebase/auth");function S1(r,...e){fc.logLevel<=be.WARN&&fc.warn(`Auth (${Mo}): ${r}`,...e)}function Ju(r,...e){fc.logLevel<=be.ERROR&&fc.error(`Auth (${Mo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(r,...e){throw Ff(r,...e)}function Kn(r,...e){return Ff(r,...e)}function Uf(r,e,t){const s={...I1(),[e]:t};return new fl("auth","Firebase",s).create(e,{appName:r.name})}function Mr(r){return Uf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function A1(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&kn(r,"argument-error"),Uf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ff(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return W_.create(r,...e)}function Ee(r,e,...t){if(!r)throw Ff(e,...t)}function Vr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Ju(e),new Error(e)}function Fr(r,e){r||Vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(){return typeof self<"u"&&self.location?.href||""}function x1(){return ty()==="http:"||ty()==="https:"}function ty(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(x1()||nT()||"connection"in navigator)?navigator.onLine:!0}function C1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,t){this.shortDelay=e,this.longDelay=t,Fr(t>e,"Short delay should be less than long delay!"),this.isMobile=ZE()||rT()}get(){return R1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(r,e){Fr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],N1=new ml(3e4,6e4);function Os(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function qr(r,e,t,s,o={}){return G_(r,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const f=pl({key:r.config.apiKey,...h}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...l};return tT()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&Lo(r.emulatorConfig.host)&&(y.credentials="include"),K_.fetch()(await Q_(r,r.config.apiHost,t,f),y)})}async function G_(r,e,t){r._canInitEmulator=!1;const s={...k1,...e};try{const o=new D1(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw qu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[g,y]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw qu(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw qu(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw qu(r,"user-disabled",h);const w=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Uf(r,w,y);kn(r,w)}}catch(o){if(o instanceof $r)throw o;kn(r,"network-request-failed",{message:String(o)})}}async function gl(r,e,t,s,o={}){const l=await qr(r,e,t,s,o);return"mfaPendingCredential"in l&&kn(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function Q_(r,e,t,s){const o=`${e}${t}?${s}`,l=r,h=l.config.emulator?zf(r.config,o):`${r.config.apiScheme}://${o}`;return P1.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function b1(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class D1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Kn(this.auth,"network-request-failed")),N1.get())})}}function qu(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Kn(r,e,s);return o.customData._tokenResponse=t,o}function ny(r){return r!==void 0&&r.enterprise!==void 0}class O1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return b1(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function V1(r,e){return qr(r,"GET","/v2/recaptchaConfig",Os(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L1(r,e){return qr(r,"POST","/v1/accounts:delete",e)}async function pc(r,e){return qr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function M1(r,e=!1){const t=ln(r),s=await t.getIdToken(e),o=Bf(s);Ee(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l?.sign_in_provider;return{claims:o,token:s,authTime:Qa(Fd(o.auth_time)),issuedAtTime:Qa(Fd(o.iat)),expirationTime:Qa(Fd(o.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Fd(r){return Number(r)*1e3}function Bf(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Ju("JWT malformed, contained fewer than 3 sections"),null;try{const o=D_(t);return o?JSON.parse(o):(Ju("Failed to decode base64 JWT payload"),null)}catch(o){return Ju("Caught error parsing JWT payload as JSON",o?.toString()),null}}function ry(r){const e=Bf(r);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof $r&&j1(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function j1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qa(this.lastLoginAt),this.creationTime=Qa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(r){const e=r.auth,t=await r.getIdToken(),s=await ko(r,pc(e,{idToken:t}));Ee(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const l=o.providerUserInfo?.length?Y_(o.providerUserInfo):[],h=z1(r.providerData,l),f=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!h?.length,y=f?g:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new af(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,w)}async function F1(r){const e=ln(r);await mc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function z1(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Y_(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B1(r,e){const t=await G_(r,{},async()=>{const s=pl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await Q_(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return r.emulatorConfig&&Lo(r.emulatorConfig.host)&&(g.credentials="include"),K_.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function $1(r,e){return qr(r,"POST","/v2/accounts:revokeToken",Os(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ry(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const t=ry(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await B1(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,h=new So;return s&&(Ee(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Ee(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ee(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new So,this.toJSON())}_performRefresh(){return Vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(r,e){Ee(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Hn{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new U1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new af(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await ko(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return M1(this,e)}reload(){return F1(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Hn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await mc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gn(this.auth.app))return Promise.reject(Mr(this.auth));const e=await this.getIdToken();return await ko(this,L1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:I,emailVerified:R,isAnonymous:M,providerData:j,stsTokenManager:U}=t;Ee(I&&U,e,"internal-error");const k=So.fromJSON(this.name,U);Ee(typeof I=="string",e,"internal-error"),gs(s,e.name),gs(o,e.name),Ee(typeof R=="boolean",e,"internal-error"),Ee(typeof M=="boolean",e,"internal-error"),gs(l,e.name),gs(h,e.name),gs(f,e.name),gs(g,e.name),gs(y,e.name),gs(w,e.name);const W=new Hn({uid:I,auth:e,email:o,emailVerified:R,displayName:s,isAnonymous:M,photoURL:h,phoneNumber:l,tenantId:f,stsTokenManager:k,createdAt:y,lastLoginAt:w});return j&&Array.isArray(j)&&(W.providerData=j.map(K=>({...K}))),g&&(W._redirectEventId=g),W}static async _fromIdTokenResponse(e,t,s=!1){const o=new So;o.updateFromServerResponse(t);const l=new Hn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await mc(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Ee(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Y_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!l?.length,f=new So;f.updateFromIdToken(s);const g=new Hn({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new af(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy=new Map;function Lr(r){Fr(r instanceof Function,"Expected a class definition");let e=sy.get(r);return e?(Fr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,sy.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}J_.type="NONE";const iy=J_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(r,e,t){return`firebase:${r}:${e}:${t}`}class Ao{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Xu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Xu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await pc(this.auth,{idToken:e}).catch(()=>{});return t?Hn._fromGetAccountInfoResponse(this.auth,t,e):null}return Hn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Ao(Lr(iy),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Lr(iy);const h=Xu(s,e.config.apiKey,e.name);let f=null;for(const y of t)try{const w=await y._get(h);if(w){let I;if(typeof w=="string"){const R=await pc(e,{idToken:w}).catch(()=>{});if(!R)break;I=await Hn._fromGetAccountInfoResponse(e,R,w)}else I=Hn._fromJSON(e,w);y!==l&&(f=I),l=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Ao(l,e,s):(l=g[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new Ao(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(X_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rv(e))return"Blackberry";if(sv(e))return"Webos";if(Z_(e))return"Safari";if((e.includes("chrome/")||ev(e))&&!e.includes("edge/"))return"Chrome";if(nv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function X_(r=Ht()){return/firefox\//i.test(r)}function Z_(r=Ht()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ev(r=Ht()){return/crios\//i.test(r)}function tv(r=Ht()){return/iemobile/i.test(r)}function nv(r=Ht()){return/android/i.test(r)}function rv(r=Ht()){return/blackberry/i.test(r)}function sv(r=Ht()){return/webos/i.test(r)}function $f(r=Ht()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function q1(r=Ht()){return $f(r)&&!!window.navigator?.standalone}function H1(){return sT()&&document.documentMode===10}function iv(r=Ht()){return $f(r)||nv(r)||sv(r)||rv(r)||/windows phone/i.test(r)||tv(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(r,e=[]){let t;switch(r){case"Browser":t=oy(Ht());break;case"Worker":t=`${oy(Ht())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Mo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,f)=>{try{const g=e(l);h(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K1(r,e={}){return qr(r,"GET","/v2/passwordPolicy",Os(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=6;class Q1{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??G1,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ay(this),this.idTokenSubscription=new ay(this),this.beforeStateQueue=new W1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=W_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Lr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ao.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await pc(this,{idToken:e}),s=await Hn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(gn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,h=s?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===h)&&f?.user&&(s=f.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await mc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=C1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gn(this.app))return Promise.reject(Mr(this));const t=e?ln(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gn(this.app)?Promise.reject(Mr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gn(this.app)?Promise.reject(Mr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await K1(this),t=new Q1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await $1(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Lr(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=await Ao.create(this,[Lr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ov(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&S1(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Vs(r){return ln(r)}class ay{constructor(e){this.auth=e,this.observer=null,this.addObserver=dT(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function J1(r){Lc=r}function av(r){return Lc.loadJS(r)}function X1(){return Lc.recaptchaEnterpriseScript}function Z1(){return Lc.gapiScript}function eI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class tI{constructor(){this.enterprise=new nI}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class nI{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const rI="recaptcha-enterprise",lv="NO_RECAPTCHA";class sI{constructor(e){this.type=rI,this.auth=Vs(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,f)=>{V1(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const y=new O1(g);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,h(y.siteKey)}}).catch(g=>{f(g)})})}function o(l,h,f){const g=window.grecaptcha;ny(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(y=>{h(y)}).catch(()=>{h(lv)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new tI().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{s(this.auth).then(f=>{if(!t&&ny(window.grecaptcha))o(f,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=X1();g.length!==0&&(g+=f),av(g).then(()=>{o(f,l,h)}).catch(y=>{h(y)})}}).catch(f=>{h(f)})})}}async function ly(r,e,t,s=!1,o=!1){const l=new sI(r);let h;if(o)h=lv;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const g=f.phoneEnrollmentInfo.phoneNumber,y=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const g=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:h}):Object.assign(f,{captchaResponse:h}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function lf(r,e,t,s,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await ly(r,e,t,t==="getOobCode");return s(r,l)}else return s(r,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await ly(r,e,t,t==="getOobCode");return s(r,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(r,e){const t=jf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(gi(l,e??{}))return o;kn(o,"already-initialized")}return t.initialize({options:e})}function oI(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Lr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function aI(r,e,t){const s=Vs(r);Ee(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=uv(e),{host:h,port:f}=lI(e),g=f===null?"":`:${f}`,y={url:`${l}//${h}${g}/`},w=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ee(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ee(gi(y,s.config.emulator)&&gi(w,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=w,s.settings.appVerificationDisabledForTesting=!0,Lo(h)?(M_(`${l}//${h}${g}`),j_("Auth",!0)):uI()}function uv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function lI(r){const e=uv(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:uy(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:uy(h)}}}function uy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function uI(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vr("not implemented")}_getIdTokenResponse(e){return Vr("not implemented")}_linkToIdToken(e,t){return Vr("not implemented")}_getReauthenticationResolver(e){return Vr("not implemented")}}async function cI(r,e){return qr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hI(r,e){return gl(r,"POST","/v1/accounts:signInWithPassword",Os(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dI(r,e){return gl(r,"POST","/v1/accounts:signInWithEmailLink",Os(r,e))}async function fI(r,e){return gl(r,"POST","/v1/accounts:signInWithEmailLink",Os(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl extends qf{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new nl(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new nl(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lf(e,t,"signInWithPassword",hI);case"emailLink":return dI(e,{email:this._email,oobCode:this._password});default:kn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lf(e,s,"signUpPassword",cI);case"emailLink":return fI(e,{idToken:t,email:this._email,oobCode:this._password});default:kn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(r,e){return gl(r,"POST","/v1/accounts:signInWithIdp",Os(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI="http://localhost";class _i extends qf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new _i(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):kn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const h=new _i(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return xo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,xo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xo(e,t)}buildRequest(){const e={requestUri:pI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gI(r){const e=Ba($a(r)).link,t=e?Ba($a(e)).deep_link_id:null,s=Ba($a(r)).deep_link_id;return(s?Ba($a(s)).link:null)||s||t||e||r}class Hf{constructor(e){const t=Ba($a(e)),s=t.apiKey??null,o=t.oobCode??null,l=mI(t.mode??null);Ee(s&&o&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=gI(e);try{return new Hf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){this.providerId=jo.PROVIDER_ID}static credential(e,t){return nl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Hf.parseLink(t);return Ee(s,"argument-error"),nl._fromEmailAndCode(e,s.code,s.tenantId)}}jo.PROVIDER_ID="password";jo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";jo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl extends Wf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends yl{constructor(){super("facebook.com")}static credential(e){return _i._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ys.credential(e.oauthAccessToken)}catch{return null}}}ys.FACEBOOK_SIGN_IN_METHOD="facebook.com";ys.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends yl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return _i._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Or.credential(t,s)}catch{return null}}}Or.GOOGLE_SIGN_IN_METHOD="google.com";Or.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends yl{constructor(){super("github.com")}static credential(e){return _i._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _s.credential(e.oauthAccessToken)}catch{return null}}}_s.GITHUB_SIGN_IN_METHOD="github.com";_s.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends yl{constructor(){super("twitter.com")}static credential(e,t){return _i._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return vs.credential(t,s)}catch{return null}}}vs.TWITTER_SIGN_IN_METHOD="twitter.com";vs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yI(r,e){return gl(r,"POST","/v1/accounts:signUp",Os(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Hn._fromIdTokenResponse(e,s,o),h=cy(s);return new vi({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=cy(s);return new vi({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function cy(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends $r{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,gc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new gc(e,t,s,o)}}function cv(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?gc._fromErrorAndOperation(r,l,e,s):l})}async function _I(r,e,t=!1){const s=await ko(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return vi._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vI(r,e,t=!1){const{auth:s}=r;if(gn(s.app))return Promise.reject(Mr(s));const o="reauthenticate";try{const l=await ko(r,cv(s,o,e,r),t);Ee(l.idToken,s,"internal-error");const h=Bf(l.idToken);Ee(h,s,"internal-error");const{sub:f}=h;return Ee(r.uid===f,s,"user-mismatch"),vi._forOperation(r,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&kn(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hv(r,e,t=!1){if(gn(r.app))return Promise.reject(Mr(r));const s="signIn",o=await cv(r,s,e),l=await vi._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}async function wI(r,e){return hv(Vs(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dv(r){const e=Vs(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function EI(r,e,t){if(gn(r.app))return Promise.reject(Mr(r));const s=Vs(r),h=await lf(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yI).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&dv(r),g}),f=await vi._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(f.user),f}function TI(r,e,t){return gn(r.app)?Promise.reject(Mr(r)):wI(ln(r),jo.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&dv(r),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function II(r,e){return qr(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SI(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=ln(r),l={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},h=await ko(s,II(s.auth,l));s.displayName=h.displayName||null,s.photoURL=h.photoUrl||null;const f=s.providerData.find(({providerId:g})=>g==="password");f&&(f.displayName=s.displayName,f.photoURL=s.photoURL),await s._updateTokensIfNecessary(h)}function AI(r,e,t,s){return ln(r).onIdTokenChanged(e,t,s)}function xI(r,e,t){return ln(r).beforeAuthStateChanged(e,t)}function RI(r,e,t,s){return ln(r).onAuthStateChanged(e,t,s)}function CI(r){return ln(r).signOut()}const yc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yc,"1"),this.storage.removeItem(yc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=1e3,PI=10;class pv extends fv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,g)=>{this.notifyListeners(h,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);H1()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,PI):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},kI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}pv.type="LOCAL";const NI=pv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv extends fv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}mv.type="SESSION";const gv=mv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Mc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),g=await bI(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,g)=>{const y=Kf("",20);o.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(I){const R=I;if(R.data.eventId===y)switch(R.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(R.data.response);break;default:clearTimeout(w),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(){return window}function OI(r){lr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(){return typeof lr().WorkerGlobalScope<"u"&&typeof lr().importScripts=="function"}async function VI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LI(){return navigator?.serviceWorker?.controller||null}function MI(){return yv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="firebaseLocalStorageDb",jI=1,_c="firebaseLocalStorage",vv="fbase_key";class _l{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function jc(r,e){return r.transaction([_c],e?"readwrite":"readonly").objectStore(_c)}function UI(){const r=indexedDB.deleteDatabase(_v);return new _l(r).toPromise()}function uf(){const r=indexedDB.open(_v,jI);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(_c,{keyPath:vv})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(_c)?e(s):(s.close(),await UI(),e(await uf()))})})}async function hy(r,e,t){const s=jc(r,!0).put({[vv]:e,value:t});return new _l(s).toPromise()}async function FI(r,e){const t=jc(r,!1).get(e),s=await new _l(t).toPromise();return s===void 0?null:s.value}function dy(r,e){const t=jc(r,!0).delete(e);return new _l(t).toPromise()}const zI=800,BI=3;class wv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await uf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>BI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mc._getInstance(MI()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await VI(),!this.activeServiceWorker)return;this.sender=new DI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||LI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await uf();return await hy(e,yc,"1"),await dy(e,yc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>hy(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>FI(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>dy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=jc(o,!1).getAll();return new _l(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wv.type="LOCAL";const $I=wv;new ml(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(r,e){return e?Lr(e):(Ee(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf extends qf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function qI(r){return hv(r.auth,new Gf(r),r.bypassAuthState)}function HI(r){const{auth:e,user:t}=r;return Ee(t,e,"internal-error"),vI(t,new Gf(r),r.bypassAuthState)}async function WI(r){const{auth:e,user:t}=r;return Ee(t,e,"internal-error"),_I(t,new Gf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qI;case"linkViaPopup":case"linkViaRedirect":return WI;case"reauthViaPopup":case"reauthViaRedirect":return HI;default:kn(this.auth,"internal-error")}}resolve(e){Fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=new ml(2e3,1e4);async function GI(r,e,t){if(gn(r.app))return Promise.reject(Kn(r,"operation-not-supported-in-this-environment"));const s=Vs(r);A1(r,e,Wf);const o=Ev(s,t);return new hi(s,"signInViaPopup",e,o).executeNotNull()}class hi extends Tv{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,hi.currentPopupAction&&hi.currentPopupAction.cancel(),hi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){Fr(this.filter.length===1,"Popup operations only handle one event");const e=Kf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hi.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KI.get())};e()}}hi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="pendingRedirect",Zu=new Map;class YI extends Tv{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Zu.get(this.auth._key());if(!e){try{const s=await JI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Zu.set(this.auth._key(),e)}return this.bypassAuthState||Zu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JI(r,e){const t=eS(e),s=ZI(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function XI(r,e){Zu.set(r._key(),e)}function ZI(r){return Lr(r._redirectPersistence)}function eS(r){return Xu(QI,r.config.apiKey,r.name)}async function tS(r,e,t=!1){if(gn(r.app))return Promise.reject(Mr(r));const s=Vs(r),o=Ev(s,e),h=await new YI(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=600*1e3;class rS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Iv(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Kn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nS&&this.cachedEventUids.clear(),this.cachedEventUids.has(fy(e))}saveEventToCache(e){this.cachedEventUids.add(fy(e)),this.lastProcessedEventTime=Date.now()}}function fy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Iv({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function sS(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Iv(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iS(r,e={}){return qr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aS=/^https?/;async function lS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await iS(r);for(const t of e)try{if(uS(t))return}catch{}kn(r,"unauthorized-domain")}function uS(r){const e=of(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!aS.test(t))return!1;if(oS.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=new ml(3e4,6e4);function py(){const r=lr().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function hS(r){return new Promise((e,t)=>{function s(){py(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{py(),t(Kn(r,"network-request-failed"))},timeout:cS.get()})}if(lr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(lr().gapi?.load)s();else{const o=eI("iframefcb");return lr()[o]=()=>{gapi.load?s():t(Kn(r,"network-request-failed"))},av(`${Z1()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw ec=null,e})}let ec=null;function dS(r){return ec=ec||hS(r),ec}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=new ml(5e3,15e3),pS="__/auth/iframe",mS="emulator/auth/iframe",gS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _S(r){const e=r.config;Ee(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?zf(e,mS):`https://${r.config.authDomain}/${pS}`,s={apiKey:e.apiKey,appName:r.name,v:Mo},o=yS.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${pl(s).slice(1)}`}async function vS(r){const e=await dS(r),t=lr().gapi;return Ee(t,r,"internal-error"),e.open({where:document.body,url:_S(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gS,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=Kn(r,"network-request-failed"),f=lr().setTimeout(()=>{l(h)},fS.get());function g(){lr().clearTimeout(f),o(s)}s.ping(g).then(g,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ES=500,TS=600,IS="_blank",SS="http://localhost";class my{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function AS(r,e,t,s=ES,o=TS){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g={...wS,width:s.toString(),height:o.toString(),top:l,left:h},y=Ht().toLowerCase();t&&(f=ev(y)?IS:t),X_(y)&&(e=e||SS,g.scrollbars="yes");const w=Object.entries(g).reduce((R,[M,j])=>`${R}${M}=${j},`,"");if(q1(y)&&f!=="_self")return xS(e||"",f),new my(null);const I=window.open(e||"",f,w);Ee(I,r,"popup-blocked");try{I.focus()}catch{}return new my(I)}function xS(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="__/auth/handler",CS="emulator/auth/handler",kS=encodeURIComponent("fac");async function gy(r,e,t,s,o,l){Ee(r.config.authDomain,r,"auth-domain-config-required"),Ee(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Mo,eventId:o};if(e instanceof Wf){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",hT(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,I]of Object.entries({}))h[w]=I}if(e instanceof yl){const w=e.getScopes().filter(I=>I!=="");w.length>0&&(h.scopes=w.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const g=await r._getAppCheckToken(),y=g?`#${kS}=${encodeURIComponent(g)}`:"";return`${PS(r)}?${pl(f).slice(1)}${y}`}function PS({config:r}){return r.emulator?zf(r,CS):`https://${r.authDomain}/${RS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="webStorageSupport";class NS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gv,this._completeRedirectFn=tS,this._overrideRedirectResult=XI}async _openPopup(e,t,s,o){Fr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await gy(e,t,s,of(),o);return AS(e,l,Kf())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await gy(e,t,s,of(),o);return OI(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Fr(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await vS(e),s=new rS(e);return t.register("authEvent",o=>(Ee(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(zd,{type:zd},o=>{const l=o?.[0]?.[zd];l!==void 0&&t(!!l),kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=lS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return iv()||Z_()||$f()}}const bS=NS;var yy="@firebase/auth",_y="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VS(r){Co(new yi("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=s.options;Ee(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ov(r)},y=new Y1(s,o,l,g);return oI(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Co(new yi("auth-internal",e=>{const t=Vs(e.getProvider("auth").getImmediate());return(s=>new DS(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),As(yy,_y,OS(r)),As(yy,_y,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS=300,MS=L_("authIdTokenMaxAge")||LS;let vy=null;const jS=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>MS)return;const o=t?.token;vy!==o&&(vy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function US(r=B_()){const e=jf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=iI(r,{popupRedirectResolver:bS,persistence:[$I,NI,gv]}),s=L_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=jS(l.toString());xI(t,h,()=>h(t.currentUser)),AI(t,f=>h(f))}}const o=O_("auth");return o&&aI(t,`http://${o}`),t}function FS(){return document.getElementsByTagName("head")?.[0]??document}J1({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=Kn("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",FS().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VS("Browser");var wy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xs,Sv;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,S){function x(){}x.prototype=S.prototype,P.D=S.prototype,P.prototype=new x,P.prototype.constructor=P,P.C=function(N,O,L){for(var C=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)C[Qe-2]=arguments[Qe];return S.prototype[O].apply(N,C)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,S,x){x||(x=0);var N=Array(16);if(typeof S=="string")for(var O=0;16>O;++O)N[O]=S.charCodeAt(x++)|S.charCodeAt(x++)<<8|S.charCodeAt(x++)<<16|S.charCodeAt(x++)<<24;else for(O=0;16>O;++O)N[O]=S[x++]|S[x++]<<8|S[x++]<<16|S[x++]<<24;S=P.g[0],x=P.g[1],O=P.g[2];var L=P.g[3],C=S+(L^x&(O^L))+N[0]+3614090360&4294967295;S=x+(C<<7&4294967295|C>>>25),C=L+(O^S&(x^O))+N[1]+3905402710&4294967295,L=S+(C<<12&4294967295|C>>>20),C=O+(x^L&(S^x))+N[2]+606105819&4294967295,O=L+(C<<17&4294967295|C>>>15),C=x+(S^O&(L^S))+N[3]+3250441966&4294967295,x=O+(C<<22&4294967295|C>>>10),C=S+(L^x&(O^L))+N[4]+4118548399&4294967295,S=x+(C<<7&4294967295|C>>>25),C=L+(O^S&(x^O))+N[5]+1200080426&4294967295,L=S+(C<<12&4294967295|C>>>20),C=O+(x^L&(S^x))+N[6]+2821735955&4294967295,O=L+(C<<17&4294967295|C>>>15),C=x+(S^O&(L^S))+N[7]+4249261313&4294967295,x=O+(C<<22&4294967295|C>>>10),C=S+(L^x&(O^L))+N[8]+1770035416&4294967295,S=x+(C<<7&4294967295|C>>>25),C=L+(O^S&(x^O))+N[9]+2336552879&4294967295,L=S+(C<<12&4294967295|C>>>20),C=O+(x^L&(S^x))+N[10]+4294925233&4294967295,O=L+(C<<17&4294967295|C>>>15),C=x+(S^O&(L^S))+N[11]+2304563134&4294967295,x=O+(C<<22&4294967295|C>>>10),C=S+(L^x&(O^L))+N[12]+1804603682&4294967295,S=x+(C<<7&4294967295|C>>>25),C=L+(O^S&(x^O))+N[13]+4254626195&4294967295,L=S+(C<<12&4294967295|C>>>20),C=O+(x^L&(S^x))+N[14]+2792965006&4294967295,O=L+(C<<17&4294967295|C>>>15),C=x+(S^O&(L^S))+N[15]+1236535329&4294967295,x=O+(C<<22&4294967295|C>>>10),C=S+(O^L&(x^O))+N[1]+4129170786&4294967295,S=x+(C<<5&4294967295|C>>>27),C=L+(x^O&(S^x))+N[6]+3225465664&4294967295,L=S+(C<<9&4294967295|C>>>23),C=O+(S^x&(L^S))+N[11]+643717713&4294967295,O=L+(C<<14&4294967295|C>>>18),C=x+(L^S&(O^L))+N[0]+3921069994&4294967295,x=O+(C<<20&4294967295|C>>>12),C=S+(O^L&(x^O))+N[5]+3593408605&4294967295,S=x+(C<<5&4294967295|C>>>27),C=L+(x^O&(S^x))+N[10]+38016083&4294967295,L=S+(C<<9&4294967295|C>>>23),C=O+(S^x&(L^S))+N[15]+3634488961&4294967295,O=L+(C<<14&4294967295|C>>>18),C=x+(L^S&(O^L))+N[4]+3889429448&4294967295,x=O+(C<<20&4294967295|C>>>12),C=S+(O^L&(x^O))+N[9]+568446438&4294967295,S=x+(C<<5&4294967295|C>>>27),C=L+(x^O&(S^x))+N[14]+3275163606&4294967295,L=S+(C<<9&4294967295|C>>>23),C=O+(S^x&(L^S))+N[3]+4107603335&4294967295,O=L+(C<<14&4294967295|C>>>18),C=x+(L^S&(O^L))+N[8]+1163531501&4294967295,x=O+(C<<20&4294967295|C>>>12),C=S+(O^L&(x^O))+N[13]+2850285829&4294967295,S=x+(C<<5&4294967295|C>>>27),C=L+(x^O&(S^x))+N[2]+4243563512&4294967295,L=S+(C<<9&4294967295|C>>>23),C=O+(S^x&(L^S))+N[7]+1735328473&4294967295,O=L+(C<<14&4294967295|C>>>18),C=x+(L^S&(O^L))+N[12]+2368359562&4294967295,x=O+(C<<20&4294967295|C>>>12),C=S+(x^O^L)+N[5]+4294588738&4294967295,S=x+(C<<4&4294967295|C>>>28),C=L+(S^x^O)+N[8]+2272392833&4294967295,L=S+(C<<11&4294967295|C>>>21),C=O+(L^S^x)+N[11]+1839030562&4294967295,O=L+(C<<16&4294967295|C>>>16),C=x+(O^L^S)+N[14]+4259657740&4294967295,x=O+(C<<23&4294967295|C>>>9),C=S+(x^O^L)+N[1]+2763975236&4294967295,S=x+(C<<4&4294967295|C>>>28),C=L+(S^x^O)+N[4]+1272893353&4294967295,L=S+(C<<11&4294967295|C>>>21),C=O+(L^S^x)+N[7]+4139469664&4294967295,O=L+(C<<16&4294967295|C>>>16),C=x+(O^L^S)+N[10]+3200236656&4294967295,x=O+(C<<23&4294967295|C>>>9),C=S+(x^O^L)+N[13]+681279174&4294967295,S=x+(C<<4&4294967295|C>>>28),C=L+(S^x^O)+N[0]+3936430074&4294967295,L=S+(C<<11&4294967295|C>>>21),C=O+(L^S^x)+N[3]+3572445317&4294967295,O=L+(C<<16&4294967295|C>>>16),C=x+(O^L^S)+N[6]+76029189&4294967295,x=O+(C<<23&4294967295|C>>>9),C=S+(x^O^L)+N[9]+3654602809&4294967295,S=x+(C<<4&4294967295|C>>>28),C=L+(S^x^O)+N[12]+3873151461&4294967295,L=S+(C<<11&4294967295|C>>>21),C=O+(L^S^x)+N[15]+530742520&4294967295,O=L+(C<<16&4294967295|C>>>16),C=x+(O^L^S)+N[2]+3299628645&4294967295,x=O+(C<<23&4294967295|C>>>9),C=S+(O^(x|~L))+N[0]+4096336452&4294967295,S=x+(C<<6&4294967295|C>>>26),C=L+(x^(S|~O))+N[7]+1126891415&4294967295,L=S+(C<<10&4294967295|C>>>22),C=O+(S^(L|~x))+N[14]+2878612391&4294967295,O=L+(C<<15&4294967295|C>>>17),C=x+(L^(O|~S))+N[5]+4237533241&4294967295,x=O+(C<<21&4294967295|C>>>11),C=S+(O^(x|~L))+N[12]+1700485571&4294967295,S=x+(C<<6&4294967295|C>>>26),C=L+(x^(S|~O))+N[3]+2399980690&4294967295,L=S+(C<<10&4294967295|C>>>22),C=O+(S^(L|~x))+N[10]+4293915773&4294967295,O=L+(C<<15&4294967295|C>>>17),C=x+(L^(O|~S))+N[1]+2240044497&4294967295,x=O+(C<<21&4294967295|C>>>11),C=S+(O^(x|~L))+N[8]+1873313359&4294967295,S=x+(C<<6&4294967295|C>>>26),C=L+(x^(S|~O))+N[15]+4264355552&4294967295,L=S+(C<<10&4294967295|C>>>22),C=O+(S^(L|~x))+N[6]+2734768916&4294967295,O=L+(C<<15&4294967295|C>>>17),C=x+(L^(O|~S))+N[13]+1309151649&4294967295,x=O+(C<<21&4294967295|C>>>11),C=S+(O^(x|~L))+N[4]+4149444226&4294967295,S=x+(C<<6&4294967295|C>>>26),C=L+(x^(S|~O))+N[11]+3174756917&4294967295,L=S+(C<<10&4294967295|C>>>22),C=O+(S^(L|~x))+N[2]+718787259&4294967295,O=L+(C<<15&4294967295|C>>>17),C=x+(L^(O|~S))+N[9]+3951481745&4294967295,P.g[0]=P.g[0]+S&4294967295,P.g[1]=P.g[1]+(O+(C<<21&4294967295|C>>>11))&4294967295,P.g[2]=P.g[2]+O&4294967295,P.g[3]=P.g[3]+L&4294967295}s.prototype.u=function(P,S){S===void 0&&(S=P.length);for(var x=S-this.blockSize,N=this.B,O=this.h,L=0;L<S;){if(O==0)for(;L<=x;)o(this,P,L),L+=this.blockSize;if(typeof P=="string"){for(;L<S;)if(N[O++]=P.charCodeAt(L++),O==this.blockSize){o(this,N),O=0;break}}else for(;L<S;)if(N[O++]=P[L++],O==this.blockSize){o(this,N),O=0;break}}this.h=O,this.o+=S},s.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var S=1;S<P.length-8;++S)P[S]=0;var x=8*this.o;for(S=P.length-8;S<P.length;++S)P[S]=x&255,x/=256;for(this.u(P),P=Array(16),S=x=0;4>S;++S)for(var N=0;32>N;N+=8)P[x++]=this.g[S]>>>N&255;return P};function l(P,S){var x=f;return Object.prototype.hasOwnProperty.call(x,P)?x[P]:x[P]=S(P)}function h(P,S){this.h=S;for(var x=[],N=!0,O=P.length-1;0<=O;O--){var L=P[O]|0;N&&L==S||(x[O]=L,N=!1)}this.g=x}var f={};function g(P){return-128<=P&&128>P?l(P,function(S){return new h([S|0],0>S?-1:0)}):new h([P|0],0>P?-1:0)}function y(P){if(isNaN(P)||!isFinite(P))return I;if(0>P)return k(y(-P));for(var S=[],x=1,N=0;P>=x;N++)S[N]=P/x|0,x*=4294967296;return new h(S,0)}function w(P,S){if(P.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(P.charAt(0)=="-")return k(w(P.substring(1),S));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=y(Math.pow(S,8)),N=I,O=0;O<P.length;O+=8){var L=Math.min(8,P.length-O),C=parseInt(P.substring(O,O+L),S);8>L?(L=y(Math.pow(S,L)),N=N.j(L).add(y(C))):(N=N.j(x),N=N.add(y(C)))}return N}var I=g(0),R=g(1),M=g(16777216);r=h.prototype,r.m=function(){if(U(this))return-k(this).m();for(var P=0,S=1,x=0;x<this.g.length;x++){var N=this.i(x);P+=(0<=N?N:4294967296+N)*S,S*=4294967296}return P},r.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(j(this))return"0";if(U(this))return"-"+k(this).toString(P);for(var S=y(Math.pow(P,6)),x=this,N="";;){var O=ne(x,S).g;x=W(x,O.j(S));var L=((0<x.g.length?x.g[0]:x.h)>>>0).toString(P);if(x=O,j(x))return L+N;for(;6>L.length;)L="0"+L;N=L+N}},r.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function j(P){if(P.h!=0)return!1;for(var S=0;S<P.g.length;S++)if(P.g[S]!=0)return!1;return!0}function U(P){return P.h==-1}r.l=function(P){return P=W(this,P),U(P)?-1:j(P)?0:1};function k(P){for(var S=P.g.length,x=[],N=0;N<S;N++)x[N]=~P.g[N];return new h(x,~P.h).add(R)}r.abs=function(){return U(this)?k(this):this},r.add=function(P){for(var S=Math.max(this.g.length,P.g.length),x=[],N=0,O=0;O<=S;O++){var L=N+(this.i(O)&65535)+(P.i(O)&65535),C=(L>>>16)+(this.i(O)>>>16)+(P.i(O)>>>16);N=C>>>16,L&=65535,C&=65535,x[O]=C<<16|L}return new h(x,x[x.length-1]&-2147483648?-1:0)};function W(P,S){return P.add(k(S))}r.j=function(P){if(j(this)||j(P))return I;if(U(this))return U(P)?k(this).j(k(P)):k(k(this).j(P));if(U(P))return k(this.j(k(P)));if(0>this.l(M)&&0>P.l(M))return y(this.m()*P.m());for(var S=this.g.length+P.g.length,x=[],N=0;N<2*S;N++)x[N]=0;for(N=0;N<this.g.length;N++)for(var O=0;O<P.g.length;O++){var L=this.i(N)>>>16,C=this.i(N)&65535,Qe=P.i(O)>>>16,Le=P.i(O)&65535;x[2*N+2*O]+=C*Le,K(x,2*N+2*O),x[2*N+2*O+1]+=L*Le,K(x,2*N+2*O+1),x[2*N+2*O+1]+=C*Qe,K(x,2*N+2*O+1),x[2*N+2*O+2]+=L*Qe,K(x,2*N+2*O+2)}for(N=0;N<S;N++)x[N]=x[2*N+1]<<16|x[2*N];for(N=S;N<2*S;N++)x[N]=0;return new h(x,0)};function K(P,S){for(;(P[S]&65535)!=P[S];)P[S+1]+=P[S]>>>16,P[S]&=65535,S++}function te(P,S){this.g=P,this.h=S}function ne(P,S){if(j(S))throw Error("division by zero");if(j(P))return new te(I,I);if(U(P))return S=ne(k(P),S),new te(k(S.g),k(S.h));if(U(S))return S=ne(P,k(S)),new te(k(S.g),S.h);if(30<P.g.length){if(U(P)||U(S))throw Error("slowDivide_ only works with positive integers.");for(var x=R,N=S;0>=N.l(P);)x=ue(x),N=ue(N);var O=ge(x,1),L=ge(N,1);for(N=ge(N,2),x=ge(x,2);!j(N);){var C=L.add(N);0>=C.l(P)&&(O=O.add(x),L=C),N=ge(N,1),x=ge(x,1)}return S=W(P,O.j(S)),new te(O,S)}for(O=I;0<=P.l(S);){for(x=Math.max(1,Math.floor(P.m()/S.m())),N=Math.ceil(Math.log(x)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),L=y(x),C=L.j(S);U(C)||0<C.l(P);)x-=N,L=y(x),C=L.j(S);j(L)&&(L=R),O=O.add(L),P=W(P,C)}return new te(O,P)}r.A=function(P){return ne(this,P).h},r.and=function(P){for(var S=Math.max(this.g.length,P.g.length),x=[],N=0;N<S;N++)x[N]=this.i(N)&P.i(N);return new h(x,this.h&P.h)},r.or=function(P){for(var S=Math.max(this.g.length,P.g.length),x=[],N=0;N<S;N++)x[N]=this.i(N)|P.i(N);return new h(x,this.h|P.h)},r.xor=function(P){for(var S=Math.max(this.g.length,P.g.length),x=[],N=0;N<S;N++)x[N]=this.i(N)^P.i(N);return new h(x,this.h^P.h)};function ue(P){for(var S=P.g.length+1,x=[],N=0;N<S;N++)x[N]=P.i(N)<<1|P.i(N-1)>>>31;return new h(x,P.h)}function ge(P,S){var x=S>>5;S%=32;for(var N=P.g.length-x,O=[],L=0;L<N;L++)O[L]=0<S?P.i(L+x)>>>S|P.i(L+x+1)<<32-S:P.i(L+x);return new h(O,P.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Sv=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=w,xs=h}).apply(typeof wy<"u"?wy:typeof self<"u"?self:typeof window<"u"?window:{});var Hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Av,qa,xv,tc,cf,Rv,Cv,kv;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,_){return u==Array.prototype||u==Object.prototype||(u[p]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hu=="object"&&Hu];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,p){if(p)e:{var _=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var F=u[T];if(!(F in _))break e;_=_[F]}u=u[u.length-1],T=_[u],p=p(T),p!=T&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}function l(u,p){u instanceof String&&(u+="");var _=0,T=!1,F={next:function(){if(!T&&_<u.length){var q=_++;return{value:p(q,u[q]),done:!1}}return T=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}o("Array.prototype.values",function(u){return u||function(){return l(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},f=this||self;function g(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function y(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function w(u,p,_){return u.call.apply(u.bind,arguments)}function I(u,p,_){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,T),u.apply(p,F)}}return function(){return u.apply(p,arguments)}}function R(u,p,_){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:I,R.apply(null,arguments)}function M(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function j(u,p){function _(){}_.prototype=p.prototype,u.aa=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(T,F,q){for(var oe=Array(arguments.length-2),He=2;He<arguments.length;He++)oe[He-2]=arguments[He];return p.prototype[F].apply(T,oe)}}function U(u){const p=u.length;if(0<p){const _=Array(p);for(let T=0;T<p;T++)_[T]=u[T];return _}return[]}function k(u,p){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(g(T)){const F=u.length||0,q=T.length||0;u.length=F+q;for(let oe=0;oe<q;oe++)u[F+oe]=T[oe]}else u.push(T)}}class W{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function K(u){return/^[\s\xa0]*$/.test(u)}function te(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function ne(u){return ne[" "](u),u}ne[" "]=function(){};var ue=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function ge(u,p,_){for(const T in u)p.call(_,u[T],T,u)}function P(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function S(u){const p={};for(const _ in u)p[_]=u[_];return p}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(u,p){let _,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(_ in T)u[_]=T[_];for(let q=0;q<x.length;q++)_=x[q],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function O(u){var p=1;u=u.split(":");const _=[];for(;0<p&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function L(u){f.setTimeout(()=>{throw u},0)}function C(){var u=Y;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class Qe{constructor(){this.h=this.g=null}add(p,_){const T=Le.get();T.set(p,_),this.h?this.h.next=T:this.g=T,this.h=T}}var Le=new W(()=>new Pe,u=>u.reset());class Pe{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ne,ie=!1,Y=new Qe,re=()=>{const u=f.Promise.resolve(void 0);Ne=()=>{u.then(V)}};var V=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(_){L(_)}var p=Le;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}ie=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var Re=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};f.addEventListener("test",_,p),f.removeEventListener("test",_,p)}catch{}return u})();function Ce(u,p){if(ye.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(ue){e:{try{ne(p.nodeName);var F=!0;break e}catch{}F=!1}F||(p=null)}}else _=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement);this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Me[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ce.aa.h.call(this)}}j(Ce,ye);var Me={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),$e=0;function Ye(u,p,_,T,F){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!T,this.ha=F,this.key=++$e,this.da=this.fa=!1}function It(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function mr(u){this.src=u,this.g={},this.h=0}mr.prototype.add=function(u,p,_,T,F){var q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);var oe=Hr(u,p,T,F);return-1<oe?(p=u[oe],_||(p.fa=!1)):(p=new Ye(p,this.src,q,!!T,F),p.fa=_,u.push(p)),p};function Ri(u,p){var _=p.type;if(_ in u.g){var T=u.g[_],F=Array.prototype.indexOf.call(T,p,void 0),q;(q=0<=F)&&Array.prototype.splice.call(T,F,1),q&&(It(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Hr(u,p,_,T){for(var F=0;F<u.length;++F){var q=u[F];if(!q.da&&q.listener==p&&q.capture==!!_&&q.ha==T)return F}return-1}var Ls="closure_lm_"+(1e6*Math.random()|0),Ci={};function Ho(u,p,_,T,F){if(Array.isArray(p)){for(var q=0;q<p.length;q++)Ho(u,p[q],_,T,F);return null}return _=Go(_),u&&u[Be]?u.K(p,_,y(T)?!!T.capture:!1,F):Wo(u,p,_,!1,T,F)}function Wo(u,p,_,T,F,q){if(!p)throw Error("Invalid event type");var oe=y(F)?!!F.capture:!!F,He=Pi(u);if(He||(u[Ls]=He=new mr(u)),_=He.add(p,_,T,oe,q),_.proxy)return _;if(T=Cl(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)Re||(F=oe),F===void 0&&(F=!1),u.addEventListener(p.toString(),T,F);else if(u.attachEvent)u.attachEvent(yr(p.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Cl(){function u(_){return p.call(u.src,u.listener,_)}const p=Ko;return u}function ki(u,p,_,T,F){if(Array.isArray(p))for(var q=0;q<p.length;q++)ki(u,p[q],_,T,F);else T=y(T)?!!T.capture:!!T,_=Go(_),u&&u[Be]?(u=u.i,p=String(p).toString(),p in u.g&&(q=u.g[p],_=Hr(q,_,T,F),-1<_&&(It(q[_]),Array.prototype.splice.call(q,_,1),q.length==0&&(delete u.g[p],u.h--)))):u&&(u=Pi(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Hr(p,_,T,F)),(_=-1<u?p[u]:null)&&gr(_))}function gr(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Be])Ri(p.i,u);else{var _=u.type,T=u.proxy;p.removeEventListener?p.removeEventListener(_,T,u.capture):p.detachEvent?p.detachEvent(yr(_),T):p.addListener&&p.removeListener&&p.removeListener(T),(_=Pi(p))?(Ri(_,u),_.h==0&&(_.src=null,p[Ls]=null)):It(u)}}}function yr(u){return u in Ci?Ci[u]:Ci[u]="on"+u}function Ko(u,p){if(u.da)u=!0;else{p=new Ce(p,this);var _=u.listener,T=u.ha||u.src;u.fa&&gr(u),u=_.call(T,p)}return u}function Pi(u){return u=u[Ls],u instanceof mr?u:null}var Ni="__closure_events_fn_"+(1e9*Math.random()>>>0);function Go(u){return typeof u=="function"?u:(u[Ni]||(u[Ni]=function(p){return u.handleEvent(p)}),u[Ni])}function gt(){Q.call(this),this.i=new mr(this),this.M=this,this.F=null}j(gt,Q),gt.prototype[Be]=!0,gt.prototype.removeEventListener=function(u,p,_,T){ki(this,u,p,_,T)};function yt(u,p){var _,T=u.F;if(T)for(_=[];T;T=T.F)_.push(T);if(u=u.M,T=p.type||p,typeof p=="string")p=new ye(p,u);else if(p instanceof ye)p.target=p.target||u;else{var F=p;p=new ye(T,u),N(p,F)}if(F=!0,_)for(var q=_.length-1;0<=q;q--){var oe=p.g=_[q];F=_r(oe,T,!0,p)&&F}if(oe=p.g=u,F=_r(oe,T,!0,p)&&F,F=_r(oe,T,!1,p)&&F,_)for(q=0;q<_.length;q++)oe=p.g=_[q],F=_r(oe,T,!1,p)&&F}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var _=u.g[p],T=0;T<_.length;T++)It(_[T]);delete u.g[p],u.h--}}this.F=null},gt.prototype.K=function(u,p,_,T){return this.i.add(String(u),p,!1,_,T)},gt.prototype.L=function(u,p,_,T){return this.i.add(String(u),p,!0,_,T)};function _r(u,p,_,T){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var F=!0,q=0;q<p.length;++q){var oe=p[q];if(oe&&!oe.da&&oe.capture==_){var He=oe.listener,_t=oe.ha||oe.src;oe.fa&&Ri(u.i,oe),F=He.call(_t,T)!==!1&&F}}return F&&!T.defaultPrevented}function Qo(u,p,_){if(typeof u=="function")_&&(u=R(u,_));else if(u&&typeof u.handleEvent=="function")u=R(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:f.setTimeout(u,p||0)}function Wr(u){u.g=Qo(()=>{u.g=null,u.i&&(u.i=!1,Wr(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Ms extends Q{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Wr(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function js(u){Q.call(this),this.h=u,this.g={}}j(js,Q);var Yo=[];function Jo(u){ge(u.g,function(p,_){this.g.hasOwnProperty(_)&&gr(p)},u),u.g={}}js.prototype.N=function(){js.aa.N.call(this),Jo(this)},js.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xo=f.JSON.stringify,Zo=f.JSON.parse,ea=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Us(){}Us.prototype.h=null;function bi(u){return u.h||(u.h=u.i())}function Di(){}var yn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qn(){ye.call(this,"d")}j(Qn,ye);function Oi(){ye.call(this,"c")}j(Oi,ye);var Yn={},ta=null;function Fs(){return ta=ta||new gt}Yn.La="serverreachability";function na(u){ye.call(this,Yn.La,u)}j(na,ye);function vr(u){const p=Fs();yt(p,new na(p))}Yn.STAT_EVENT="statevent";function ra(u,p){ye.call(this,Yn.STAT_EVENT,u),this.stat=p}j(ra,ye);function ut(u){const p=Fs();yt(p,new ra(p,u))}Yn.Ma="timingevent";function Vi(u,p){ye.call(this,Yn.Ma,u),this.size=p}j(Vi,ye);function Pn(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},p)}function zs(){this.g=!0}zs.prototype.xa=function(){this.g=!1};function Bs(u,p,_,T,F,q){u.info(function(){if(u.g)if(q)for(var oe="",He=q.split("&"),_t=0;_t<He.length;_t++){var je=He[_t].split("=");if(1<je.length){var St=je[0];je=je[1];var dt=St.split("_");oe=2<=dt.length&&dt[1]=="type"?oe+(St+"="+je+"&"):oe+(St+"=redacted&")}}else oe=null;else oe=q;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+p+`
`+_+`
`+oe})}function Li(u,p,_,T,F,q,oe){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+p+`
`+_+`
`+q+" "+oe})}function Nn(u,p,_,T){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+sh(u,_)+(T?" "+T:"")})}function sa(u,p){u.info(function(){return"TIMEOUT: "+p})}zs.prototype.info=function(){};function sh(u,p){if(!u.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var T=_[u];if(!(2>T.length)){var F=T[1];if(Array.isArray(F)&&!(1>F.length)){var q=F[0];if(q!="noop"&&q!="stop"&&q!="close")for(var oe=1;oe<F.length;oe++)F[oe]=""}}}}return Xo(_)}catch{return p}}var Mi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bn;function $s(){}j($s,Us),$s.prototype.g=function(){return new XMLHttpRequest},$s.prototype.i=function(){return{}},bn=new $s;function Dn(u,p,_,T){this.j=u,this.i=p,this.l=_,this.R=T||1,this.U=new js(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pl}function Pl(){this.i=null,this.g="",this.h=!1}var ia={},ji={};function Ui(u,p,_){u.L=1,u.v=Jr(cn(p)),u.m=_,u.P=!0,oa(u,null)}function oa(u,p){u.F=Date.now(),Je(u),u.A=cn(u.v);var _=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Zr(_.i,"t",T),u.C=0,_=u.j.J,u.h=new Pl,u.g=Gl(u.j,_?p:null,!u.m),0<u.O&&(u.M=new Ms(R(u.Y,u,u.g),u.O)),p=u.U,_=u.g,T=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(Yo[0]=F.toString()),F=Yo);for(var q=0;q<F.length;q++){var oe=Ho(_,F[q],T||p.handleEvent,!1,p.h||p);if(!oe)break;p.g[oe.key]=oe}p=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),vr(),Bs(u.i,u.u,u.A,u.l,u.R,u.m)}Dn.prototype.ca=function(u){u=u.target;const p=this.M;p&&Jt(u)==3?p.j():this.Y(u)},Dn.prototype.Y=function(u){try{if(u==this.g)e:{const dt=Jt(this.g);var p=this.g.Ba();const wn=this.g.Z();if(!(3>dt)&&(dt!=3||this.g&&(this.h.h||this.g.oa()||da(this.g)))){this.J||dt!=4||p==7||(p==8||0>=wn?vr(3):vr(2)),qs(this);var _=this.g.Z();this.X=_;t:if(Nl(this)){var T=da(this.g);u="";var F=T.length,q=Jt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_n(this),Kr(this);var oe="";break t}this.h.i=new f.TextDecoder}for(p=0;p<F;p++)this.h.h=!0,u+=this.h.i.decode(T[p],{stream:!(q&&p==F-1)});T.length=0,this.h.g+=u,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=_==200,Li(this.i,this.u,this.A,this.l,this.R,dt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var He,_t=this.g;if((He=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(He)){var je=He;break t}}je=null}if(_=je)Nn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,aa(this,_);else{this.o=!1,this.s=3,ut(12),_n(this),Kr(this);break e}}if(this.P){_=!0;let dn;for(;!this.J&&this.C<oe.length;)if(dn=ih(this,oe),dn==ji){dt==4&&(this.s=4,ut(14),_=!1),Nn(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==ia){this.s=4,ut(15),Nn(this.i,this.l,oe,"[Invalid Chunk]"),_=!1;break}else Nn(this.i,this.l,dn,null),aa(this,dn);if(Nl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||oe.length!=0||this.h.h||(this.s=1,ut(16),_=!1),this.o=this.o&&_,!_)Nn(this.i,this.l,oe,"[Invalid Chunked Response]"),_n(this),Kr(this);else if(0<oe.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),pa(St),St.M=!0,ut(11))}}else Nn(this.i,this.l,oe,null),aa(this,oe);dt==4&&_n(this),this.o&&!this.J&&(dt==4?Yi(this.j,this):(this.o=!1,Je(this)))}else Hi(this.g),_==400&&0<oe.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),_n(this),Kr(this)}}}catch{}finally{}};function Nl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ih(u,p){var _=u.C,T=p.indexOf(`
`,_);return T==-1?ji:(_=Number(p.substring(_,T)),isNaN(_)?ia:(T+=1,T+_>p.length?ji:(p=p.slice(T,T+_),u.C=T+_,p)))}Dn.prototype.cancel=function(){this.J=!0,_n(this)};function Je(u){u.S=Date.now()+u.I,bl(u,u.I)}function bl(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Pn(R(u.ba,u),p)}function qs(u){u.B&&(f.clearTimeout(u.B),u.B=null)}Dn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(sa(this.i,this.A),this.L!=2&&(vr(),ut(17)),_n(this),this.s=2,Kr(this)):bl(this,this.S-u)};function Kr(u){u.j.G==0||u.J||Yi(u.j,u)}function _n(u){qs(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Jo(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function aa(u,p){try{var _=u.j;if(_.G!=0&&(_.g==u||Wt(_.h,u))){if(!u.K&&Wt(_.h,u)&&_.G==3){try{var T=_.Da.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)Qi(_),jn(_);else break e;Gi(_),ut(18)}}else _.za=F[1],0<_.za-_.T&&37500>F[2]&&_.F&&_.v==0&&!_.C&&(_.C=Pn(R(_.Za,_),6e3));if(1>=Ol(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Sr(_,11)}else if((u.K||_.g==u)&&Qi(_),!K(p))for(F=_.Da.g.parse(p),p=0;p<F.length;p++){let je=F[p];if(_.T=je[0],je=je[1],_.G==2)if(je[0]=="c"){_.K=je[1],_.ia=je[2];const St=je[3];St!=null&&(_.la=St,_.j.info("VER="+_.la));const dt=je[4];dt!=null&&(_.Aa=dt,_.j.info("SVER="+_.Aa));const wn=je[5];wn!=null&&typeof wn=="number"&&0<wn&&(T=1.5*wn,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const dn=u.g;if(dn){const Js=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Js){var q=T.h;q.g||Js.indexOf("spdy")==-1&&Js.indexOf("quic")==-1&&Js.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(la(q,q.h),q.h=null))}if(T.D){const Xi=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;Xi&&(T.ya=Xi,Ge(T.I,T.D,Xi))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var oe=u;if(T.qa=Kl(T,T.J?T.ia:null,T.W),oe.K){Vl(T.h,oe);var He=oe,_t=T.L;_t&&(He.I=_t),He.B&&(qs(He),Je(He)),T.g=oe}else Ys(T);0<_.i.length&&er(_)}else je[0]!="stop"&&je[0]!="close"||Sr(_,7);else _.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?Sr(_,7):Nt(_):je[0]!="noop"&&_.l&&_.l.ta(je),_.v=0)}}vr(4)}catch{}}var Dl=class{constructor(u,p){this.g=u,this.map=p}};function Hs(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function un(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ol(u){return u.h?1:u.g?u.g.size:0}function Wt(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function la(u,p){u.g?u.g.add(p):u.h=p}function Vl(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Hs.prototype.cancel=function(){if(this.i=Ll(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ll(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.D);return p}return U(u.i)}function Fi(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var p=[],_=u.length,T=0;T<_;T++)p.push(u[T]);return p}p=[],_=0;for(T in u)p[_++]=u[T];return p}function zi(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var p=[];u=u.length;for(var _=0;_<u;_++)p.push(_);return p}p=[],_=0;for(const T in u)p[_++]=T;return p}}}function Gr(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var _=zi(u),T=Fi(u),F=T.length,q=0;q<F;q++)p.call(void 0,T[q],_&&_[q],u)}var Ws=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oh(u,p){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var T=u[_].indexOf("="),F=null;if(0<=T){var q=u[_].substring(0,T);F=u[_].substring(T+1)}else q=u[_];p(q,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function wr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof wr){this.h=u.h,Ks(this,u.j),this.o=u.o,this.g=u.g,Qr(this,u.s),this.l=u.l;var p=u.i,_=new Jn;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),Yr(this,_),this.m=u.m}else u&&(p=String(u).match(Ws))?(this.h=!1,Ks(this,p[1]||"",!0),this.o=Ve(p[2]||""),this.g=Ve(p[3]||"",!0),Qr(this,p[4]),this.l=Ve(p[5]||"",!0),Yr(this,p[6]||"",!0),this.m=Ve(p[7]||"")):(this.h=!1,this.i=new Jn(null,this.h))}wr.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Xr(p,Bi,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Xr(p,Bi,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Xr(_,_.charAt(0)=="/"?Ul:jl,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Xr(_,ua)),u.join("")};function cn(u){return new wr(u)}function Ks(u,p,_){u.j=_?Ve(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Qr(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Yr(u,p,_){p instanceof Jn?(u.i=p,Xn(u.i,u.h)):(_||(p=Xr(p,Fl)),u.i=new Jn(p,u.h))}function Ge(u,p,_){u.i.set(p,_)}function Jr(u){return Ge(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ve(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Xr(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,Ml),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ml(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Bi=/[#\/\?@]/g,jl=/[#\?:]/g,Ul=/[#\?]/g,Fl=/[#\?@]/g,ua=/#/g;function Jn(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Pt(u){u.g||(u.g=new Map,u.h=0,u.i&&oh(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}r=Jn.prototype,r.add=function(u,p){Pt(this),this.i=null,u=vn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function On(u,p){Pt(u),p=vn(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Vn(u,p){return Pt(u),p=vn(u,p),u.g.has(p)}r.forEach=function(u,p){Pt(this),this.g.forEach(function(_,T){_.forEach(function(F){u.call(p,F,T,this)},this)},this)},r.na=function(){Pt(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let T=0;T<p.length;T++){const F=u[T];for(let q=0;q<F.length;q++)_.push(p[T])}return _},r.V=function(u){Pt(this);let p=[];if(typeof u=="string")Vn(this,u)&&(p=p.concat(this.g.get(vn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)p=p.concat(u[_])}return p},r.set=function(u,p){return Pt(this),this.i=null,u=vn(this,u),Vn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Zr(u,p,_){On(u,p),0<_.length&&(u.i=null,u.g.set(vn(u,p),U(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var T=p[_];const q=encodeURIComponent(String(T)),oe=this.V(T);for(T=0;T<oe.length;T++){var F=q;oe[T]!==""&&(F+="="+encodeURIComponent(String(oe[T]))),u.push(F)}}return this.i=u.join("&")};function vn(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Xn(u,p){p&&!u.j&&(Pt(u),u.i=null,u.g.forEach(function(_,T){var F=T.toLowerCase();T!=F&&(On(this,T),Zr(this,F,_))},u)),u.j=p}function ah(u,p){const _=new zs;if(f.Image){const T=new Image;T.onload=M(Yt,_,"TestLoadImage: loaded",!0,p,T),T.onerror=M(Yt,_,"TestLoadImage: error",!1,p,T),T.onabort=M(Yt,_,"TestLoadImage: abort",!1,p,T),T.ontimeout=M(Yt,_,"TestLoadImage: timeout",!1,p,T),f.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else p(!1)}function zl(u,p){const _=new zs,T=new AbortController,F=setTimeout(()=>{T.abort(),Yt(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:T.signal}).then(q=>{clearTimeout(F),q.ok?Yt(_,"TestPingServer: ok",!0,p):Yt(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(F),Yt(_,"TestPingServer: error",!1,p)})}function Yt(u,p,_,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(_)}catch{}}function lh(){this.g=new ea}function Bl(u,p,_){const T=_||"";try{Gr(u,function(F,q){let oe=F;y(F)&&(oe=Xo(F)),p.push(T+q+"="+encodeURIComponent(oe))})}catch(F){throw p.push(T+"type="+encodeURIComponent("_badmap")),F}}function Er(u){this.l=u.Ub||null,this.j=u.eb||!1}j(Er,Us),Er.prototype.g=function(){return new Gs(this.l,this.j)},Er.prototype.i=(function(u){return function(){return u}})({});function Gs(u,p){gt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(Gs,gt),r=Gs.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Mn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||f).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ln(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Mn(this)),this.g&&(this.readyState=3,Mn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$l(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function $l(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Ln(this):Mn(this),this.readyState==3&&$l(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Ln(this))},r.Qa=function(u){this.g&&(this.response=u,Ln(this))},r.ga=function(){this.g&&Ln(this)};function Ln(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Mn(u)}r.setRequestHeader=function(u,p){this.u.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function Mn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Gs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Tr(u){let p="";return ge(u,function(_,T){p+=T,p+=":",p+=_,p+=`\r
`}),p}function es(u,p,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=Tr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Ge(u,p,_))}function nt(u){gt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(nt,gt);var uh=/^https?$/i,ca=["POST","PUT"];r=nt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,p,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bn.g(),this.v=this.o?bi(this.o):bi(bn),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(q){Qs(this,q);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)_.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const q of T.keys())_.set(q,T.get(q));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),F=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(ca,p,void 0))||T||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,oe]of _)this.g.setRequestHeader(q,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qi(this),this.u=!0,this.g.send(u),this.u=!1}catch(q){Qs(this,q)}};function Qs(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,$i(u),hn(u)}function $i(u){u.A||(u.A=!0,yt(u,"complete"),yt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,yt(this,"complete"),yt(this,"abort"),hn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hn(this,!0)),nt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ha(this):this.bb())},r.bb=function(){ha(this)};function ha(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Jt(u)!=4||u.Z()!=2)){if(u.u&&Jt(u)==4)Qo(u.Ea,0,u);else if(yt(u,"readystatechange"),Jt(u)==4){u.h=!1;try{const oe=u.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var T;if(T=oe===0){var F=String(u.D).match(Ws)[1]||null;!F&&f.self&&f.self.location&&(F=f.self.location.protocol.slice(0,-1)),T=!uh.test(F?F.toLowerCase():"")}_=T}if(_)yt(u,"complete"),yt(u,"success");else{u.m=6;try{var q=2<Jt(u)?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.Z()+"]",$i(u)}}finally{hn(u)}}}}function hn(u,p){if(u.g){qi(u);const _=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||yt(u,"ready");try{_.onreadystatechange=T}catch{}}}function qi(u){u.I&&(f.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Jt(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Jt(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Zo(p)}};function da(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Hi(u){const p={};u=(u.g&&2<=Jt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(K(u[T]))continue;var _=O(u[T]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=p[F]||[];p[F]=q,q.push(_)}P(p,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zn(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function fa(u){this.Aa=0,this.i=[],this.j=new zs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zn("baseRetryDelayMs",5e3,u),this.cb=Zn("retryDelaySeedMs",1e4,u),this.Wa=Zn("forwardChannelMaxRetries",2,u),this.wa=Zn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Hs(u&&u.concurrentRequestLimit),this.Da=new lh,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=fa.prototype,r.la=8,r.G=1,r.connect=function(u,p,_,T){ut(0),this.W=u,this.H=p||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=Kl(this,null,this.W),er(this)};function Nt(u){if(Wi(u),u.G==3){var p=u.U++,_=cn(u.I);if(Ge(_,"SID",u.K),Ge(_,"RID",p),Ge(_,"TYPE","terminate"),Ir(u,_),p=new Dn(u,u.j,p),p.L=2,p.v=Jr(cn(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&f.Image&&(new Image().src=p.v,_=!0),_||(p.g=Gl(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Je(p)}Wl(u)}function jn(u){u.g&&(pa(u),u.g.cancel(),u.g=null)}function Wi(u){jn(u),u.u&&(f.clearTimeout(u.u),u.u=null),Qi(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function er(u){if(!un(u.h)&&!u.s){u.s=!0;var p=u.Ga;Ne||re(),ie||(Ne(),ie=!0),Y.add(p,u),u.B=0}}function ch(u,p){return Ol(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Pn(R(u.Ga,u,p),Hl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new Dn(this,this.j,u);let q=this.o;if(this.S&&(q?(q=S(q),N(q,this.S)):q=this.S),this.m!==null||this.O||(F.H=q,q=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=ts(this,F,p),_=cn(this.I),Ge(_,"RID",u),Ge(_,"CVER",22),this.D&&Ge(_,"X-HTTP-Session-Id",this.D),Ir(this,_),q&&(this.O?p="headers="+encodeURIComponent(String(Tr(q)))+"&"+p:this.m&&es(_,this.m,q)),la(this.h,F),this.Ua&&Ge(_,"TYPE","init"),this.P?(Ge(_,"$req",p),Ge(_,"SID","null"),F.T=!0,Ui(F,_,null)):Ui(F,_,p),this.G=2}}else this.G==3&&(u?Ki(this,u):this.i.length==0||un(this.h)||Ki(this))};function Ki(u,p){var _;p?_=p.l:_=u.U++;const T=cn(u.I);Ge(T,"SID",u.K),Ge(T,"RID",_),Ge(T,"AID",u.T),Ir(u,T),u.m&&u.o&&es(T,u.m,u.o),_=new Dn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),p&&(u.i=p.D.concat(u.i)),p=ts(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),la(u.h,_),Ui(_,T,p)}function Ir(u,p){u.H&&ge(u.H,function(_,T){Ge(p,T,_)}),u.l&&Gr({},function(_,T){Ge(p,T,_)})}function ts(u,p,_){_=Math.min(u.i.length,_);var T=u.l?R(u.l.Na,u.l,u):null;e:{var F=u.i;let q=-1;for(;;){const oe=["count="+_];q==-1?0<_?(q=F[0].g,oe.push("ofs="+q)):q=0:oe.push("ofs="+q);let He=!0;for(let _t=0;_t<_;_t++){let je=F[_t].g;const St=F[_t].map;if(je-=q,0>je)q=Math.max(0,F[_t].g-100),He=!1;else try{Bl(St,oe,"req"+je+"_")}catch{T&&T(St)}}if(He){T=oe.join("&");break e}}}return u=u.i.splice(0,_),p.D=u,T}function Ys(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;Ne||re(),ie||(Ne(),ie=!0),Y.add(p,u),u.v=0}}function Gi(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Pn(R(u.Fa,u),Hl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,ql(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Pn(R(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),jn(this),ql(this))};function pa(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function ql(u){u.g=new Dn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=cn(u.qa);Ge(p,"RID","rpc"),Ge(p,"SID",u.K),Ge(p,"AID",u.T),Ge(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ge(p,"TO",u.ja),Ge(p,"TYPE","xmlhttp"),Ir(u,p),u.m&&u.o&&es(p,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Jr(cn(p)),_.m=null,_.P=!0,oa(_,u)}r.Za=function(){this.C!=null&&(this.C=null,jn(this),Gi(this),ut(19))};function Qi(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Yi(u,p){var _=null;if(u.g==p){Qi(u),pa(u),u.g=null;var T=2}else if(Wt(u.h,p))_=p.D,Vl(u.h,p),T=1;else return;if(u.G!=0){if(p.o)if(T==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var F=u.B;T=Fs(),yt(T,new Vi(T,_)),er(u)}else Ys(u);else if(F=p.s,F==3||F==0&&0<p.X||!(T==1&&ch(u,p)||T==2&&Gi(u)))switch(_&&0<_.length&&(p=u.h,p.i=p.i.concat(_)),F){case 1:Sr(u,5);break;case 4:Sr(u,10);break;case 3:Sr(u,6);break;default:Sr(u,2)}}}function Hl(u,p){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*p}function Sr(u,p){if(u.j.info("Error code "+p),p==2){var _=R(u.fb,u),T=u.Xa;const F=!T;T=new wr(T||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Ks(T,"https"),Jr(T),F?ah(T.toString(),_):zl(T.toString(),_)}else ut(2);u.G=0,u.l&&u.l.sa(p),Wl(u),Wi(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function Wl(u){if(u.G=0,u.ka=[],u.l){const p=Ll(u.h);(p.length!=0||u.i.length!=0)&&(k(u.ka,p),k(u.ka,u.i),u.h.i.length=0,U(u.i),u.i.length=0),u.l.ra()}}function Kl(u,p,_){var T=_ instanceof wr?cn(_):new wr(_);if(T.g!="")p&&(T.g=p+"."+T.g),Qr(T,T.s);else{var F=f.location;T=F.protocol,p=p?p+"."+F.hostname:F.hostname,F=+F.port;var q=new wr(null);T&&Ks(q,T),p&&(q.g=p),F&&Qr(q,F),_&&(q.l=_),T=q}return _=u.D,p=u.ya,_&&p&&Ge(T,_,p),Ge(T,"VER",u.la),Ir(u,T),T}function Gl(u,p,_){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new nt(new Er({eb:_})):new nt(u.pa),p.Ha(u.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ma(){}r=ma.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ji(){}Ji.prototype.g=function(u,p){return new Kt(u,p)};function Kt(u,p){gt.call(this),this.g=new fa(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!K(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!K(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new tr(this)}j(Kt,gt),Kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){Nt(this.g)},Kt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Xo(u),u=_);p.i.push(new Dl(p.Ya++,u)),p.G==3&&er(p)},Kt.prototype.N=function(){this.g.l=null,delete this.j,Nt(this.g),delete this.g,Kt.aa.N.call(this)};function Ql(u){Qn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}j(Ql,Qn);function Yl(){Oi.call(this),this.status=1}j(Yl,Oi);function tr(u){this.g=u}j(tr,ma),tr.prototype.ua=function(){yt(this.g,"a")},tr.prototype.ta=function(u){yt(this.g,new Ql(u))},tr.prototype.sa=function(u){yt(this.g,new Yl)},tr.prototype.ra=function(){yt(this.g,"b")},Ji.prototype.createWebChannel=Ji.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,kv=function(){return new Ji},Cv=function(){return Fs()},Rv=Yn,cf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Mi.NO_ERROR=0,Mi.TIMEOUT=8,Mi.HTTP_ERROR=6,tc=Mi,kl.COMPLETE="complete",xv=kl,Di.EventType=yn,yn.OPEN="a",yn.CLOSE="b",yn.ERROR="c",yn.MESSAGE="d",gt.prototype.listen=gt.prototype.K,qa=Di,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,Av=nt}).apply(typeof Hu<"u"?Hu:typeof self<"u"?self:typeof window<"u"?window:{});const Ey="@firebase/firestore",Ty="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uo="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new Lf("@firebase/firestore");function wo(){return wi.logLevel}function ce(r,...e){if(wi.logLevel<=be.DEBUG){const t=e.map(Qf);wi.debug(`Firestore (${Uo}): ${r}`,...t)}}function zr(r,...e){if(wi.logLevel<=be.ERROR){const t=e.map(Qf);wi.error(`Firestore (${Uo}): ${r}`,...t)}}function Po(r,...e){if(wi.logLevel<=be.WARN){const t=e.map(Qf);wi.warn(`Firestore (${Uo}): ${r}`,...t)}}function Qf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Pv(r,s,t)}function Pv(r,e,t){let s=`FIRESTORE (${Uo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw zr(s),new Error(s)}function qe(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||Pv(e,o,s)}function Ae(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends $r{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Bt.UNAUTHENTICATED)))}shutdown(){}}class BS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class $S{constructor(e){this.t=e,this.currentUser=Bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){qe(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new Rs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Rs,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},f=g=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Rs)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(qe(typeof s.accessToken=="string",31837,{l:s}),new Nv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string",2055,{h:e}),new Bt(e)}}class qS{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Bt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class HS{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new qS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Bt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Iy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WS{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){qe(this.o===void 0,3512);const s=l=>{l.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,ce("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Iy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Iy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=KS(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function De(r,e){return r<e?-1:r>e?1:0}function hf(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const o=r.charAt(s),l=e.charAt(s);if(o!==l)return Bd(o)===Bd(l)?De(o,l):Bd(o)?1:-1}return De(r.length,e.length)}const GS=55296,QS=57343;function Bd(r){const e=r.charCodeAt(0);return e>=GS&&e<=QS}function No(r,e,t){return r.length===e.length&&r.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy="__name__";class ar{constructor(e,t,s){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Te(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return ar.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ar?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=ar.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return De(e.length,t.length)}static compareSegments(e,t){const s=ar.isNumericId(e),o=ar.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?ar.extractNumericId(e).compare(ar.extractNumericId(t)):hf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xs.fromString(e.substring(4,e.length-2))}}class ot extends ar{construct(e,t,s){return new ot(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new me(Z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new ot(t)}static emptyPath(){return new ot([])}}const YS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends ar{construct(e,t,s){return new Vt(e,t,s)}static isValidIdentifier(e){return YS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Sy}static keyField(){return new Vt([Sy])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new me(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new me(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new me(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(s+=f,o++):(l(),o++)}if(l(),h)throw new me(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vt(t)}static emptyPath(){return new Vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(ot.fromString(e))}static fromName(e){return new we(ot.fromString(e).popFirst(5))}static empty(){return new we(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ot.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(r,e,t){if(!t)throw new me(Z.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function XS(r,e,t,s){if(e===!0&&s===!0)throw new me(Z.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Ay(r){if(!we.isDocumentKey(r))throw new me(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function bv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Jf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Te(12329,{type:typeof r})}function rl(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new me(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Jf(r);throw new me(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(r,e){const t={typeString:r};return e&&(t.value=e),t}function vl(r,e){if(!bv(r))throw new me(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new me(Z.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy=-62135596800,Ry=1e6;class tt{static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Ry);return new tt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<xy)throw new me(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ry}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vl(e,tt._jsonSchema))return new tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tt._jsonSchemaVersion="firestore/timestamp/1.0",tt._jsonSchema={type:mt("string",tt._jsonSchemaVersion),seconds:mt("number"),nanoseconds:mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new tt(0,0))}static max(){return new Se(new tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl=-1;function ZS(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(s===1e9?new tt(t+1,0):new tt(t,s));return new Cs(o,we.empty(),e)}function eA(r){return new Cs(r.readTime,r.key,sl)}class Cs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Cs(Se.min(),we.empty(),sl)}static max(){return new Cs(Se.max(),we.empty(),sl)}}function tA(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(r.documentKey,e.documentKey),t!==0?t:De(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fo(r){if(r.code!==Z.FAILED_PRECONDITION||r.message!==nA)throw r;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):G.reject(t)}static resolve(e){return new G(((t,s)=>{t(e)}))}static reject(e){return new G(((t,s)=>{s(e)}))}static waitFor(e){return new G(((t,s)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(g=>s(g)))})),h=!0,l===o&&t()}))}static or(e){let t=G.resolve(!1);for(const s of e)t=t.next((o=>o?G.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new G(((s,o)=>{const l=e.length,h=new Array(l);let f=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((w=>{h[y]=w,++f,f===l&&s(h)}),(w=>o(w)))}}))}static doWhile(e,t){return new G(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function sA(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function zo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Uc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf=-1;function Fc(r){return r==null}function vc(r){return r===0&&1/r==-1/0}function iA(r){return typeof r=="number"&&Number.isInteger(r)&&!vc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="";function oA(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Cy(e)),e=aA(r.get(t),e);return Cy(e)}function aA(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case Dv:t+="";break;default:t+=l}}return t}function Cy(r){return r+Dv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ii(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Ov(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t){this.comparator=e,this.root=t||Ot.EMPTY}insert(e,t){return new at(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wu(this.root,e,this.comparator,!0)}}class Wu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Ot.RED,this.left=o??Ot.EMPTY,this.right=l??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Ot(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ot.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Ot(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Py(this.data.getIterator())}getIteratorFrom(e){return new Py(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Tt(this.comparator);return t.data=e,t}}class Py{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new Wn([])}unionWith(e){let t=new Tt(Vt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Wn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return No(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Vv("Invalid base64 string: "+l):l}})(e);return new Lt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Lt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const lA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ks(r){if(qe(!!r,39018),typeof r=="string"){let e=0;const t=lA.exec(r);if(qe(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ht(r.seconds),nanos:ht(r.nanos)}}function ht(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ps(r){return typeof r=="string"?Lt.fromBase64String(r):Lt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="server_timestamp",Mv="__type__",jv="__previous_value__",Uv="__local_write_time__";function Zf(r){return(r?.mapValue?.fields||{})[Mv]?.stringValue===Lv}function zc(r){const e=r.mapValue.fields[jv];return Zf(e)?zc(e):e}function il(r){const e=ks(r.mapValue.fields[Uv].timestampValue);return new tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,t,s,o,l,h,f,g,y,w){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=w}}const wc="(default)";class ol{constructor(e,t){this.projectId=e,this.database=t||wc}static empty(){return new ol("","")}get isDefaultDatabase(){return this.database===wc}isEqual(e){return e instanceof ol&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="__type__",cA="__max__",Ku={mapValue:{}},zv="__vector__",Ec="value";function Ns(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Zf(r)?4:dA(r)?9007199254740991:hA(r)?10:11:Te(28295,{value:r})}function fr(r,e){if(r===e)return!0;const t=Ns(r);if(t!==Ns(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return il(r).isEqual(il(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=ks(o.timestampValue),f=ks(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Ps(o.bytesValue).isEqual(Ps(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return ht(o.geoPointValue.latitude)===ht(l.geoPointValue.latitude)&&ht(o.geoPointValue.longitude)===ht(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ht(o.integerValue)===ht(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ht(o.doubleValue),f=ht(l.doubleValue);return h===f?vc(h)===vc(f):isNaN(h)&&isNaN(f)}return!1})(r,e);case 9:return No(r.arrayValue.values||[],e.arrayValue.values||[],fr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(ky(h)!==ky(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!fr(h[g],f[g])))return!1;return!0})(r,e);default:return Te(52216,{left:r})}}function al(r,e){return(r.values||[]).find((t=>fr(t,e)))!==void 0}function bo(r,e){if(r===e)return 0;const t=Ns(r),s=Ns(e);if(t!==s)return De(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=ht(l.integerValue||l.doubleValue),g=ht(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return Ny(r.timestampValue,e.timestampValue);case 4:return Ny(il(r),il(e));case 5:return hf(r.stringValue,e.stringValue);case 6:return(function(l,h){const f=Ps(l),g=Ps(h);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),g=h.split("/");for(let y=0;y<f.length&&y<g.length;y++){const w=De(f[y],g[y]);if(w!==0)return w}return De(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=De(ht(l.latitude),ht(h.latitude));return f!==0?f:De(ht(l.longitude),ht(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return by(r.arrayValue,e.arrayValue);case 10:return(function(l,h){const f=l.fields||{},g=h.fields||{},y=f[Ec]?.arrayValue,w=g[Ec]?.arrayValue,I=De(y?.values?.length||0,w?.values?.length||0);return I!==0?I:by(y,w)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Ku.mapValue&&h===Ku.mapValue)return 0;if(l===Ku.mapValue)return 1;if(h===Ku.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),y=h.fields||{},w=Object.keys(y);g.sort(),w.sort();for(let I=0;I<g.length&&I<w.length;++I){const R=hf(g[I],w[I]);if(R!==0)return R;const M=bo(f[g[I]],y[w[I]]);if(M!==0)return M}return De(g.length,w.length)})(r.mapValue,e.mapValue);default:throw Te(23264,{he:t})}}function Ny(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return De(r,e);const t=ks(r),s=ks(e),o=De(t.seconds,s.seconds);return o!==0?o:De(t.nanos,s.nanos)}function by(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=bo(t[o],s[o]);if(l)return l}return De(t.length,s.length)}function Do(r){return df(r)}function df(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=ks(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Ps(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return we.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=df(l);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${df(t.fields[h])}`;return o+"}"})(r.mapValue):Te(61005,{value:r})}function nc(r){switch(Ns(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zc(r);return e?16+nc(e):16;case 5:return 2*r.stringValue.length;case 6:return Ps(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+nc(l)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return Ii(s.fields,((l,h)=>{o+=l.length+nc(h)})),o})(r.mapValue);default:throw Te(13486,{value:r})}}function ff(r){return!!r&&"integerValue"in r}function ep(r){return!!r&&"arrayValue"in r}function Dy(r){return!!r&&"nullValue"in r}function Oy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function rc(r){return!!r&&"mapValue"in r}function hA(r){return(r?.mapValue?.fields||{})[Fv]?.stringValue===zv}function Ya(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ii(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Ya(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ya(r.arrayValue.values[t]);return e}return{...r}}function dA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===cA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.value=e}static empty(){return new Rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!rc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ya(t)}setAll(e){let t=Vt.emptyPath(),s={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=f.popLast()}h?s[f.lastSegment()]=Ya(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());rc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];rc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Ii(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new Rn(Ya(this.value))}}function Bv(r){const e=[];return Ii(r.fields,((t,s)=>{const o=new Vt([t]);if(rc(s)){const l=Bv(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new Wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t,s,o,l,h,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new $t(e,0,Se.min(),Se.min(),Se.min(),Rn.empty(),0)}static newFoundDocument(e,t,s,o){return new $t(e,1,t,Se.min(),s,o,0)}static newNoDocument(e,t){return new $t(e,2,t,Se.min(),Se.min(),Rn.empty(),0)}static newUnknownDocument(e,t){return new $t(e,3,t,Se.min(),Se.min(),Rn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t){this.position=e,this.inclusive=t}}function Vy(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=we.comparator(we.fromName(h.referenceValue),t.key):s=bo(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Ly(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!fr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t="asc"){this.field=e,this.dir=t}}function fA(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{}class Et extends $v{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new mA(e,t,s):t==="array-contains"?new _A(e,s):t==="in"?new vA(e,s):t==="not-in"?new wA(e,s):t==="array-contains-any"?new EA(e,s):new Et(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new gA(e,s):new yA(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(bo(t,this.value)):t!==null&&Ns(this.value)===Ns(t)&&this.matchesComparison(bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pr extends $v{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new pr(e,t)}matches(e){return qv(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function qv(r){return r.op==="and"}function Hv(r){return pA(r)&&qv(r)}function pA(r){for(const e of r.filters)if(e instanceof pr)return!1;return!0}function pf(r){if(r instanceof Et)return r.field.canonicalString()+r.op.toString()+Do(r.value);if(Hv(r))return r.filters.map((e=>pf(e))).join(",");{const e=r.filters.map((t=>pf(t))).join(",");return`${r.op}(${e})`}}function Wv(r,e){return r instanceof Et?(function(s,o){return o instanceof Et&&s.op===o.op&&s.field.isEqual(o.field)&&fr(s.value,o.value)})(r,e):r instanceof pr?(function(s,o){return o instanceof pr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,h,f)=>l&&Wv(h,o.filters[f])),!0):!1})(r,e):void Te(19439)}function Kv(r){return r instanceof Et?(function(t){return`${t.field.canonicalString()} ${t.op} ${Do(t.value)}`})(r):r instanceof pr?(function(t){return t.op.toString()+" {"+t.getFilters().map(Kv).join(" ,")+"}"})(r):"Filter"}class mA extends Et{constructor(e,t,s){super(e,t,s),this.key=we.fromName(s.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class gA extends Et{constructor(e,t){super(e,"in",t),this.keys=Gv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class yA extends Et{constructor(e,t){super(e,"not-in",t),this.keys=Gv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Gv(r,e){return(e.arrayValue?.values||[]).map((t=>we.fromName(t.referenceValue)))}class _A extends Et{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ep(t)&&al(t.arrayValue,this.value)}}class vA extends Et{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&al(this.value.arrayValue,t)}}class wA extends Et{constructor(e,t){super(e,"not-in",t)}matches(e){if(al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!al(this.value.arrayValue,t)}}class EA extends Et{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ep(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>al(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,t=null,s=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Te=null}}function My(r,e=null,t=[],s=[],o=null,l=null,h=null){return new TA(r,e,t,s,o,l,h)}function tp(r){const e=Ae(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>pf(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Fc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Do(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Do(s))).join(",")),e.Te=t}return e.Te}function np(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!fA(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Wv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Ly(r.startAt,e.startAt)&&Ly(r.endAt,e.endAt)}function mf(r){return we.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,t=null,s=[],o=[],l=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function IA(r,e,t,s,o,l,h,f){return new Bc(r,e,t,s,o,l,h,f)}function rp(r){return new Bc(r)}function jy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function SA(r){return r.collectionGroup!==null}function Ja(r){const e=Ae(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new Tt(Vt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Ic(l,s))})),t.has(Vt.keyField().canonicalString())||e.Ie.push(new Ic(Vt.keyField(),s))}return e.Ie}function ur(r){const e=Ae(r);return e.Ee||(e.Ee=AA(e,Ja(r))),e.Ee}function AA(r,e){if(r.limitType==="F")return My(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Ic(o.field,l)}));const t=r.endAt?new Tc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Tc(r.startAt.position,r.startAt.inclusive):null;return My(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function gf(r,e,t){return new Bc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function $c(r,e){return np(ur(r),ur(e))&&r.limitType===e.limitType}function Qv(r){return`${tp(ur(r))}|lt:${r.limitType}`}function Eo(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>Kv(o))).join(", ")}]`),Fc(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Do(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Do(o))).join(",")),`Target(${s})`})(ur(r))}; limitType=${r.limitType})`}function qc(r,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):we.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(r,e)&&(function(s,o){for(const l of Ja(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(h,f,g){const y=Vy(h,f,g);return h.inclusive?y<=0:y<0})(s.startAt,Ja(s),o)||s.endAt&&!(function(h,f,g){const y=Vy(h,f,g);return h.inclusive?y>=0:y>0})(s.endAt,Ja(s),o))})(r,e)}function xA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Yv(r){return(e,t)=>{let s=!1;for(const o of Ja(r)){const l=RA(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function RA(r,e,t){const s=r.field.isKeyField()?we.comparator(e.key,t.key):(function(l,h,f){const g=h.data.field(l),y=f.data.field(l);return g!==null&&y!==null?bo(g,y):Te(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Te(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ii(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return Ov(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=new at(we.comparator);function Br(){return CA}const Jv=new at(we.comparator);function Ha(...r){let e=Jv;for(const t of r)e=e.insert(t.key,t);return e}function Xv(r){let e=Jv;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function di(){return Xa()}function Zv(){return Xa()}function Xa(){return new Si((r=>r.toString()),((r,e)=>r.isEqual(e)))}const kA=new at(we.comparator),PA=new Tt(we.comparator);function Oe(...r){let e=PA;for(const t of r)e=e.add(t);return e}const NA=new Tt(De);function bA(){return NA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vc(e)?"-0":e}}function e0(r){return{integerValue:""+r}}function DA(r,e){return iA(e)?e0(e):sp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(){this._=void 0}}function OA(r,e,t){return r instanceof Sc?(function(o,l){const h={fields:{[Mv]:{stringValue:Lv},[Uv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Zf(l)&&(l=zc(l)),l&&(h.fields[jv]=l),{mapValue:h}})(t,e):r instanceof ll?n0(r,e):r instanceof ul?r0(r,e):(function(o,l){const h=t0(o,l),f=Uy(h)+Uy(o.Ae);return ff(h)&&ff(o.Ae)?e0(f):sp(o.serializer,f)})(r,e)}function VA(r,e,t){return r instanceof ll?n0(r,e):r instanceof ul?r0(r,e):t}function t0(r,e){return r instanceof Ac?(function(s){return ff(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Sc extends Hc{}class ll extends Hc{constructor(e){super(),this.elements=e}}function n0(r,e){const t=s0(e);for(const s of r.elements)t.some((o=>fr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class ul extends Hc{constructor(e){super(),this.elements=e}}function r0(r,e){let t=s0(e);for(const s of r.elements)t=t.filter((o=>!fr(o,s)));return{arrayValue:{values:t}}}class Ac extends Hc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Uy(r){return ht(r.integerValue||r.doubleValue)}function s0(r){return ep(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function LA(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof ll&&o instanceof ll||s instanceof ul&&o instanceof ul?No(s.elements,o.elements,fr):s instanceof Ac&&o instanceof Ac?fr(s.Ae,o.Ae):s instanceof Sc&&o instanceof Sc})(r.transform,e.transform)}class MA{constructor(e,t){this.version=e,this.transformResults=t}}class jr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jr}static exists(e){return new jr(void 0,e)}static updateTime(e){return new jr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Wc{}function i0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new a0(r.key,jr.none()):new wl(r.key,r.data,jr.none());{const t=r.data,s=Rn.empty();let o=new Tt(Vt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new Ai(r.key,s,new Wn(o.toArray()),jr.none())}}function jA(r,e,t){r instanceof wl?(function(o,l,h){const f=o.value.clone(),g=zy(o.fieldTransforms,l,h.transformResults);f.setAll(g),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(r,e,t):r instanceof Ai?(function(o,l,h){if(!sc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=zy(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(o0(o)),g.setAll(f),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Za(r,e,t,s){return r instanceof wl?(function(l,h,f,g){if(!sc(l.precondition,h))return f;const y=l.value.clone(),w=By(l.fieldTransforms,g,h);return y.setAll(w),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(r,e,t,s):r instanceof Ai?(function(l,h,f,g){if(!sc(l.precondition,h))return f;const y=By(l.fieldTransforms,g,h),w=h.data;return w.setAll(o0(l)),w.setAll(y),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((I=>I.field)))})(r,e,t,s):(function(l,h,f){return sc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(r,e,t)}function UA(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=t0(s.transform,o||null);l!=null&&(t===null&&(t=Rn.empty()),t.set(s.field,l))}return t||null}function Fy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&No(s,o,((l,h)=>LA(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class wl extends Wc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ai extends Wc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function o0(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function zy(r,e,t){const s=new Map;qe(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);s.set(l.field,VA(h,f,t[o]))}return s}function By(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,OA(l,h,e))}return s}class a0 extends Wc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class FA extends Wc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&jA(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Za(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Za(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Zv();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const g=i0(h,f);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Se.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Oe())}isEqual(e){return this.batchId===e.batchId&&No(this.mutations,e.mutations,((t,s)=>Fy(t,s)))&&No(this.baseMutations,e.baseMutations,((t,s)=>Fy(t,s)))}}class ip{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){qe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return kA})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new ip(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,Ue;function qA(r){switch(r){case Z.OK:return Te(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Te(15467,{code:r})}}function l0(r){if(r===void 0)return zr("GRPC error has no .code"),Z.UNKNOWN;switch(r){case pt.OK:return Z.OK;case pt.CANCELLED:return Z.CANCELLED;case pt.UNKNOWN:return Z.UNKNOWN;case pt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case pt.INTERNAL:return Z.INTERNAL;case pt.UNAVAILABLE:return Z.UNAVAILABLE;case pt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case pt.NOT_FOUND:return Z.NOT_FOUND;case pt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case pt.ABORTED:return Z.ABORTED;case pt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case pt.DATA_LOSS:return Z.DATA_LOSS;default:return Te(39323,{code:r})}}(Ue=pt||(pt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=new xs([4294967295,4294967295],0);function $y(r){const e=HA().encode(r),t=new Sv;return t.update(e),new Uint8Array(t.digest())}function qy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new xs([t,s],0),new xs([o,l],0)]}class op{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Wa(`Invalid padding: ${t}`);if(s<0)throw new Wa(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Wa(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Wa(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=xs.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(xs.fromNumber(s)));return o.compare(WA)===1&&(o=new xs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=$y(e),[s,o]=qy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);if(!this.we(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new op(l,o,t);return s.forEach((f=>h.insert(f))),h}insert(e){if(this.ge===0)return;const t=$y(e),[s,o]=qy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Wa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,El.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Kc(Se.min(),o,new at(De),Br(),Oe())}}class El{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new El(s,t,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class u0{constructor(e,t){this.targetId=e,this.Ce=t}}class c0{constructor(e,t,s=Lt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class Hy{constructor(){this.ve=0,this.Fe=Wy(),this.Me=Lt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),t=Oe(),s=Oe();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Te(38017,{changeType:l})}})),new El(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=Wy()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class KA{constructor(e){this.Ge=e,this.ze=new Map,this.je=Br(),this.Je=Gu(),this.He=Gu(),this.Ye=new at(De)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(mf(l))if(s===0){const h=new we(l.path);this.et(t,h,$t.newNoDocument(h,Se.min()))}else qe(s===1,20013,{expectedCount:s});else{const h=this._t(t);if(h!==s){const f=this.ut(e),g=f?this.ct(f,e,h):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=Ps(s).toUint8Array()}catch(g){if(g instanceof Vv)return Po("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new op(h,o,l)}catch(g){return Po(g instanceof Wa?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const h=this.Ge.ht(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const f=this.ot(h);if(f){if(l.current&&mf(f.target)){const g=new we(f.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,$t.newNoDocument(g,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let s=Oe();this.He.forEach(((l,h)=>{let f=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Kc(e,t,this.Ye,this.je,s);return this.je=Br(),this.Je=Gu(),this.He=Gu(),this.Ye=new at(De),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Hy,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Tt(De),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Tt(De),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Hy),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Gu(){return new at(we.comparator)}function Wy(){return new at(we.comparator)}const GA={asc:"ASCENDING",desc:"DESCENDING"},QA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YA={and:"AND",or:"OR"};class JA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function yf(r,e){return r.useProto3Json||Fc(e)?e:{value:e}}function xc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function h0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function XA(r,e){return xc(r,e.toTimestamp())}function cr(r){return qe(!!r,49232),Se.fromTimestamp((function(t){const s=ks(t);return new tt(s.seconds,s.nanos)})(r))}function ap(r,e){return _f(r,e).canonicalString()}function _f(r,e){const t=(function(o){return new ot(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function d0(r){const e=ot.fromString(r);return qe(y0(e),10190,{key:e.toString()}),e}function vf(r,e){return ap(r.databaseId,e.path)}function $d(r,e){const t=d0(e);if(t.get(1)!==r.databaseId.projectId)throw new me(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new me(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new we(p0(t))}function f0(r,e){return ap(r.databaseId,e)}function ZA(r){const e=d0(r);return e.length===4?ot.emptyPath():p0(e)}function wf(r){return new ot(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function p0(r){return qe(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Ky(r,e,t){return{name:vf(r,e),fields:t.value.mapValue.fields}}function ex(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Te(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,w){return y.useProto3Json?(qe(w===void 0||typeof w=="string",58123),Lt.fromBase64String(w||"")):(qe(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Lt.fromUint8Array(w||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(y){const w=y.code===void 0?Z.UNKNOWN:l0(y.code);return new me(w,y.message||"")})(h);t=new c0(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=$d(r,s.document.name),l=cr(s.document.updateTime),h=s.document.createTime?cr(s.document.createTime):Se.min(),f=new Rn({mapValue:{fields:s.document.fields}}),g=$t.newFoundDocument(o,l,h,f),y=s.targetIds||[],w=s.removedTargetIds||[];t=new ic(y,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=$d(r,s.document),l=s.readTime?cr(s.readTime):Se.min(),h=$t.newNoDocument(o,l),f=s.removedTargetIds||[];t=new ic([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=$d(r,s.document),l=s.removedTargetIds||[];t=new ic([],l,o,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new $A(o,l),f=s.targetId;t=new u0(f,h)}}return t}function tx(r,e){let t;if(e instanceof wl)t={update:Ky(r,e.key,e.value)};else if(e instanceof a0)t={delete:vf(r,e.key)};else if(e instanceof Ai)t={update:Ky(r,e.key,e.data),updateMask:cx(e.fieldMask)};else{if(!(e instanceof FA))return Te(16599,{Vt:e.type});t={verify:vf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,h){const f=h.transform;if(f instanceof Sc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ll)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof ul)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Ac)return{fieldPath:h.field.canonicalString(),increment:f.Ae};throw Te(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:XA(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Te(27497)})(r,e.precondition)),t}function nx(r,e){return r&&r.length>0?(qe(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?cr(o.updateTime):cr(l);return h.isEqual(Se.min())&&(h=cr(l)),new MA(h,o.transformResults||[])})(t,e)))):[]}function rx(r,e){return{documents:[f0(r,e.path)]}}function sx(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=f0(r,o);const l=(function(y){if(y.length!==0)return g0(pr.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((w=>(function(R){return{field:To(R.field),direction:ax(R.dir)}})(w)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=yf(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function ix(r){let e=ZA(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){qe(s===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=(function(I){const R=m0(I);return R instanceof pr&&Hv(R)?R.getFilters():[R]})(t.where));let h=[];t.orderBy&&(h=(function(I){return I.map((R=>(function(j){return new Ic(Io(j.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(R)))})(t.orderBy));let f=null;t.limit&&(f=(function(I){let R;return R=typeof I=="object"?I.value:I,Fc(R)?null:R})(t.limit));let g=null;t.startAt&&(g=(function(I){const R=!!I.before,M=I.values||[];return new Tc(M,R)})(t.startAt));let y=null;return t.endAt&&(y=(function(I){const R=!I.before,M=I.values||[];return new Tc(M,R)})(t.endAt)),IA(e,o,h,l,f,"F",g,y)}function ox(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function m0(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Io(t.unaryFilter.field);return Et.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Io(t.unaryFilter.field);return Et.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Io(t.unaryFilter.field);return Et.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Io(t.unaryFilter.field);return Et.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Et.create(Io(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return pr.create(t.compositeFilter.filters.map((s=>m0(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(r):Te(30097,{filter:r})}function ax(r){return GA[r]}function lx(r){return QA[r]}function ux(r){return YA[r]}function To(r){return{fieldPath:r.canonicalString()}}function Io(r){return Vt.fromServerFormat(r.fieldPath)}function g0(r){return r instanceof Et?(function(t){if(t.op==="=="){if(Oy(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NAN"}};if(Dy(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Oy(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NOT_NAN"}};if(Dy(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:To(t.field),op:lx(t.op),value:t.value}}})(r):r instanceof pr?(function(t){const s=t.getFilters().map((o=>g0(o)));return s.length===1?s[0]:{compositeFilter:{op:ux(t.op),filters:s}}})(r):Te(54877,{filter:r})}function cx(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function y0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,t,s,o,l=Se.min(),h=Se.min(),f=Lt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e){this.yt=e}}function dx(r){const e=ix({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?gf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(){this.Cn=new px}addToCollectionParentIndex(e,t){return this.Cn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Cs.min())}updateCollectionGroup(e,t,s){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class px{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Tt(ot.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Tt(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_0=41943040;class sn{static withCacheSize(e){return new sn(e,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(_0,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Oo(0)}static cr(){return new Oo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="LruGarbageCollector",mx=1048576;function Yy([r,e],[t,s]){const o=De(r,t);return o===0?De(e,s):o}class gx{constructor(e){this.Ir=e,this.buffer=new Tt(Yy),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Yy(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yx{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ce(Qy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){zo(t)?ce(Qy,"Ignoring IndexedDB error during garbage collection: ",t):await Fo(t)}await this.Vr(3e5)}))}}class _x{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return G.resolve(Uc.ce);const s=new gx(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(Gy)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gy):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,h,f,g,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,h=Date.now(),this.nthSequenceNumber(e,o)))).next((I=>(s=I,f=Date.now(),this.removeTargets(e,s,t)))).next((I=>(l=I,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((I=>(y=Date.now(),wo()<=be.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${I} documents in `+(y-g)+`ms
Total Duration: ${y-w}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:I}))))}}function vx(r,e){return new _x(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(){this.changes=new Si((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?G.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Za(s.mutation,o,Wn.empty(),tt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Oe()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Oe()){const o=di();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let h=Ha();return l.forEach(((f,g)=>{h=h.insert(f,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const s=di();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Oe())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,s,o){let l=Br();const h=Xa(),f=(function(){return Xa()})();return t.forEach(((g,y)=>{const w=s.get(y.key);o.has(y.key)&&(w===void 0||w.mutation instanceof Ai)?l=l.insert(y.key,y):w!==void 0?(h.set(y.key,w.mutation.getFieldMask()),Za(w.mutation,y,w.mutation.getFieldMask(),tt.now())):h.set(y.key,Wn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,w)=>h.set(y,w))),t.forEach(((y,w)=>f.set(y,new Ex(w,h.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=Xa();let o=new at(((h,f)=>h-f)),l=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let w=s.get(g)||Wn.empty();w=f.applyToLocalView(y,w),s.set(g,w);const I=(o.get(f.batchId)||Oe()).add(g);o=o.insert(f.batchId,I)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),y=g.key,w=g.value,I=Zv();w.forEach((R=>{if(!l.has(R)){const M=i0(t.get(R),s.get(R));M!==null&&I.set(R,M),l=l.add(R)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,I))}return G.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(h){return we.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):SA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):G.resolve(di());let f=sl,g=l;return h.next((y=>G.forEach(y,((w,I)=>(f<I.largestBatchId&&(f=I.largestBatchId),l.get(w)?G.resolve():this.remoteDocumentCache.getEntry(e,w).next((R=>{g=g.insert(w,R)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,Oe()))).next((w=>({batchId:f,changes:Xv(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((s=>{let o=Ha();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=Ha();return this.indexManager.getCollectionParents(e,l).next((f=>G.forEach(f,(g=>{const y=(function(I,R){return new Bc(R,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((w=>{w.forEach(((I,R)=>{h=h.insert(I,R)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((h=>{l.forEach(((g,y)=>{const w=y.getKey();h.get(w)===null&&(h=h.insert(w,$t.newInvalidDocument(w)))}));let f=Ha();return h.forEach(((g,y)=>{const w=l.get(g);w!==void 0&&Za(w.mutation,y,Wn.empty(),tt.now()),qc(t,y)&&(f=f.insert(g,y))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return G.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:cr(o.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:dx(o.bundledQuery),readTime:cr(o.readTime)}})(t)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(){this.overlays=new at(we.comparator),this.qr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const s=di();return G.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),G.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),G.resolve()}getOverlaysForCollection(e,t,s){const o=di(),l=t.length+1,h=new we(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return G.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new at(((y,w)=>y-w));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let w=l.get(y.largestBatchId);w===null&&(w=di(),l=l.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const f=di(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,w)=>f.set(y,w))),!(f.size()>=o)););return G.resolve(f)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new BA(t,s));let l=this.qr.get(t);l===void 0&&(l=Oe(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(){this.sessionToken=Lt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(){this.Qr=new Tt(Ct.$r),this.Ur=new Tt(Ct.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Ct(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Ct(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new we(new ot([])),s=new Ct(t,e),o=new Ct(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new we(new ot([])),s=new Ct(t,e),o=new Ct(t,e+1);let l=Oe();return this.Ur.forEachInRange([s,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Ct(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Ct{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return we.comparator(e.key,t.key)||De(e.Yr,t.Yr)}static Kr(e,t){return De(e.Yr,t.Yr)||we.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Tt(Ct.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new zA(l,t,s,o);this.mutationQueue.push(h);for(const f of o)this.Zr=this.Zr.add(new Ct(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return G.resolve(h)}lookupMutationBatch(e,t){return G.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return G.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Xf:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ct(t,0),o=new Ct(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(h=>{const f=this.Xr(h.Yr);l.push(f)})),G.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Tt(De);return t.forEach((o=>{const l=new Ct(o,0),h=new Ct(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(f=>{s=s.add(f.Yr)}))})),G.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;we.isDocumentKey(l)||(l=l.child(""));const h=new Ct(new we(l),0);let f=new Tt(De);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(f=f.add(g.Yr)),!0)}),h),G.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){qe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return G.forEach(t.mutations,(o=>{const l=new Ct(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Ct(t,0),o=this.Zr.firstAfterOrEqual(s);return G.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e){this.ri=e,this.docs=(function(){return new at(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return G.resolve(s?s.document.mutableCopy():$t.newInvalidDocument(t))}getEntries(e,t){let s=Br();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():$t.newInvalidDocument(o))})),G.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Br();const h=t.path,f=new we(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:y,value:{document:w}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||tA(eA(w),s)<=0||(o.has(w.key)||qc(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return G.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Te(9500)}ii(e,t){return G.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new Cx(this)}getSize(e){return G.resolve(this.size)}}class Cx extends wx{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),G.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e){this.persistence=e,this.si=new Si((t=>tp(t)),np),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new lp,this.targetCount=0,this.ai=Oo.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),G.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Oo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Pr(t),G.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((h,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),G.waitFor(l).next((()=>o))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return G.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),G.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),G.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return G.resolve(s)}containsKey(e,t){return G.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,t){this.ui={},this.overlays={},this.ci=new Uc(0),this.li=!1,this.li=!0,this.hi=new Ax,this.referenceDelegate=e(this),this.Pi=new kx(this),this.indexManager=new fx,this.remoteDocumentCache=(function(o){return new Rx(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new hx(t),this.Ii=new Ix(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Sx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new xx(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ce("MemoryPersistence","Starting transaction:",e);const o=new Px(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return G.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class Px extends rA{constructor(e){super(),this.currentSequenceNumber=e}}class up{constructor(e){this.persistence=e,this.Ri=new lp,this.Vi=null}static mi(e){return new up(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),G.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,(s=>{const o=we.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Se.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return G.or([()=>G.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Rc{constructor(e,t){this.persistence=e,this.pi=new Si((s=>oA(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=vx(this,t)}static mi(e,t){return new Rc(e,t)}Ei(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return G.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?G.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((f=>{f||(s++,l.removeEntry(h,Se.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),G.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nc(e.data.value)),t}br(e,t,s){return G.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return G.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=Oe(),o=Oe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new cp(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return iT()?8:sA(Ht())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new Nx;return this.Ss(e,t,h).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,h,f.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(wo()<=be.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Eo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(wo()<=be.DEBUG&&ce("QueryEngine","Query:",Eo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(wo()<=be.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Eo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ur(t))):G.resolve())}ys(e,t){if(jy(t))return G.resolve(null);let s=ur(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=gf(t,null,"F"),s=ur(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const h=Oe(...l);return this.ps.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.Ds(t,f);return this.Cs(t,y,h,g.readTime)?this.ys(e,gf(t,null,"F")):this.vs(e,y,t,g)}))))})))))}ws(e,t,s,o){return jy(t)||o.isEqual(Se.min())?G.resolve(null):this.ps.getDocuments(e,s).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,s,o)?G.resolve(null):(wo()<=be.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Eo(t)),this.vs(e,h,t,ZS(o,sl)).next((f=>f)))}))}Ds(e,t){let s=new Tt(Yv(e));return t.forEach(((o,l)=>{qc(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return wo()<=be.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Eo(t)),this.ps.getDocumentsMatchingQuery(e,t,Cs.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="LocalStore",Dx=3e8;class Ox{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new at(De),this.xs=new Si((l=>tp(l)),np),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Tx(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function Vx(r,e,t,s){return new Ox(r,e,t,s)}async function w0(r,e){const t=Ae(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const h=[],f=[];let g=Oe();for(const y of o){h.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}for(const y of l){f.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}return t.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:f})))}))}))}function Lx(r,e){const t=Ae(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,y,w){const I=y.batch,R=I.keys();let M=G.resolve();return R.forEach((j=>{M=M.next((()=>w.getEntry(g,j))).next((U=>{const k=y.docVersions.get(j);qe(k!==null,48541),U.version.compareTo(k)<0&&(I.applyToRemoteDocument(U,y),U.isValidDocument()&&(U.setReadTime(y.commitVersion),w.addEntry(U)))}))})),M.next((()=>f.mutationQueue.removeMutationBatch(g,I)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=Oe();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(g=g.add(f.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function E0(r){const e=Ae(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Mx(r,e){const t=Ae(r),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((w,I)=>{const R=o.get(I);if(!R)return;f.push(t.Pi.removeMatchingKeys(l,w.removedDocuments,I).next((()=>t.Pi.addMatchingKeys(l,w.addedDocuments,I))));let M=R.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(I)!==null?M=M.withResumeToken(Lt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):w.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(w.resumeToken,s)),o=o.insert(I,M),(function(U,k,W){return U.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=Dx?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(R,M,w)&&f.push(t.Pi.updateTargetData(l,M))}));let g=Br(),y=Oe();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))})),f.push(jx(l,h,e.documentUpdates).next((w=>{g=w.ks,y=w.qs}))),!s.isEqual(Se.min())){const w=t.Pi.getLastRemoteSnapshotVersion(l).next((I=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(w)}return G.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.Ms=o,l)))}function jx(r,e,t){let s=Oe(),o=Oe();return t.forEach((l=>s=s.add(l))),e.getEntries(r,s).next((l=>{let h=Br();return t.forEach(((f,g)=>{const y=l.get(f);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(Se.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):ce(hp,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function Ux(r,e){const t=Ae(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Xf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Fx(r,e){const t=Ae(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,G.resolve(o)):t.Pi.allocateTargetId(s).next((h=>(o=new Es(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Ef(r,e,t){const s=Ae(r),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!zo(h))throw h;ce(hp,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function Jy(r,e,t){const s=Ae(r);let o=Se.min(),l=Oe();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,w){const I=Ae(g),R=I.xs.get(w);return R!==void 0?G.resolve(I.Ms.get(R)):I.Pi.getTargetData(y,w)})(s,h,ur(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,f.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,t?o:Se.min(),t?l:Oe()))).next((f=>(zx(s,xA(e),f),{documents:f,Qs:l})))))}function zx(r,e,t){let s=r.Os.get(e)||Se.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),r.Os.set(e,s)}class Xy{constructor(){this.activeTargetIds=bA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bx{constructor(){this.Mo=new Xy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Xy,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy="ConnectivityMonitor";class e_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ce(Zy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ce(Zy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qu=null;function Tf(){return Qu===null?Qu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qu++,"0x"+Qu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd="RestConnection",qx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Hx{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===wc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const h=Tf(),f=this.zo(e,t.toUriEncodedString());ce(qd,`Sending RPC '${e}' ${h}:`,f,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:y}=new URL(f),w=Lo(y);return this.Jo(e,f,g,s,w).then((I=>(ce(qd,`Received RPC '${e}' ${h}: `,I),I)),(I=>{throw Po(qd,`RPC '${e}' ${h} failed with error: `,I,"url: ",f,"request:",s),I}))}Ho(e,t,s,o,l,h){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Uo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=qx[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="WebChannelConnection";class Kx extends Hx{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const h=Tf();return new Promise(((f,g)=>{const y=new Av;y.setWithCredentials(!0),y.listenOnce(xv.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case tc.NO_ERROR:const I=y.getResponseJson();ce(zt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(I)),f(I);break;case tc.TIMEOUT:ce(zt,`RPC '${e}' ${h} timed out`),g(new me(Z.DEADLINE_EXCEEDED,"Request time out"));break;case tc.HTTP_ERROR:const R=y.getStatus();if(ce(zt,`RPC '${e}' ${h} failed with status:`,R,"response text:",y.getResponseText()),R>0){let M=y.getResponseJson();Array.isArray(M)&&(M=M[0]);const j=M?.error;if(j&&j.status&&j.message){const U=(function(W){const K=W.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(K)>=0?K:Z.UNKNOWN})(j.status);g(new me(U,j.message))}else g(new me(Z.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new me(Z.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ce(zt,`RPC '${e}' ${h} completed.`)}}));const w=JSON.stringify(o);ce(zt,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",w,s,15)}))}T_(e,t,s){const o=Tf(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=kv(),f=Cv(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const w=l.join("");ce(zt,`Creating RPC '${e}' stream ${o}: ${w}`,g);const I=h.createWebChannel(w,g);this.I_(I);let R=!1,M=!1;const j=new Wx({Yo:k=>{M?ce(zt,`Not sending because RPC '${e}' stream ${o} is closed:`,k):(R||(ce(zt,`Opening RPC '${e}' stream ${o} transport.`),I.open(),R=!0),ce(zt,`RPC '${e}' stream ${o} sending:`,k),I.send(k))},Zo:()=>I.close()}),U=(k,W,K)=>{k.listen(W,(te=>{try{K(te)}catch(ne){setTimeout((()=>{throw ne}),0)}}))};return U(I,qa.EventType.OPEN,(()=>{M||(ce(zt,`RPC '${e}' stream ${o} transport opened.`),j.o_())})),U(I,qa.EventType.CLOSE,(()=>{M||(M=!0,ce(zt,`RPC '${e}' stream ${o} transport closed`),j.a_(),this.E_(I))})),U(I,qa.EventType.ERROR,(k=>{M||(M=!0,Po(zt,`RPC '${e}' stream ${o} transport errored. Name:`,k.name,"Message:",k.message),j.a_(new me(Z.UNAVAILABLE,"The operation could not be completed")))})),U(I,qa.EventType.MESSAGE,(k=>{if(!M){const W=k.data[0];qe(!!W,16349);const K=W,te=K?.error||K[0]?.error;if(te){ce(zt,`RPC '${e}' stream ${o} received error:`,te);const ne=te.status;let ue=(function(S){const x=pt[S];if(x!==void 0)return l0(x)})(ne),ge=te.message;ue===void 0&&(ue=Z.INTERNAL,ge="Unknown error status: "+ne+" with message "+te.message),M=!0,j.a_(new me(ue,ge)),I.close()}else ce(zt,`RPC '${e}' stream ${o} received:`,W),j.u_(W)}})),U(f,Rv.STAT_EVENT,(k=>{k.stat===cf.PROXY?ce(zt,`RPC '${e}' stream ${o} detected buffering proxy`):k.stat===cf.NOPROXY&&ce(zt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{j.__()}),0),j}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Hd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(r){return new JA(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&ce("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="PersistentStream";class I0{constructor(e,t,s,o,l,h,f,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new T0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(zr(t.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new me(Z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(t_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ce(t_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Gx extends I0{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=ex(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Se.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Se.min():h.readTime?cr(h.readTime):Se.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=wf(this.serializer),t.addTarget=(function(l,h){let f;const g=h.target;if(f=mf(g)?{documents:rx(l,g)}:{query:sx(l,g).ft},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=h0(l,h.resumeToken);const y=yf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(Se.min())>0){f.readTime=xc(l,h.snapshotVersion.toTimestamp());const y=yf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const s=ox(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=wf(this.serializer),t.removeTarget=e,this.q_(t)}}class Qx extends I0{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=nx(e.writeResults,e.commitTime),s=cr(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=wf(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>tx(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{}class Jx extends Yx{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new me(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,_f(t,s),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new me(Z.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Ho(e,_f(t,s),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new me(Z.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Xx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(zr(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei="RemoteStore";class Zx{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{xi(this)&&(ce(Ei,"Restarting streams for network reachability change."),await(async function(g){const y=Ae(g);y.Ea.add(4),await Tl(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Qc(y)})(this))}))})),this.Ra=new Xx(s,o)}}async function Qc(r){if(xi(r))for(const e of r.da)await e(!0)}async function Tl(r){for(const e of r.da)await e(!1)}function S0(r,e){const t=Ae(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),mp(t)?pp(t):Bo(t).O_()&&fp(t,e))}function dp(r,e){const t=Ae(r),s=Bo(t);t.Ia.delete(e),s.O_()&&A0(t,e),t.Ia.size===0&&(s.O_()?s.L_():xi(t)&&t.Ra.set("Unknown"))}function fp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Bo(r).Y_(e)}function A0(r,e){r.Va.Ue(e),Bo(r).Z_(e)}function pp(r){r.Va=new KA({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Bo(r).start(),r.Ra.ua()}function mp(r){return xi(r)&&!Bo(r).x_()&&r.Ia.size>0}function xi(r){return Ae(r).Ea.size===0}function x0(r){r.Va=void 0}async function eR(r){r.Ra.set("Online")}async function tR(r){r.Ia.forEach(((e,t)=>{fp(r,e)}))}async function nR(r,e){x0(r),mp(r)?(r.Ra.ha(e),pp(r)):r.Ra.set("Unknown")}async function rR(r,e,t){if(r.Ra.set("Online"),e instanceof c0&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ia.delete(f),o.Va.removeTarget(f))})(r,e)}catch(s){ce(Ei,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Cc(r,s)}else if(e instanceof ic?r.Va.Ze(e):e instanceof u0?r.Va.st(e):r.Va.tt(e),!t.isEqual(Se.min()))try{const s=await E0(r.localStore);t.compareTo(s)>=0&&await(function(l,h){const f=l.Va.Tt(h);return f.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const w=l.Ia.get(y);w&&l.Ia.set(y,w.withResumeToken(g.resumeToken,h))}})),f.targetMismatches.forEach(((g,y)=>{const w=l.Ia.get(g);if(!w)return;l.Ia.set(g,w.withResumeToken(Lt.EMPTY_BYTE_STRING,w.snapshotVersion)),A0(l,g);const I=new Es(w.target,g,y,w.sequenceNumber);fp(l,I)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(s){ce(Ei,"Failed to raise snapshot:",s),await Cc(r,s)}}async function Cc(r,e,t){if(!zo(e))throw e;r.Ea.add(1),await Tl(r),r.Ra.set("Offline"),t||(t=()=>E0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ce(Ei,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Qc(r)}))}function R0(r,e){return e().catch((t=>Cc(r,t,e)))}async function Yc(r){const e=Ae(r),t=bs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Xf;for(;sR(e);)try{const o=await Ux(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,iR(e,o)}catch(o){await Cc(e,o)}C0(e)&&k0(e)}function sR(r){return xi(r)&&r.Ta.length<10}function iR(r,e){r.Ta.push(e);const t=bs(r);t.O_()&&t.X_&&t.ea(e.mutations)}function C0(r){return xi(r)&&!bs(r).x_()&&r.Ta.length>0}function k0(r){bs(r).start()}async function oR(r){bs(r).ra()}async function aR(r){const e=bs(r);for(const t of r.Ta)e.ea(t.mutations)}async function lR(r,e,t){const s=r.Ta.shift(),o=ip.from(s,e,t);await R0(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Yc(r)}async function uR(r,e){e&&bs(r).X_&&await(async function(s,o){if((function(h){return qA(h)&&h!==Z.ABORTED})(o.code)){const l=s.Ta.shift();bs(s).B_(),await R0(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Yc(s)}})(r,e),C0(r)&&k0(r)}async function n_(r,e){const t=Ae(r);t.asyncQueue.verifyOperationInProgress(),ce(Ei,"RemoteStore received new credentials");const s=xi(t);t.Ea.add(3),await Tl(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Qc(t)}async function cR(r,e){const t=Ae(r);e?(t.Ea.delete(2),await Qc(t)):e||(t.Ea.add(2),await Tl(t),t.Ra.set("Unknown"))}function Bo(r){return r.ma||(r.ma=(function(t,s,o){const l=Ae(t);return l.sa(),new Gx(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:eR.bind(null,r),t_:tR.bind(null,r),r_:nR.bind(null,r),H_:rR.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),mp(r)?pp(r):r.Ra.set("Unknown")):(await r.ma.stop(),x0(r))}))),r.ma}function bs(r){return r.fa||(r.fa=(function(t,s,o){const l=Ae(t);return l.sa(),new Qx(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:oR.bind(null,r),r_:uR.bind(null,r),ta:aR.bind(null,r),na:lR.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Yc(r)):(await r.fa.stop(),r.Ta.length>0&&(ce(Ei,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new Rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,f=new gp(e,t,h,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yp(r,e){if(zr("AsyncQueue",`${e}: ${r}`),zo(r))return new me(Z.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{static emptySet(e){return new Ro(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||we.comparator(t.key,s.key):(t,s)=>we.comparator(t.key,s.key),this.keyedMap=Ha(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ro)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Ro;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(){this.ga=new at(we.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Vo{constructor(e,t,s,o,l,h,f,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new Vo(e,t,Ro.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class dR{constructor(){this.queries=s_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Ae(t),l=o.queries;o.queries=s_(),l.forEach(((h,f)=>{for(const g of f.Sa)g.onError(s)}))})(this,new me(Z.ABORTED,"Firestore shutting down"))}}function s_(){return new Si((r=>Qv(r)),$c)}async function fR(r,e){const t=Ae(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new hR,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=yp(h,`Initialization of query '${Eo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&_p(t)}async function pR(r,e){const t=Ae(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function mR(r,e){const t=Ae(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.Sa)f.Fa(o)&&(s=!0);h.wa=o}}s&&_p(t)}function gR(r,e,t){const s=Ae(r),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function _p(r){r.Ca.forEach((e=>{e.next()}))}var If,i_;(i_=If||(If={})).Ma="default",i_.Cache="cache";class yR{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Vo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Vo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==If.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e){this.key=e}}class N0{constructor(e){this.key=e}}class _R{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Oe(),this.mutatedKeys=Oe(),this.eu=Yv(e),this.tu=new Ro(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new r_,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,I)=>{const R=o.get(w),M=qc(this.query,I)?I:null,j=!!R&&this.mutatedKeys.has(R.key),U=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let k=!1;R&&M?R.data.isEqual(M.data)?j!==U&&(s.track({type:3,doc:M}),k=!0):this.su(R,M)||(s.track({type:2,doc:M}),k=!0,(g&&this.eu(M,g)>0||y&&this.eu(M,y)<0)&&(f=!0)):!R&&M?(s.track({type:0,doc:M}),k=!0):R&&!M&&(s.track({type:1,doc:R}),k=!0,(g||y)&&(f=!0)),k&&(M?(h=h.add(M),l=U?l.add(w):l.delete(w)):(h=h.delete(w),l=l.delete(w)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),l=l.delete(w.key),s.track({type:1,doc:w})}return{tu:h,iu:s,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((w,I)=>(function(M,j){const U=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:k})}};return U(M)-U(j)})(w.type,I.type)||this.eu(w.doc,I.doc))),this.ou(s),o=o??!1;const f=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,h.length!==0||y?{snapshot:new Vo(this.query,e.tu,l,h,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new r_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Oe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new N0(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new P0(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Oe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Vo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const vp="SyncEngine";class vR{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class wR{constructor(e){this.key=e,this.hu=!1}}class ER{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Si((f=>Qv(f)),$c),this.Iu=new Map,this.Eu=new Set,this.du=new at(we.comparator),this.Au=new Map,this.Ru=new lp,this.Vu={},this.mu=new Map,this.fu=Oo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function TR(r,e,t=!0){const s=M0(r);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await b0(s,e,t,!0),o}async function IR(r,e){const t=M0(r);await b0(t,e,!0,!1)}async function b0(r,e,t,s){const o=await Fx(r.localStore,ur(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await SR(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&S0(r.remoteStore,o),f}async function SR(r,e,t,s,o){r.pu=(I,R,M)=>(async function(U,k,W,K){let te=k.view.ru(W);te.Cs&&(te=await Jy(U.localStore,k.query,!1).then((({documents:P})=>k.view.ru(P,te))));const ne=K&&K.targetChanges.get(k.targetId),ue=K&&K.targetMismatches.get(k.targetId)!=null,ge=k.view.applyChanges(te,U.isPrimaryClient,ne,ue);return a_(U,k.targetId,ge.au),ge.snapshot})(r,I,R,M);const l=await Jy(r.localStore,e,!0),h=new _R(e,l.Qs),f=h.ru(l.documents),g=El.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),y=h.applyChanges(f,r.isPrimaryClient,g);a_(r,t,y.au);const w=new vR(e,t,h);return r.Tu.set(e,w),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),y.snapshot}async function AR(r,e,t){const s=Ae(r),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((h=>!$c(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Ef(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&dp(s.remoteStore,o.targetId),Sf(s,o.targetId)})).catch(Fo)):(Sf(s,o.targetId),await Ef(s.localStore,o.targetId,!0))}async function xR(r,e){const t=Ae(r),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),dp(t.remoteStore,s.targetId))}async function RR(r,e,t){const s=OR(r);try{const o=await(function(h,f){const g=Ae(h),y=tt.now(),w=f.reduce(((M,j)=>M.add(j.key)),Oe());let I,R;return g.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let j=Br(),U=Oe();return g.Ns.getEntries(M,w).next((k=>{j=k,j.forEach(((W,K)=>{K.isValidDocument()||(U=U.add(W))}))})).next((()=>g.localDocuments.getOverlayedDocuments(M,j))).next((k=>{I=k;const W=[];for(const K of f){const te=UA(K,I.get(K.key).overlayedDocument);te!=null&&W.push(new Ai(K.key,te,Bv(te.value.mapValue),jr.exists(!0)))}return g.mutationQueue.addMutationBatch(M,y,W,f)})).next((k=>{R=k;const W=k.applyToLocalDocumentSet(I,U);return g.documentOverlayCache.saveOverlays(M,k.batchId,W)}))})).then((()=>({batchId:R.batchId,changes:Xv(I)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,f,g){let y=h.Vu[h.currentUser.toKey()];y||(y=new at(De)),y=y.insert(f,g),h.Vu[h.currentUser.toKey()]=y})(s,o.batchId,t),await Il(s,o.changes),await Yc(s.remoteStore)}catch(o){const l=yp(o,"Failed to persist write");t.reject(l)}}async function D0(r,e){const t=Ae(r);try{const s=await Mx(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?qe(h.hu,14607):o.removedDocuments.size>0&&(qe(h.hu,42227),h.hu=!1))})),await Il(t,s,e)}catch(s){await Fo(s)}}function o_(r,e,t){const s=Ae(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const g=Ae(h);g.onlineState=f;let y=!1;g.queries.forEach(((w,I)=>{for(const R of I.Sa)R.va(f)&&(y=!0)})),y&&_p(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function CR(r,e,t){const s=Ae(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let h=new at(we.comparator);h=h.insert(l,$t.newNoDocument(l,Se.min()));const f=Oe().add(l),g=new Kc(Se.min(),new Map,new at(De),h,f);await D0(s,g),s.du=s.du.remove(l),s.Au.delete(e),wp(s)}else await Ef(s.localStore,e,!1).then((()=>Sf(s,e,t))).catch(Fo)}async function kR(r,e){const t=Ae(r),s=e.batch.batchId;try{const o=await Lx(t.localStore,e);V0(t,s,null),O0(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Il(t,o)}catch(o){await Fo(o)}}async function PR(r,e,t){const s=Ae(r);try{const o=await(function(h,f){const g=Ae(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let w;return g.mutationQueue.lookupMutationBatch(y,f).next((I=>(qe(I!==null,37113),w=I.keys(),g.mutationQueue.removeMutationBatch(y,I)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,w,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w))).next((()=>g.localDocuments.getDocuments(y,w)))}))})(s.localStore,e);V0(s,e,t),O0(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Il(s,o)}catch(o){await Fo(o)}}function O0(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function V0(r,e,t){const s=Ae(r);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Sf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||L0(r,s)}))}function L0(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(dp(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),wp(r))}function a_(r,e,t){for(const s of t)s instanceof P0?(r.Ru.addReference(s.key,e),NR(r,s)):s instanceof N0?(ce(vp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||L0(r,s.key)):Te(19791,{wu:s})}function NR(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(ce(vp,"New document in limbo: "+t),r.Eu.add(s),wp(r))}function wp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new we(ot.fromString(e)),s=r.fu.next();r.Au.set(s,new wR(t)),r.du=r.du.insert(t,s),S0(r.remoteStore,new Es(ur(rp(t.path)),s,"TargetPurposeLimboResolution",Uc.ce))}}async function Il(r,e,t){const s=Ae(r),o=[],l=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{h.push(s.pu(g,e,t).then((y=>{if((y||t)&&s.isPrimaryClient){const w=y?!y.fromCache:t?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(y){o.push(y);const w=cp.As(g.targetId,y);l.push(w)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(g,y){const w=Ae(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>G.forEach(y,(R=>G.forEach(R.Es,(M=>w.persistence.referenceDelegate.addReference(I,R.targetId,M))).next((()=>G.forEach(R.ds,(M=>w.persistence.referenceDelegate.removeReference(I,R.targetId,M)))))))))}catch(I){if(!zo(I))throw I;ce(hp,"Failed to update sequence numbers: "+I)}for(const I of y){const R=I.targetId;if(!I.fromCache){const M=w.Ms.get(R),j=M.snapshotVersion,U=M.withLastLimboFreeSnapshotVersion(j);w.Ms=w.Ms.insert(R,U)}}})(s.localStore,l))}async function bR(r,e){const t=Ae(r);if(!t.currentUser.isEqual(e)){ce(vp,"User change. New user:",e.toKey());const s=await w0(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new me(Z.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Il(t,s.Ls)}}function DR(r,e){const t=Ae(r),s=t.Au.get(e);if(s&&s.hu)return Oe().add(s.key);{let o=Oe();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const f=t.Tu.get(h);o=o.unionWith(f.view.nu)}return o}}function M0(r){const e=Ae(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=D0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CR.bind(null,e),e.Pu.H_=mR.bind(null,e.eventManager),e.Pu.yu=gR.bind(null,e.eventManager),e}function OR(r){const e=Ae(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PR.bind(null,e),e}class kc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Vx(this.persistence,new bx,e.initialUser,this.serializer)}Cu(e){return new v0(up.mi,this.serializer)}Du(e){return new Bx}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kc.provider={build:()=>new kc};class VR extends kc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){qe(this.persistence.referenceDelegate instanceof Rc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new yx(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new v0((s=>Rc.mi(s,t)),this.serializer)}}class Af{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>o_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=bR.bind(null,this.syncEngine),await cR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new dR})()}createDatastore(e){const t=Gc(e.databaseInfo.databaseId),s=(function(l){return new Kx(l)})(e.databaseInfo);return(function(l,h,f,g){return new Jx(l,h,f,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,h,f){return new Zx(s,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>o_(this.syncEngine,t,0)),(function(){return e_.v()?new e_:new $x})())}createSyncEngine(e,t){return(function(o,l,h,f,g,y,w){const I=new ER(o,l,h,f,g,y);return w&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Ae(t);ce(Ei,"RemoteStore shutting down."),s.Ea.add(5),await Tl(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Af.provider={build:()=>new Af};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):zr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds="FirestoreClient";class MR{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Bt.UNAUTHENTICATED,this.clientId=Yf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async h=>{ce(Ds,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(ce(Ds,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=yp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Wd(r,e){r.asyncQueue.verifyOperationInProgress(),ce(Ds,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await w0(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function l_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await jR(r);ce(Ds,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>n_(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>n_(e.remoteStore,o))),r._onlineComponents=e}async function jR(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ce(Ds,"Using user provided OfflineComponentProvider");try{await Wd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Po("Error using user provided cache. Falling back to memory cache: "+t),await Wd(r,new kc)}}else ce(Ds,"Using default OfflineComponentProvider"),await Wd(r,new VR(void 0));return r._offlineComponents}async function j0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ce(Ds,"Using user provided OnlineComponentProvider"),await l_(r,r._uninitializedComponentsProvider._online)):(ce(Ds,"Using default OnlineComponentProvider"),await l_(r,new Af))),r._onlineComponents}function UR(r){return j0(r).then((e=>e.syncEngine))}async function FR(r){const e=await j0(r),t=e.eventManager;return t.onListen=TR.bind(null,e.syncEngine),t.onUnlisten=AR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=IR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=xR.bind(null,e.syncEngine),t}function zR(r,e,t={}){const s=new Rs;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,g,y){const w=new LR({next:R=>{w.Nu(),h.enqueueAndForget((()=>pR(l,I)));const M=R.docs.has(f);!M&&R.fromCache?y.reject(new me(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&R.fromCache&&g&&g.source==="server"?y.reject(new me(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(R)},error:R=>y.reject(R)}),I=new yR(rp(f.path),w,{includeMetadataChanges:!0,qa:!0});return fR(l,I)})(await FR(r),r.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="firestore.googleapis.com",c_=!0;class h_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new me(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=F0,this.ssl=c_}else this.host=e.host,this.ssl=e.ssl??c_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mx)throw new me(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=U0(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new me(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new me(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new me(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ep{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new h_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new h_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new zS;switch(s.type){case"firstParty":return new HS(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new me(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=u_.get(t);s&&(ce("ComponentProvider","Removing Datastore"),u_.delete(t),s.terminate())})(this),Promise.resolve()}}function BR(r,e,t,s={}){r=rl(r,Ep);const o=Lo(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},f=`${e}:${t}`;o&&(M_(`https://${f}`),j_("Firestore",!0)),l.host!==F0&&l.host!==f&&Po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:o,emulatorOptions:s};if(!gi(g,h)&&(r._setSettings(g),s.mockUserToken)){let y,w;if(typeof s.mockUserToken=="string")y=s.mockUserToken,w=Bt.MOCK_USER;else{y=YE(s.mockUserToken,r._app?.options.projectId);const I=s.mockUserToken.sub||s.mockUserToken.user_id;if(!I)throw new me(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Bt(I)}r._authCredentials=new BS(new Nv(y,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Tp(this.firestore,e,this._query)}}class kt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kt(this.firestore,e,this._key)}toJSON(){return{type:kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(vl(t,kt._jsonSchema))return new kt(e,s||null,new we(ot.fromString(t.referencePath)))}}kt._jsonSchemaVersion="firestore/documentReference/1.0",kt._jsonSchema={type:mt("string",kt._jsonSchemaVersion),referencePath:mt("string")};class cl extends Tp{constructor(e,t,s){super(e,t,rp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new we(e))}withConverter(e){return new cl(this.firestore,e,this._path)}}function Fa(r,e,...t){if(r=ln(r),arguments.length===1&&(e=Yf.newId()),JS("doc","path",e),r instanceof Ep){const s=ot.fromString(e,...t);return Ay(s),new kt(r,null,new we(s))}{if(!(r instanceof kt||r instanceof cl))throw new me(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ot.fromString(e,...t));return Ay(s),new kt(r.firestore,r instanceof cl?r.converter:null,new we(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="AsyncQueue";class f_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new T0(this,"async_queue_retry"),this._c=()=>{const s=Hd();s&&ce(d_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Hd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Hd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Rs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!zo(e))throw e;ce(d_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,zr("INTERNAL UNHANDLED ERROR: ",p_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=gp.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Te(47125,{Pc:p_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function p_(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Ip extends Ep{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new f_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new f_(e),this._firestoreClient=void 0,await e}}}function $R(r,e){const t=typeof r=="object"?r:B_(),s=typeof r=="string"?r:wc,o=jf(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=GE("firestore");l&&BR(o,...l)}return o}function z0(r){if(r._terminated)throw new me(Z.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||qR(r),r._firestoreClient}function qR(r){const e=r._freezeSettings(),t=(function(o,l,h,f){return new uA(o,l,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,U0(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new MR(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cn(Lt.fromBase64String(e))}catch(t){throw new me(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Cn(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Cn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vl(e,Cn._jsonSchema))return Cn.fromBase64String(e.bytes)}}Cn._jsonSchemaVersion="firestore/bytes/1.0",Cn._jsonSchema={type:mt("string",Cn._jsonSchemaVersion),bytes:mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new me(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:hr._jsonSchemaVersion}}static fromJSON(e){if(vl(e,hr._jsonSchema))return new hr(e.latitude,e.longitude)}}hr._jsonSchemaVersion="firestore/geoPoint/1.0",hr._jsonSchema={type:mt("string",hr._jsonSchemaVersion),latitude:mt("number"),longitude:mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:dr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vl(e,dr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new dr(e.vectorValues);throw new me(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}dr._jsonSchemaVersion="firestore/vectorValue/1.0",dr._jsonSchema={type:mt("string",dr._jsonSchemaVersion),vectorValues:mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=/^__.*__$/;class WR{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ai(e,this.data,this.fieldMask,t,this.fieldTransforms):new wl(e,this.data,t,this.fieldTransforms)}}function $0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:r})}}class Ap{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ap({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Pc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if($0(this.Ac)&&HR.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class KR{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Gc(e)}Cc(e,t,s,o=!1){return new Ap({Ac:e,methodName:t,Dc:s,path:Vt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function GR(r){const e=r._freezeSettings(),t=Gc(r._databaseId);return new KR(r._databaseId,!!e.ignoreUndefinedProperties,t)}function QR(r,e,t,s,o,l={}){const h=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);K0("Data must be an object, but it was:",h,s);const f=H0(s,h);let g,y;if(l.merge)g=new Wn(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const w=[];for(const I of l.mergeFields){const R=YR(e,I,t);if(!h.contains(R))throw new me(Z.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);XR(w,R)||w.push(R)}g=new Wn(w),y=h.fieldTransforms.filter((I=>g.covers(I.field)))}else g=null,y=h.fieldTransforms;return new WR(new Rn(f),g,y)}function q0(r,e){if(W0(r=ln(r)))return K0("Unsupported field value:",e,r),H0(r,e);if(r instanceof B0)return(function(s,o){if(!$0(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let h=0;for(const f of s){let g=q0(f,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}})(r,e)}return(function(s,o){if((s=ln(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return DA(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=tt.fromDate(s);return{timestampValue:xc(o.serializer,l)}}if(s instanceof tt){const l=new tt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:xc(o.serializer,l)}}if(s instanceof hr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Cn)return{bytesValue:h0(o.serializer,s._byteString)};if(s instanceof kt){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ap(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof dr)return(function(h,f){return{mapValue:{fields:{[Fv]:{stringValue:zv},[Ec]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw f.Sc("VectorValues must only contain numeric values.");return sp(f.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Jf(s)}`)})(r,e)}function H0(r,e){const t={};return Ov(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ii(r,((s,o)=>{const l=q0(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function W0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof tt||r instanceof hr||r instanceof Cn||r instanceof kt||r instanceof B0||r instanceof dr)}function K0(r,e,t){if(!W0(t)||!bv(t)){const s=Jf(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function YR(r,e,t){if((e=ln(e))instanceof Sp)return e._internalPath;if(typeof e=="string")return G0(r,e);throw Pc("Field path arguments must be of type string or ",r,!1,void 0,t)}const JR=new RegExp("[~\\*/\\[\\]]");function G0(r,e,t){if(e.search(JR)>=0)throw Pc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Sp(...e.split("."))._internalPath}catch{throw Pc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Pc(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new me(Z.INVALID_ARGUMENT,f+r+g)}function XR(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Y0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ZR extends Q0{data(){return super.data()}}function Y0(r,e){return typeof e=="string"?G0(r,e):e instanceof Sp?e._internalPath:e._delegate._internalPath}class eC{convertValue(e,t="none"){switch(Ns(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ii(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){const t=e.fields?.[Ec].arrayValue?.values?.map((s=>ht(s.doubleValue)));return new dr(t)}convertGeoPoint(e){return new hr(ht(e.latitude),ht(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=zc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(il(e));default:return null}}convertTimestamp(e){const t=ks(e);return new tt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ot.fromString(e);qe(y0(s),9688,{name:e});const o=new ol(s.get(1),s.get(3)),l=new we(s.popFirst(5));return o.isEqual(t)||zr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class Ka{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pi extends Q0{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new oc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Y0("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=pi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}pi._jsonSchemaVersion="firestore/documentSnapshot/1.0",pi._jsonSchema={type:mt("string",pi._jsonSchemaVersion),bundleSource:mt("string","DocumentSnapshot"),bundleName:mt("string"),bundle:mt("string")};class oc extends pi{data(e={}){return super.data(e)}}class el{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ka(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new oc(this._firestore,this._userDataWriter,s.key,s,new Ka(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const g=new oc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ka(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new oc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ka(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,w=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),w=h.indexOf(f.doc.key)),{type:nC(f.type),doc:g,oldIndex:y,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=el._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function nC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(r){r=rl(r,kt);const e=rl(r.firestore,Ip);return zR(z0(e),r._key).then((t=>oC(e,r,t)))}el._jsonSchemaVersion="firestore/querySnapshot/1.0",el._jsonSchema={type:mt("string",el._jsonSchemaVersion),bundleSource:mt("string","QuerySnapshot"),bundleName:mt("string"),bundle:mt("string")};class sC extends eC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,t)}}function Yu(r,e,t){r=rl(r,kt);const s=rl(r.firestore,Ip),o=tC(r.converter,e,t);return iC(s,[QR(GR(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,jr.none())])}function iC(r,e){return(function(s,o){const l=new Rs;return s.asyncQueue.enqueueAndForget((async()=>RR(await UR(s),o,l))),l.promise})(z0(r),e)}function oC(r,e,t){const s=t.docs.get(e._key),o=new sC(r);return new pi(r,o,e._key,s,new Ka(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Uo=o})(Mo),Co(new yi("firestore",((s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),f=new Ip(new $S(s.getProvider("auth-internal")),new WS(h,s.getProvider("app-check-internal")),(function(y,w){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new me(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ol(y.options.projectId,w)})(h,o),h);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),As(Ey,Ty,e),As(Ey,Ty,"esm2020")})();var aC="firebase",lC="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */As(aC,lC,"app");const J0={apiKey:"AIzaSyBUhq707Esl0fIpuLJBG0DpBbRxXe14_uo",authDomain:"vidyaai-app.firebaseapp.com",projectId:"vidyaai-app",storageBucket:"vidyaai-app.firebasestorage.app",messagingSenderId:"872319959539",appId:"1:872319959539:web:1cdb67b9e269a88ca9d286",measurementId:"G-G3YGF6WKSW"},uC=J0.apiKey!=="demo-api-key";let Kd,Dr,ac,ws;try{uC?(Kd=z_(J0),Dr=US(Kd),ac=new Or,ws=$R(Kd)):(console.warn("Using demo Firebase config. Replace with your actual Firebase configuration."),Dr=null,ac=null,ws=null)}catch(r){console.error("Firebase initialization error:",r),Dr=null,ac=null,ws=null}const X0=ae.createContext(),Jc=()=>ae.useContext(X0),cC=({children:r})=>{const[e,t]=ae.useState(null),[s,o]=ae.useState(!0),l=Dr!==null,h=async(U,k,W)=>{await new Promise(te=>setTimeout(te,1e3));const K={uid:"demo-uid-"+Date.now(),email:U,displayName:W,photoURL:null};return t(K),localStorage.setItem("demoUser",JSON.stringify(K)),{user:K}},f=async(U,k)=>{await new Promise(K=>setTimeout(K,1e3));const W={uid:"demo-uid-"+Date.now(),email:U,displayName:U.split("@")[0],photoURL:null};return t(W),localStorage.setItem("demoUser",JSON.stringify(W)),{user:W}},g=async()=>{await new Promise(k=>setTimeout(k,1e3));const U={uid:"demo-google-uid-"+Date.now(),email:"demo@gmail.com",displayName:"Demo User",photoURL:"https://via.placeholder.com/40/6366f1/ffffff?text=DU"};return t(U),localStorage.setItem("demoUser",JSON.stringify(U)),{user:U}},y=async()=>{t(null),localStorage.removeItem("demoUser")},w=async(U,k,W)=>{if(!l)return h(U,k,W);const K=await EI(Dr,U,k);return await SI(K.user,{displayName:W}),await Yu(Fa(ws,"users",K.user.uid),{uid:K.user.uid,email:K.user.email,displayName:W,createdAt:new Date,lastLogin:new Date}),K},I=async(U,k)=>{if(!l)return f(U);const W=await TI(Dr,U,k);return await Yu(Fa(ws,"users",W.user.uid),{lastLogin:new Date},{merge:!0}),W},R=async()=>{if(!l)return g();const U=await GI(Dr,ac);return(await rC(Fa(ws,"users",U.user.uid))).exists()?await Yu(Fa(ws,"users",U.user.uid),{lastLogin:new Date},{merge:!0}):await Yu(Fa(ws,"users",U.user.uid),{uid:U.user.uid,email:U.user.email,displayName:U.user.displayName,photoURL:U.user.photoURL,createdAt:new Date,lastLogin:new Date}),U},M=()=>l?CI(Dr):y();ae.useEffect(()=>{if(!l){const k=localStorage.getItem("demoUser");k&&t(JSON.parse(k)),o(!1);return}return RI(Dr,k=>{t(k),o(!1)})},[l]);const j={currentUser:e,loading:s,signup:w,login:I,signInWithGoogle:R,logout:M,isFirebaseConfigured:l};return E.jsx(X0.Provider,{value:j,children:r})};var hC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const dC=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fC=(r,e)=>{const t=ae.forwardRef(({color:s="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:h,children:f,...g},y)=>ae.createElement("svg",{ref:y,...hC,width:o,height:o,stroke:s,strokeWidth:h?Number(l)*24/Number(o):l,className:`lucide lucide-${dC(r)}`,...g},[...e.map(([w,I])=>ae.createElement(w,I)),...(Array.isArray(f)?f:[f])||[]]));return t.displayName=`${r}`,t};var Ke=fC;const Z0=Ke("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),pC=Ke("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),mC=Ke("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),gC=Ke("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),yC=Ke("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),_C=Ke("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),vC=Ke("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),wC=Ke("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),EC=Ke("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),TC=Ke("FastForward",[["polygon",{points:"13 19 22 12 13 5 13 19",key:"587y9g"}],["polygon",{points:"2 19 11 12 2 5 2 19",key:"3pweh0"}]]),xf=Ke("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),IC=Ke("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),SC=Ke("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),AC=Ke("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),m_=Ke("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),xC=Ke("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),ew=Ke("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Nc=Ke("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),RC=Ke("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),CC=Ke("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),kC=Ke("Rewind",[["polygon",{points:"11 19 2 12 11 5 11 19",key:"14yba5"}],["polygon",{points:"22 19 13 12 22 5 22 19",key:"1pi1cj"}]]),PC=Ke("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Rf=Ke("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),NC=Ke("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),bC=Ke("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),DC=Ke("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),OC=Ke("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),VC=Ke("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),LC=()=>{const[r,e]=ae.useState(!0),[t,s]=ae.useState(""),[o,l]=ae.useState(""),[h,f]=ae.useState(""),[g,y]=ae.useState(!1),[w,I]=ae.useState(""),[R,M]=ae.useState(!1),{login:j,signup:U,signInWithGoogle:k,isFirebaseConfigured:W}=Jc(),K=async ne=>{ne.preventDefault(),I(""),M(!0);try{if(r)await j(t,o);else{if(!h.trim())throw new Error("Display name is required");await U(t,o,h)}}catch(ue){I(ue.message)}finally{M(!1)}},te=async()=>{I(""),M(!0);try{await k()}catch(ne){I(ne.message)}finally{M(!1)}};return E.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center px-4",children:E.jsxs("div",{className:"max-w-md w-full space-y-8",children:[E.jsxs("div",{className:"text-center",children:[E.jsx("img",{src:"/logo-new.png",alt:"VidyaAI Logo",className:"mx-auto h-16 w-auto mb-4"}),E.jsx("h2",{className:"text-3xl font-bold text-white",children:r?"Welcome Back":"Join VidyaAI"}),E.jsx("p",{className:"mt-2 text-gray-400",children:r?"Sign in to your account to continue learning":"Create your account to start your AI-powered learning journey"})]}),E.jsxs("div",{className:"bg-gray-900 rounded-xl shadow-2xl p-8 border border-gray-800",children:[!W&&E.jsx("div",{className:"mb-4 p-3 bg-blue-900 bg-opacity-30 border border-blue-500 rounded-lg",children:E.jsxs("p",{className:"text-blue-400 text-sm",children:["🚀 ",E.jsx("strong",{children:"Demo Mode:"})," Firebase not configured. You can still preview the interface with any email/password."]})}),w&&E.jsxs("div",{className:"mb-4 p-3 bg-red-900 bg-opacity-30 border border-red-500 rounded-lg flex items-center",children:[E.jsx(Z0,{size:18,className:"text-red-400 mr-2"}),E.jsx("span",{className:"text-red-400 text-sm",children:w})]}),E.jsxs("form",{onSubmit:K,className:"space-y-6",children:[!r&&E.jsxs("div",{children:[E.jsx("label",{htmlFor:"displayName",className:"sr-only",children:"Display Name"}),E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:E.jsx(Rf,{className:"h-5 w-5 text-gray-400"})}),E.jsx("input",{id:"displayName",name:"displayName",type:"text",required:!r,value:h,onChange:ne=>f(ne.target.value),className:"appearance-none relative block w-full px-12 py-3 bg-gray-800 border border-gray-700 placeholder-gray-400 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Full Name"})]})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:E.jsx(xC,{className:"h-5 w-5 text-gray-400"})}),E.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:ne=>s(ne.target.value),className:"appearance-none relative block w-full px-12 py-3 bg-gray-800 border border-gray-700 placeholder-gray-400 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Email address"})]})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:E.jsx(AC,{className:"h-5 w-5 text-gray-400"})}),E.jsx("input",{id:"password",name:"password",type:g?"text":"password",autoComplete:r?"current-password":"new-password",required:!0,value:o,onChange:ne=>l(ne.target.value),className:"appearance-none relative block w-full px-12 pr-12 py-3 bg-gray-800 border border-gray-700 placeholder-gray-400 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Password"}),E.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>y(!g),children:g?E.jsx(wC,{className:"h-5 w-5 text-gray-400 hover:text-gray-300"}):E.jsx(EC,{className:"h-5 w-5 text-gray-400 hover:text-gray-300"})})]})]}),E.jsx("div",{children:E.jsx("button",{type:"submit",disabled:R,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:R?E.jsxs("div",{className:"flex items-center",children:[E.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),r?"Signing In...":"Creating Account..."]}):r?"Sign In":"Create Account"})}),E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-0 flex items-center",children:E.jsx("div",{className:"w-full border-t border-gray-700"})}),E.jsx("div",{className:"relative flex justify-center text-sm",children:E.jsx("span",{className:"px-2 bg-gray-900 text-gray-400",children:"Or continue with"})})]}),E.jsx("div",{children:E.jsxs("button",{type:"button",onClick:te,disabled:R,className:"group relative w-full flex justify-center py-3 px-4 border border-gray-700 text-sm font-medium rounded-lg text-white bg-gray-800 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:[E.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[E.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),E.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),E.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),E.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),R?"Connecting...":"Sign in with Google"]})})]}),E.jsx("div",{className:"mt-6 text-center",children:E.jsxs("p",{className:"text-gray-400",children:[r?"Don't have an account? ":"Already have an account? ",E.jsx("button",{type:"button",onClick:()=>e(!r),className:"font-medium text-indigo-400 hover:text-indigo-300 transition-colors",children:r?"Sign up":"Sign in"})]})})]})]})})},g_=({onNavigateToChat:r,onNavigateToTranslate:e})=>{const{currentUser:t,logout:s}=Jc(),[o,l]=ae.useState(!1),h=async()=>{try{await s()}catch(g){console.error("Failed to log out:",g)}},f=[{icon:Nc,title:"Chat with Videos",description:"Upload YouTube videos and have intelligent conversations about the content. Ask questions, get summaries, and understand complex topics better.",action:"Start Video Chat",onClick:r,gradient:"from-blue-500 to-cyan-500"},{icon:yC,title:"AI Doubt Solver",description:"Get instant answers to your academic questions. Our AI tutor can help with math, science, literature, and more subjects.",action:"Ask a Question",onClick:()=>console.log("Navigate to doubt solver"),gradient:"from-purple-500 to-pink-500"},{icon:mC,title:"Interactive Quizzes",description:"Test your knowledge with AI-generated quizzes. Adaptive difficulty levels ensure you're always challenged at the right level.",action:"Take a Quiz",onClick:()=>console.log("Navigate to quiz"),gradient:"from-green-500 to-emerald-500"},{icon:xf,title:"Smart Translation",description:"Translate text between languages with context awareness. Perfect for learning new languages and understanding foreign content.",action:"Start Translating",onClick:e,gradient:"from-orange-500 to-red-500"}];return E.jsxs("div",{className:"min-h-screen bg-gray-950",children:[E.jsx("header",{className:"bg-gray-900 border-b border-gray-800",children:E.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[E.jsxs("div",{className:"flex justify-between items-center py-4",children:[E.jsxs("div",{className:"flex items-center",children:[E.jsx("img",{src:"/logo-new.png",alt:"VidyaAI Logo",className:"h-12 w-auto mr-4"}),E.jsxs("div",{children:[E.jsx("h1",{className:"text-2xl font-bold text-white",children:"VidyaAI"}),E.jsx("p",{className:"text-sm text-gray-400",children:"Your AI Learning Companion"})]})]}),E.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full flex items-center justify-center",children:t?.photoURL?E.jsx("img",{src:t.photoURL,alt:"Profile",className:"w-8 h-8 rounded-full"}):E.jsx(Rf,{size:18,className:"text-white"})}),E.jsxs("div",{children:[E.jsx("p",{className:"text-white font-medium",children:t?.displayName||"User"}),E.jsx("p",{className:"text-gray-400 text-xs",children:t?.email})]})]}),E.jsxs("button",{onClick:h,className:"flex items-center px-4 py-2 text-gray-300 hover:text-white hover:bg-gray-800 rounded-lg transition-colors",children:[E.jsx(m_,{size:18,className:"mr-2"}),"Logout"]})]}),E.jsx("div",{className:"md:hidden",children:E.jsx("button",{onClick:()=>l(!o),className:"p-2 rounded-lg text-gray-400 hover:text-white hover:bg-gray-800",children:o?E.jsx(OC,{size:24}):E.jsx(ew,{size:24})})})]}),o&&E.jsxs("div",{className:"md:hidden border-t border-gray-800 py-4",children:[E.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[E.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full flex items-center justify-center",children:t?.photoURL?E.jsx("img",{src:t.photoURL,alt:"Profile",className:"w-10 h-10 rounded-full"}):E.jsx(Rf,{size:20,className:"text-white"})}),E.jsxs("div",{children:[E.jsx("p",{className:"text-white font-medium",children:t?.displayName||"User"}),E.jsx("p",{className:"text-gray-400 text-sm",children:t?.email})]})]}),E.jsxs("button",{onClick:h,className:"flex items-center w-full px-4 py-2 text-gray-300 hover:text-white hover:bg-gray-800 rounded-lg transition-colors",children:[E.jsx(m_,{size:18,className:"mr-2"}),"Logout"]})]})]})}),E.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[E.jsxs("div",{className:"text-center mb-16",children:[E.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Welcome to Your AI Learning Hub"}),E.jsx("p",{className:"text-xl text-gray-400 max-w-3xl mx-auto",children:"Unlock the power of AI-driven education. Chat with videos, solve doubts instantly, take adaptive quizzes, and translate content seamlessly."})]}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-16",children:f.map((g,y)=>{const w=g.icon;return E.jsxs("div",{className:"group bg-gray-900 rounded-2xl p-8 border border-gray-800 hover:border-gray-700 transition-all duration-300 hover:shadow-2xl hover:shadow-purple-500/10",children:[E.jsx("div",{className:`w-14 h-14 rounded-xl bg-gradient-to-r ${g.gradient} flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300`,children:E.jsx(w,{size:28,className:"text-white"})}),E.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:g.title}),E.jsx("p",{className:"text-gray-400 leading-relaxed mb-6",children:g.description}),E.jsxs("button",{onClick:g.onClick,className:`group/btn inline-flex items-center px-6 py-3 bg-gradient-to-r ${g.gradient} text-white font-medium rounded-xl hover:shadow-lg transition-all duration-300 hover:scale-105`,children:[g.action,E.jsx(pC,{size:18,className:"ml-2 group-hover/btn:translate-x-1 transition-transform duration-300"})]})]},y)})}),E.jsx("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 rounded-2xl p-8 border border-gray-700",children:E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-full flex items-center justify-center mx-auto mb-4",children:E.jsx(NC,{size:32,className:"text-white"})}),E.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:"1000+"}),E.jsx("p",{className:"text-gray-400",children:"Videos Analyzed"})]}),E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4",children:E.jsx(SC,{size:32,className:"text-white"})}),E.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:"5000+"}),E.jsx("p",{className:"text-gray-400",children:"Doubts Solved"})]}),E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center mx-auto mb-4",children:E.jsx(gC,{size:32,className:"text-white"})}),E.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:"10000+"}),E.jsx("p",{className:"text-gray-400",children:"Quiz Questions"})]})]})}),E.jsxs("div",{className:"mt-16 text-center",children:[E.jsx("h3",{className:"text-3xl font-bold text-white mb-8",children:"Ready to Start Learning?"}),E.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[E.jsxs("button",{onClick:r,className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all duration-300 hover:scale-105 shadow-lg",children:[E.jsx(Nc,{size:20,className:"mr-2"}),"Chat with a Video"]}),E.jsxs("button",{onClick:e,className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-orange-600 to-red-600 text-white font-bold rounded-xl hover:from-orange-700 hover:to-red-700 transition-all duration-300 hover:scale-105 shadow-lg",children:[E.jsx(xf,{size:20,className:"mr-2"}),"Translate Content"]})]})]})]}),E.jsx("footer",{className:"bg-gray-900 border-t border-gray-800 mt-20",children:E.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:E.jsx("div",{className:"text-center text-gray-400",children:E.jsx("p",{children:"© 2024 VidyaAI. Empowering education through artificial intelligence."})})})})]})};function tw(r,e){return function(){return r.apply(e,arguments)}}const{toString:MC}=Object.prototype,{getPrototypeOf:xp}=Object,{iterator:Xc,toStringTag:nw}=Symbol,Zc=(r=>e=>{const t=MC.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Gn=r=>(r=r.toLowerCase(),e=>Zc(e)===r),eh=r=>e=>typeof e===r,{isArray:$o}=Array,hl=eh("undefined");function Sl(r){return r!==null&&!hl(r)&&r.constructor!==null&&!hl(r.constructor)&&on(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const rw=Gn("ArrayBuffer");function jC(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&rw(r.buffer),e}const UC=eh("string"),on=eh("function"),sw=eh("number"),Al=r=>r!==null&&typeof r=="object",FC=r=>r===!0||r===!1,lc=r=>{if(Zc(r)!=="object")return!1;const e=xp(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(nw in r)&&!(Xc in r)},zC=r=>{if(!Al(r)||Sl(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},BC=Gn("Date"),$C=Gn("File"),qC=Gn("Blob"),HC=Gn("FileList"),WC=r=>Al(r)&&on(r.pipe),KC=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||on(r.append)&&((e=Zc(r))==="formdata"||e==="object"&&on(r.toString)&&r.toString()==="[object FormData]"))},GC=Gn("URLSearchParams"),[QC,YC,JC,XC]=["ReadableStream","Request","Response","Headers"].map(Gn),ZC=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xl(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let s,o;if(typeof r!="object"&&(r=[r]),$o(r))for(s=0,o=r.length;s<o;s++)e.call(null,r[s],s,r);else{if(Sl(r))return;const l=t?Object.getOwnPropertyNames(r):Object.keys(r),h=l.length;let f;for(s=0;s<h;s++)f=l[s],e.call(null,r[f],f,r)}}function iw(r,e){if(Sl(r))return null;e=e.toLowerCase();const t=Object.keys(r);let s=t.length,o;for(;s-- >0;)if(o=t[s],e===o.toLowerCase())return o;return null}const fi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ow=r=>!hl(r)&&r!==fi;function Cf(){const{caseless:r}=ow(this)&&this||{},e={},t=(s,o)=>{const l=r&&iw(e,o)||o;lc(e[l])&&lc(s)?e[l]=Cf(e[l],s):lc(s)?e[l]=Cf({},s):$o(s)?e[l]=s.slice():e[l]=s};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&xl(arguments[s],t);return e}const ek=(r,e,t,{allOwnKeys:s}={})=>(xl(e,(o,l)=>{t&&on(o)?r[l]=tw(o,t):r[l]=o},{allOwnKeys:s}),r),tk=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),nk=(r,e,t,s)=>{r.prototype=Object.create(e.prototype,s),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},rk=(r,e,t,s)=>{let o,l,h;const f={};if(e=e||{},r==null)return e;do{for(o=Object.getOwnPropertyNames(r),l=o.length;l-- >0;)h=o[l],(!s||s(h,r,e))&&!f[h]&&(e[h]=r[h],f[h]=!0);r=t!==!1&&xp(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},sk=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;const s=r.indexOf(e,t);return s!==-1&&s===t},ik=r=>{if(!r)return null;if($o(r))return r;let e=r.length;if(!sw(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},ok=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&xp(Uint8Array)),ak=(r,e)=>{const s=(r&&r[Xc]).call(r);let o;for(;(o=s.next())&&!o.done;){const l=o.value;e.call(r,l[0],l[1])}},lk=(r,e)=>{let t;const s=[];for(;(t=r.exec(e))!==null;)s.push(t);return s},uk=Gn("HTMLFormElement"),ck=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,s,o){return s.toUpperCase()+o}),y_=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),hk=Gn("RegExp"),aw=(r,e)=>{const t=Object.getOwnPropertyDescriptors(r),s={};xl(t,(o,l)=>{let h;(h=e(o,l,r))!==!1&&(s[l]=h||o)}),Object.defineProperties(r,s)},dk=r=>{aw(r,(e,t)=>{if(on(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const s=r[t];if(on(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},fk=(r,e)=>{const t={},s=o=>{o.forEach(l=>{t[l]=!0})};return $o(r)?s(r):s(String(r).split(e)),t},pk=()=>{},mk=(r,e)=>r!=null&&Number.isFinite(r=+r)?r:e;function gk(r){return!!(r&&on(r.append)&&r[nw]==="FormData"&&r[Xc])}const yk=r=>{const e=new Array(10),t=(s,o)=>{if(Al(s)){if(e.indexOf(s)>=0)return;if(Sl(s))return s;if(!("toJSON"in s)){e[o]=s;const l=$o(s)?[]:{};return xl(s,(h,f)=>{const g=t(h,o+1);!hl(g)&&(l[f]=g)}),e[o]=void 0,l}}return s};return t(r,0)},_k=Gn("AsyncFunction"),vk=r=>r&&(Al(r)||on(r))&&on(r.then)&&on(r.catch),lw=((r,e)=>r?setImmediate:e?((t,s)=>(fi.addEventListener("message",({source:o,data:l})=>{o===fi&&l===t&&s.length&&s.shift()()},!1),o=>{s.push(o),fi.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",on(fi.postMessage)),wk=typeof queueMicrotask<"u"?queueMicrotask.bind(fi):typeof process<"u"&&process.nextTick||lw,Ek=r=>r!=null&&on(r[Xc]),H={isArray:$o,isArrayBuffer:rw,isBuffer:Sl,isFormData:KC,isArrayBufferView:jC,isString:UC,isNumber:sw,isBoolean:FC,isObject:Al,isPlainObject:lc,isEmptyObject:zC,isReadableStream:QC,isRequest:YC,isResponse:JC,isHeaders:XC,isUndefined:hl,isDate:BC,isFile:$C,isBlob:qC,isRegExp:hk,isFunction:on,isStream:WC,isURLSearchParams:GC,isTypedArray:ok,isFileList:HC,forEach:xl,merge:Cf,extend:ek,trim:ZC,stripBOM:tk,inherits:nk,toFlatObject:rk,kindOf:Zc,kindOfTest:Gn,endsWith:sk,toArray:ik,forEachEntry:ak,matchAll:lk,isHTMLForm:uk,hasOwnProperty:y_,hasOwnProp:y_,reduceDescriptors:aw,freezeMethods:dk,toObjectSet:fk,toCamelCase:ck,noop:pk,toFiniteNumber:mk,findKey:iw,global:fi,isContextDefined:ow,isSpecCompliantForm:gk,toJSONObject:yk,isAsyncFn:_k,isThenable:vk,setImmediate:lw,asap:wk,isIterable:Ek};function xe(r,e,t,s,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),s&&(this.request=s),o&&(this.response=o,this.status=o.status?o.status:null)}H.inherits(xe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.status}}});const uw=xe.prototype,cw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{cw[r]={value:r}});Object.defineProperties(xe,cw);Object.defineProperty(uw,"isAxiosError",{value:!0});xe.from=(r,e,t,s,o,l)=>{const h=Object.create(uw);return H.toFlatObject(r,h,function(g){return g!==Error.prototype},f=>f!=="isAxiosError"),xe.call(h,r.message,e,t,s,o),h.cause=r,h.name=r.name,l&&Object.assign(h,l),h};const Tk=null;function kf(r){return H.isPlainObject(r)||H.isArray(r)}function hw(r){return H.endsWith(r,"[]")?r.slice(0,-2):r}function __(r,e,t){return r?r.concat(e).map(function(o,l){return o=hw(o),!t&&l?"["+o+"]":o}).join(t?".":""):e}function Ik(r){return H.isArray(r)&&!r.some(kf)}const Sk=H.toFlatObject(H,{},null,function(e){return/^is[A-Z]/.test(e)});function th(r,e,t){if(!H.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,t=H.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(U,k){return!H.isUndefined(k[U])});const s=t.metaTokens,o=t.visitor||w,l=t.dots,h=t.indexes,g=(t.Blob||typeof Blob<"u"&&Blob)&&H.isSpecCompliantForm(e);if(!H.isFunction(o))throw new TypeError("visitor must be a function");function y(j){if(j===null)return"";if(H.isDate(j))return j.toISOString();if(H.isBoolean(j))return j.toString();if(!g&&H.isBlob(j))throw new xe("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(j)||H.isTypedArray(j)?g&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function w(j,U,k){let W=j;if(j&&!k&&typeof j=="object"){if(H.endsWith(U,"{}"))U=s?U:U.slice(0,-2),j=JSON.stringify(j);else if(H.isArray(j)&&Ik(j)||(H.isFileList(j)||H.endsWith(U,"[]"))&&(W=H.toArray(j)))return U=hw(U),W.forEach(function(te,ne){!(H.isUndefined(te)||te===null)&&e.append(h===!0?__([U],ne,l):h===null?U:U+"[]",y(te))}),!1}return kf(j)?!0:(e.append(__(k,U,l),y(j)),!1)}const I=[],R=Object.assign(Sk,{defaultVisitor:w,convertValue:y,isVisitable:kf});function M(j,U){if(!H.isUndefined(j)){if(I.indexOf(j)!==-1)throw Error("Circular reference detected in "+U.join("."));I.push(j),H.forEach(j,function(W,K){(!(H.isUndefined(W)||W===null)&&o.call(e,W,H.isString(K)?K.trim():K,U,R))===!0&&M(W,U?U.concat(K):[K])}),I.pop()}}if(!H.isObject(r))throw new TypeError("data must be an object");return M(r),e}function v_(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function Rp(r,e){this._pairs=[],r&&th(r,this,e)}const dw=Rp.prototype;dw.append=function(e,t){this._pairs.push([e,t])};dw.toString=function(e){const t=e?function(s){return e.call(this,s,v_)}:v_;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function Ak(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function fw(r,e,t){if(!e)return r;const s=t&&t.encode||Ak;H.isFunction(t)&&(t={serialize:t});const o=t&&t.serialize;let l;if(o?l=o(e,t):l=H.isURLSearchParams(e)?e.toString():new Rp(e,t).toString(s),l){const h=r.indexOf("#");h!==-1&&(r=r.slice(0,h)),r+=(r.indexOf("?")===-1?"?":"&")+l}return r}class w_{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){H.forEach(this.handlers,function(s){s!==null&&e(s)})}}const pw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},xk=typeof URLSearchParams<"u"?URLSearchParams:Rp,Rk=typeof FormData<"u"?FormData:null,Ck=typeof Blob<"u"?Blob:null,kk={isBrowser:!0,classes:{URLSearchParams:xk,FormData:Rk,Blob:Ck},protocols:["http","https","file","blob","url","data"]},Cp=typeof window<"u"&&typeof document<"u",Pf=typeof navigator=="object"&&navigator||void 0,Pk=Cp&&(!Pf||["ReactNative","NativeScript","NS"].indexOf(Pf.product)<0),Nk=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",bk=Cp&&window.location.href||"http://localhost",Dk=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Cp,hasStandardBrowserEnv:Pk,hasStandardBrowserWebWorkerEnv:Nk,navigator:Pf,origin:bk},Symbol.toStringTag,{value:"Module"})),qt={...Dk,...kk};function Ok(r,e){return th(r,new qt.classes.URLSearchParams,{visitor:function(t,s,o,l){return qt.isNode&&H.isBuffer(t)?(this.append(s,t.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...e})}function Vk(r){return H.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Lk(r){const e={},t=Object.keys(r);let s;const o=t.length;let l;for(s=0;s<o;s++)l=t[s],e[l]=r[l];return e}function mw(r){function e(t,s,o,l){let h=t[l++];if(h==="__proto__")return!0;const f=Number.isFinite(+h),g=l>=t.length;return h=!h&&H.isArray(o)?o.length:h,g?(H.hasOwnProp(o,h)?o[h]=[o[h],s]:o[h]=s,!f):((!o[h]||!H.isObject(o[h]))&&(o[h]=[]),e(t,s,o[h],l)&&H.isArray(o[h])&&(o[h]=Lk(o[h])),!f)}if(H.isFormData(r)&&H.isFunction(r.entries)){const t={};return H.forEachEntry(r,(s,o)=>{e(Vk(s),o,t,0)}),t}return null}function Mk(r,e,t){if(H.isString(r))try{return(e||JSON.parse)(r),H.trim(r)}catch(s){if(s.name!=="SyntaxError")throw s}return(t||JSON.stringify)(r)}const Rl={transitional:pw,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",o=s.indexOf("application/json")>-1,l=H.isObject(e);if(l&&H.isHTMLForm(e)&&(e=new FormData(e)),H.isFormData(e))return o?JSON.stringify(mw(e)):e;if(H.isArrayBuffer(e)||H.isBuffer(e)||H.isStream(e)||H.isFile(e)||H.isBlob(e)||H.isReadableStream(e))return e;if(H.isArrayBufferView(e))return e.buffer;if(H.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let f;if(l){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Ok(e,this.formSerializer).toString();if((f=H.isFileList(e))||s.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return th(f?{"files[]":e}:e,g&&new g,this.formSerializer)}}return l||o?(t.setContentType("application/json",!1),Mk(e)):e}],transformResponse:[function(e){const t=this.transitional||Rl.transitional,s=t&&t.forcedJSONParsing,o=this.responseType==="json";if(H.isResponse(e)||H.isReadableStream(e))return e;if(e&&H.isString(e)&&(s&&!this.responseType||o)){const h=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(f){if(h)throw f.name==="SyntaxError"?xe.from(f,xe.ERR_BAD_RESPONSE,this,null,this.response):f}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qt.classes.FormData,Blob:qt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H.forEach(["delete","get","head","post","put","patch"],r=>{Rl.headers[r]={}});const jk=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Uk=r=>{const e={};let t,s,o;return r&&r.split(`
`).forEach(function(h){o=h.indexOf(":"),t=h.substring(0,o).trim().toLowerCase(),s=h.substring(o+1).trim(),!(!t||e[t]&&jk[t])&&(t==="set-cookie"?e[t]?e[t].push(s):e[t]=[s]:e[t]=e[t]?e[t]+", "+s:s)}),e},E_=Symbol("internals");function za(r){return r&&String(r).trim().toLowerCase()}function uc(r){return r===!1||r==null?r:H.isArray(r)?r.map(uc):String(r)}function Fk(r){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=t.exec(r);)e[s[1]]=s[2];return e}const zk=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function Gd(r,e,t,s,o){if(H.isFunction(s))return s.call(this,e,t);if(o&&(e=t),!!H.isString(e)){if(H.isString(s))return e.indexOf(s)!==-1;if(H.isRegExp(s))return s.test(e)}}function Bk(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}function $k(r,e){const t=H.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(r,s+t,{value:function(o,l,h){return this[s].call(this,e,o,l,h)},configurable:!0})})}let an=class{constructor(e){e&&this.set(e)}set(e,t,s){const o=this;function l(f,g,y){const w=za(g);if(!w)throw new Error("header name must be a non-empty string");const I=H.findKey(o,w);(!I||o[I]===void 0||y===!0||y===void 0&&o[I]!==!1)&&(o[I||g]=uc(f))}const h=(f,g)=>H.forEach(f,(y,w)=>l(y,w,g));if(H.isPlainObject(e)||e instanceof this.constructor)h(e,t);else if(H.isString(e)&&(e=e.trim())&&!zk(e))h(Uk(e),t);else if(H.isObject(e)&&H.isIterable(e)){let f={},g,y;for(const w of e){if(!H.isArray(w))throw TypeError("Object iterator must return a key-value pair");f[y=w[0]]=(g=f[y])?H.isArray(g)?[...g,w[1]]:[g,w[1]]:w[1]}h(f,t)}else e!=null&&l(t,e,s);return this}get(e,t){if(e=za(e),e){const s=H.findKey(this,e);if(s){const o=this[s];if(!t)return o;if(t===!0)return Fk(o);if(H.isFunction(t))return t.call(this,o,s);if(H.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=za(e),e){const s=H.findKey(this,e);return!!(s&&this[s]!==void 0&&(!t||Gd(this,this[s],s,t)))}return!1}delete(e,t){const s=this;let o=!1;function l(h){if(h=za(h),h){const f=H.findKey(s,h);f&&(!t||Gd(s,s[f],f,t))&&(delete s[f],o=!0)}}return H.isArray(e)?e.forEach(l):l(e),o}clear(e){const t=Object.keys(this);let s=t.length,o=!1;for(;s--;){const l=t[s];(!e||Gd(this,this[l],l,e,!0))&&(delete this[l],o=!0)}return o}normalize(e){const t=this,s={};return H.forEach(this,(o,l)=>{const h=H.findKey(s,l);if(h){t[h]=uc(o),delete t[l];return}const f=e?Bk(l):String(l).trim();f!==l&&delete t[l],t[f]=uc(o),s[f]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return H.forEach(this,(s,o)=>{s!=null&&s!==!1&&(t[o]=e&&H.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach(o=>s.set(o)),s}static accessor(e){const s=(this[E_]=this[E_]={accessors:{}}).accessors,o=this.prototype;function l(h){const f=za(h);s[f]||($k(o,h),s[f]=!0)}return H.isArray(e)?e.forEach(l):l(e),this}};an.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);H.reduceDescriptors(an.prototype,({value:r},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>r,set(s){this[t]=s}}});H.freezeMethods(an);function Qd(r,e){const t=this||Rl,s=e||t,o=an.from(s.headers);let l=s.data;return H.forEach(r,function(f){l=f.call(t,l,o.normalize(),e?e.status:void 0)}),o.normalize(),l}function gw(r){return!!(r&&r.__CANCEL__)}function qo(r,e,t){xe.call(this,r??"canceled",xe.ERR_CANCELED,e,t),this.name="CanceledError"}H.inherits(qo,xe,{__CANCEL__:!0});function yw(r,e,t){const s=t.config.validateStatus;!t.status||!s||s(t.status)?r(t):e(new xe("Request failed with status code "+t.status,[xe.ERR_BAD_REQUEST,xe.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function qk(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function Hk(r,e){r=r||10;const t=new Array(r),s=new Array(r);let o=0,l=0,h;return e=e!==void 0?e:1e3,function(g){const y=Date.now(),w=s[l];h||(h=y),t[o]=g,s[o]=y;let I=l,R=0;for(;I!==o;)R+=t[I++],I=I%r;if(o=(o+1)%r,o===l&&(l=(l+1)%r),y-h<e)return;const M=w&&y-w;return M?Math.round(R*1e3/M):void 0}}function Wk(r,e){let t=0,s=1e3/e,o,l;const h=(y,w=Date.now())=>{t=w,o=null,l&&(clearTimeout(l),l=null),r(...y)};return[(...y)=>{const w=Date.now(),I=w-t;I>=s?h(y,w):(o=y,l||(l=setTimeout(()=>{l=null,h(o)},s-I)))},()=>o&&h(o)]}const bc=(r,e,t=3)=>{let s=0;const o=Hk(50,250);return Wk(l=>{const h=l.loaded,f=l.lengthComputable?l.total:void 0,g=h-s,y=o(g),w=h<=f;s=h;const I={loaded:h,total:f,progress:f?h/f:void 0,bytes:g,rate:y||void 0,estimated:y&&f&&w?(f-h)/y:void 0,event:l,lengthComputable:f!=null,[e?"download":"upload"]:!0};r(I)},t)},T_=(r,e)=>{const t=r!=null;return[s=>e[0]({lengthComputable:t,total:r,loaded:s}),e[1]]},I_=r=>(...e)=>H.asap(()=>r(...e)),Kk=qt.hasStandardBrowserEnv?((r,e)=>t=>(t=new URL(t,qt.origin),r.protocol===t.protocol&&r.host===t.host&&(e||r.port===t.port)))(new URL(qt.origin),qt.navigator&&/(msie|trident)/i.test(qt.navigator.userAgent)):()=>!0,Gk=qt.hasStandardBrowserEnv?{write(r,e,t,s,o,l){const h=[r+"="+encodeURIComponent(e)];H.isNumber(t)&&h.push("expires="+new Date(t).toGMTString()),H.isString(s)&&h.push("path="+s),H.isString(o)&&h.push("domain="+o),l===!0&&h.push("secure"),document.cookie=h.join("; ")},read(r){const e=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(r){this.write(r,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Qk(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function Yk(r,e){return e?r.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):r}function _w(r,e,t){let s=!Qk(e);return r&&(s||t==!1)?Yk(r,e):e}const S_=r=>r instanceof an?{...r}:r;function Ti(r,e){e=e||{};const t={};function s(y,w,I,R){return H.isPlainObject(y)&&H.isPlainObject(w)?H.merge.call({caseless:R},y,w):H.isPlainObject(w)?H.merge({},w):H.isArray(w)?w.slice():w}function o(y,w,I,R){if(H.isUndefined(w)){if(!H.isUndefined(y))return s(void 0,y,I,R)}else return s(y,w,I,R)}function l(y,w){if(!H.isUndefined(w))return s(void 0,w)}function h(y,w){if(H.isUndefined(w)){if(!H.isUndefined(y))return s(void 0,y)}else return s(void 0,w)}function f(y,w,I){if(I in e)return s(y,w);if(I in r)return s(void 0,y)}const g={url:l,method:l,data:l,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:f,headers:(y,w,I)=>o(S_(y),S_(w),I,!0)};return H.forEach(Object.keys({...r,...e}),function(w){const I=g[w]||o,R=I(r[w],e[w],w);H.isUndefined(R)&&I!==f||(t[w]=R)}),t}const vw=r=>{const e=Ti({},r);let{data:t,withXSRFToken:s,xsrfHeaderName:o,xsrfCookieName:l,headers:h,auth:f}=e;e.headers=h=an.from(h),e.url=fw(_w(e.baseURL,e.url,e.allowAbsoluteUrls),r.params,r.paramsSerializer),f&&h.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let g;if(H.isFormData(t)){if(qt.hasStandardBrowserEnv||qt.hasStandardBrowserWebWorkerEnv)h.setContentType(void 0);else if((g=h.getContentType())!==!1){const[y,...w]=g?g.split(";").map(I=>I.trim()).filter(Boolean):[];h.setContentType([y||"multipart/form-data",...w].join("; "))}}if(qt.hasStandardBrowserEnv&&(s&&H.isFunction(s)&&(s=s(e)),s||s!==!1&&Kk(e.url))){const y=o&&l&&Gk.read(l);y&&h.set(o,y)}return e},Jk=typeof XMLHttpRequest<"u",Xk=Jk&&function(r){return new Promise(function(t,s){const o=vw(r);let l=o.data;const h=an.from(o.headers).normalize();let{responseType:f,onUploadProgress:g,onDownloadProgress:y}=o,w,I,R,M,j;function U(){M&&M(),j&&j(),o.cancelToken&&o.cancelToken.unsubscribe(w),o.signal&&o.signal.removeEventListener("abort",w)}let k=new XMLHttpRequest;k.open(o.method.toUpperCase(),o.url,!0),k.timeout=o.timeout;function W(){if(!k)return;const te=an.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),ue={data:!f||f==="text"||f==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:te,config:r,request:k};yw(function(P){t(P),U()},function(P){s(P),U()},ue),k=null}"onloadend"in k?k.onloadend=W:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(W)},k.onabort=function(){k&&(s(new xe("Request aborted",xe.ECONNABORTED,r,k)),k=null)},k.onerror=function(){s(new xe("Network Error",xe.ERR_NETWORK,r,k)),k=null},k.ontimeout=function(){let ne=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const ue=o.transitional||pw;o.timeoutErrorMessage&&(ne=o.timeoutErrorMessage),s(new xe(ne,ue.clarifyTimeoutError?xe.ETIMEDOUT:xe.ECONNABORTED,r,k)),k=null},l===void 0&&h.setContentType(null),"setRequestHeader"in k&&H.forEach(h.toJSON(),function(ne,ue){k.setRequestHeader(ue,ne)}),H.isUndefined(o.withCredentials)||(k.withCredentials=!!o.withCredentials),f&&f!=="json"&&(k.responseType=o.responseType),y&&([R,j]=bc(y,!0),k.addEventListener("progress",R)),g&&k.upload&&([I,M]=bc(g),k.upload.addEventListener("progress",I),k.upload.addEventListener("loadend",M)),(o.cancelToken||o.signal)&&(w=te=>{k&&(s(!te||te.type?new qo(null,r,k):te),k.abort(),k=null)},o.cancelToken&&o.cancelToken.subscribe(w),o.signal&&(o.signal.aborted?w():o.signal.addEventListener("abort",w)));const K=qk(o.url);if(K&&qt.protocols.indexOf(K)===-1){s(new xe("Unsupported protocol "+K+":",xe.ERR_BAD_REQUEST,r));return}k.send(l||null)})},Zk=(r,e)=>{const{length:t}=r=r?r.filter(Boolean):[];if(e||t){let s=new AbortController,o;const l=function(y){if(!o){o=!0,f();const w=y instanceof Error?y:this.reason;s.abort(w instanceof xe?w:new qo(w instanceof Error?w.message:w))}};let h=e&&setTimeout(()=>{h=null,l(new xe(`timeout ${e} of ms exceeded`,xe.ETIMEDOUT))},e);const f=()=>{r&&(h&&clearTimeout(h),h=null,r.forEach(y=>{y.unsubscribe?y.unsubscribe(l):y.removeEventListener("abort",l)}),r=null)};r.forEach(y=>y.addEventListener("abort",l));const{signal:g}=s;return g.unsubscribe=()=>H.asap(f),g}},eP=function*(r,e){let t=r.byteLength;if(t<e){yield r;return}let s=0,o;for(;s<t;)o=s+e,yield r.slice(s,o),s=o},tP=async function*(r,e){for await(const t of nP(r))yield*eP(t,e)},nP=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const e=r.getReader();try{for(;;){const{done:t,value:s}=await e.read();if(t)break;yield s}}finally{await e.cancel()}},A_=(r,e,t,s)=>{const o=tP(r,e);let l=0,h,f=g=>{h||(h=!0,s&&s(g))};return new ReadableStream({async pull(g){try{const{done:y,value:w}=await o.next();if(y){f(),g.close();return}let I=w.byteLength;if(t){let R=l+=I;t(R)}g.enqueue(new Uint8Array(w))}catch(y){throw f(y),y}},cancel(g){return f(g),o.return()}},{highWaterMark:2})},nh=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",ww=nh&&typeof ReadableStream=="function",rP=nh&&(typeof TextEncoder=="function"?(r=>e=>r.encode(e))(new TextEncoder):async r=>new Uint8Array(await new Response(r).arrayBuffer())),Ew=(r,...e)=>{try{return!!r(...e)}catch{return!1}},sP=ww&&Ew(()=>{let r=!1;const e=new Request(qt.origin,{body:new ReadableStream,method:"POST",get duplex(){return r=!0,"half"}}).headers.has("Content-Type");return r&&!e}),x_=64*1024,Nf=ww&&Ew(()=>H.isReadableStream(new Response("").body)),Dc={stream:Nf&&(r=>r.body)};nh&&(r=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Dc[e]&&(Dc[e]=H.isFunction(r[e])?t=>t[e]():(t,s)=>{throw new xe(`Response type '${e}' is not supported`,xe.ERR_NOT_SUPPORT,s)})})})(new Response);const iP=async r=>{if(r==null)return 0;if(H.isBlob(r))return r.size;if(H.isSpecCompliantForm(r))return(await new Request(qt.origin,{method:"POST",body:r}).arrayBuffer()).byteLength;if(H.isArrayBufferView(r)||H.isArrayBuffer(r))return r.byteLength;if(H.isURLSearchParams(r)&&(r=r+""),H.isString(r))return(await rP(r)).byteLength},oP=async(r,e)=>{const t=H.toFiniteNumber(r.getContentLength());return t??iP(e)},aP=nh&&(async r=>{let{url:e,method:t,data:s,signal:o,cancelToken:l,timeout:h,onDownloadProgress:f,onUploadProgress:g,responseType:y,headers:w,withCredentials:I="same-origin",fetchOptions:R}=vw(r);y=y?(y+"").toLowerCase():"text";let M=Zk([o,l&&l.toAbortSignal()],h),j;const U=M&&M.unsubscribe&&(()=>{M.unsubscribe()});let k;try{if(g&&sP&&t!=="get"&&t!=="head"&&(k=await oP(w,s))!==0){let ue=new Request(e,{method:"POST",body:s,duplex:"half"}),ge;if(H.isFormData(s)&&(ge=ue.headers.get("content-type"))&&w.setContentType(ge),ue.body){const[P,S]=T_(k,bc(I_(g)));s=A_(ue.body,x_,P,S)}}H.isString(I)||(I=I?"include":"omit");const W="credentials"in Request.prototype;j=new Request(e,{...R,signal:M,method:t.toUpperCase(),headers:w.normalize().toJSON(),body:s,duplex:"half",credentials:W?I:void 0});let K=await fetch(j,R);const te=Nf&&(y==="stream"||y==="response");if(Nf&&(f||te&&U)){const ue={};["status","statusText","headers"].forEach(x=>{ue[x]=K[x]});const ge=H.toFiniteNumber(K.headers.get("content-length")),[P,S]=f&&T_(ge,bc(I_(f),!0))||[];K=new Response(A_(K.body,x_,P,()=>{S&&S(),U&&U()}),ue)}y=y||"text";let ne=await Dc[H.findKey(Dc,y)||"text"](K,r);return!te&&U&&U(),await new Promise((ue,ge)=>{yw(ue,ge,{data:ne,headers:an.from(K.headers),status:K.status,statusText:K.statusText,config:r,request:j})})}catch(W){throw U&&U(),W&&W.name==="TypeError"&&/Load failed|fetch/i.test(W.message)?Object.assign(new xe("Network Error",xe.ERR_NETWORK,r,j),{cause:W.cause||W}):xe.from(W,W&&W.code,r,j)}}),bf={http:Tk,xhr:Xk,fetch:aP};H.forEach(bf,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const R_=r=>`- ${r}`,lP=r=>H.isFunction(r)||r===null||r===!1,Tw={getAdapter:r=>{r=H.isArray(r)?r:[r];const{length:e}=r;let t,s;const o={};for(let l=0;l<e;l++){t=r[l];let h;if(s=t,!lP(t)&&(s=bf[(h=String(t)).toLowerCase()],s===void 0))throw new xe(`Unknown adapter '${h}'`);if(s)break;o[h||"#"+l]=s}if(!s){const l=Object.entries(o).map(([f,g])=>`adapter ${f} `+(g===!1?"is not supported by the environment":"is not available in the build"));let h=e?l.length>1?`since :
`+l.map(R_).join(`
`):" "+R_(l[0]):"as no adapter specified";throw new xe("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return s},adapters:bf};function Yd(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new qo(null,r)}function C_(r){return Yd(r),r.headers=an.from(r.headers),r.data=Qd.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),Tw.getAdapter(r.adapter||Rl.adapter)(r).then(function(s){return Yd(r),s.data=Qd.call(r,r.transformResponse,s),s.headers=an.from(s.headers),s},function(s){return gw(s)||(Yd(r),s&&s.response&&(s.response.data=Qd.call(r,r.transformResponse,s.response),s.response.headers=an.from(s.response.headers))),Promise.reject(s)})}const Iw="1.11.0",rh={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{rh[r]=function(s){return typeof s===r||"a"+(e<1?"n ":" ")+r}});const k_={};rh.transitional=function(e,t,s){function o(l,h){return"[Axios v"+Iw+"] Transitional option '"+l+"'"+h+(s?". "+s:"")}return(l,h,f)=>{if(e===!1)throw new xe(o(h," has been removed"+(t?" in "+t:"")),xe.ERR_DEPRECATED);return t&&!k_[h]&&(k_[h]=!0,console.warn(o(h," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(l,h,f):!0}};rh.spelling=function(e){return(t,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function uP(r,e,t){if(typeof r!="object")throw new xe("options must be an object",xe.ERR_BAD_OPTION_VALUE);const s=Object.keys(r);let o=s.length;for(;o-- >0;){const l=s[o],h=e[l];if(h){const f=r[l],g=f===void 0||h(f,l,r);if(g!==!0)throw new xe("option "+l+" must be "+g,xe.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new xe("Unknown option "+l,xe.ERR_BAD_OPTION)}}const cc={assertOptions:uP,validators:rh},or=cc.validators;let mi=class{constructor(e){this.defaults=e||{},this.interceptors={request:new w_,response:new w_}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const l=o.stack?o.stack.replace(/^.+\n/,""):"";try{s.stack?l&&!String(s.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+l):s.stack=l}catch{}}throw s}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Ti(this.defaults,t);const{transitional:s,paramsSerializer:o,headers:l}=t;s!==void 0&&cc.assertOptions(s,{silentJSONParsing:or.transitional(or.boolean),forcedJSONParsing:or.transitional(or.boolean),clarifyTimeoutError:or.transitional(or.boolean)},!1),o!=null&&(H.isFunction(o)?t.paramsSerializer={serialize:o}:cc.assertOptions(o,{encode:or.function,serialize:or.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),cc.assertOptions(t,{baseUrl:or.spelling("baseURL"),withXsrfToken:or.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let h=l&&H.merge(l.common,l[t.method]);l&&H.forEach(["delete","get","head","post","put","patch","common"],j=>{delete l[j]}),t.headers=an.concat(h,l);const f=[];let g=!0;this.interceptors.request.forEach(function(U){typeof U.runWhen=="function"&&U.runWhen(t)===!1||(g=g&&U.synchronous,f.unshift(U.fulfilled,U.rejected))});const y=[];this.interceptors.response.forEach(function(U){y.push(U.fulfilled,U.rejected)});let w,I=0,R;if(!g){const j=[C_.bind(this),void 0];for(j.unshift(...f),j.push(...y),R=j.length,w=Promise.resolve(t);I<R;)w=w.then(j[I++],j[I++]);return w}R=f.length;let M=t;for(I=0;I<R;){const j=f[I++],U=f[I++];try{M=j(M)}catch(k){U.call(this,k);break}}try{w=C_.call(this,M)}catch(j){return Promise.reject(j)}for(I=0,R=y.length;I<R;)w=w.then(y[I++],y[I++]);return w}getUri(e){e=Ti(this.defaults,e);const t=_w(e.baseURL,e.url,e.allowAbsoluteUrls);return fw(t,e.params,e.paramsSerializer)}};H.forEach(["delete","get","head","options"],function(e){mi.prototype[e]=function(t,s){return this.request(Ti(s||{},{method:e,url:t,data:(s||{}).data}))}});H.forEach(["post","put","patch"],function(e){function t(s){return function(l,h,f){return this.request(Ti(f||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:l,data:h}))}}mi.prototype[e]=t(),mi.prototype[e+"Form"]=t(!0)});let cP=class Sw{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(l){t=l});const s=this;this.promise.then(o=>{if(!s._listeners)return;let l=s._listeners.length;for(;l-- >0;)s._listeners[l](o);s._listeners=null}),this.promise.then=o=>{let l;const h=new Promise(f=>{s.subscribe(f),l=f}).then(o);return h.cancel=function(){s.unsubscribe(l)},h},e(function(l,h,f){s.reason||(s.reason=new qo(l,h,f),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=s=>{e.abort(s)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Sw(function(o){e=o}),cancel:e}}};function hP(r){return function(t){return r.apply(null,t)}}function dP(r){return H.isObject(r)&&r.isAxiosError===!0}const Df={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Df).forEach(([r,e])=>{Df[e]=r});function Aw(r){const e=new mi(r),t=tw(mi.prototype.request,e);return H.extend(t,mi.prototype,e,{allOwnKeys:!0}),H.extend(t,e,null,{allOwnKeys:!0}),t.create=function(o){return Aw(Ti(r,o))},t}const We=Aw(Rl);We.Axios=mi;We.CanceledError=qo;We.CancelToken=cP;We.isCancel=gw;We.VERSION=Iw;We.toFormData=th;We.AxiosError=xe;We.Cancel=We.CanceledError;We.all=function(e){return Promise.all(e)};We.spread=hP;We.isAxiosError=dP;We.mergeConfig=Ti;We.AxiosHeaders=an;We.formToJSON=r=>mw(H.isHTMLForm(r)?new FormData(r):r);We.getAdapter=Tw.getAdapter;We.HttpStatusCode=Df;We.default=We;const{Axios:PP,AxiosError:NP,CanceledError:bP,isCancel:DP,CancelToken:OP,VERSION:VP,all:LP,Cancel:MP,isAxiosError:jP,spread:UP,toFormData:FP,AxiosHeaders:zP,HttpStatusCode:BP,formToJSON:$P,getAdapter:qP,mergeConfig:HP}=We,fP="https://d2e2ezlz7asnwt.cloudfront.net",pP=({videoId:r,videoTitle:e})=>{const[t,s]=ae.useState(!1),[o,l]=ae.useState(0),[h,f]=ae.useState(""),g=async()=>{if(r){s(!0),l(0),f("");try{const y=await We.get(`${fP}/api/youtube/download-info`,{params:{videoId:r}}),{downloadUrl:w,title:I}=y.data;if(!w)throw new Error("No download URL available");const R=await fetch(w);if(!R.ok)throw new Error(`Failed to download: ${R.statusText}`);const M=R.headers.get("content-length"),j=parseInt(M,10)||0,U=R.body.getReader();let k=0;const W=[];for(;;){const{done:ue,value:ge}=await U.read();if(ue)break;W.push(ge),k+=ge.length,j>0&&l(Math.round(k/j*100))}const K=new Blob(W,{type:"video/mp4"}),te=URL.createObjectURL(K),ne=document.createElement("a");ne.href=te,ne.download=`${I||e||r}.mp4`,document.body.appendChild(ne),ne.click(),document.body.removeChild(ne),URL.revokeObjectURL(te),l(100)}catch(y){console.error("Download error:",y),f(y.message||"Failed to download video")}finally{s(!1)}}};return E.jsxs("div",{className:"mt-4",children:[E.jsxs("button",{onClick:g,disabled:t||!r,className:`flex items-center px-4 py-2 rounded-lg transition-colors ${t?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:[E.jsx(vC,{size:18,className:"mr-2"}),t?`Downloading ${o}%`:"Download Video"]}),t&&E.jsx("div",{className:"mt-2",children:E.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2.5",children:E.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${o}%`}})})}),h&&E.jsxs("div",{className:"mt-2 flex items-center text-red-500",children:[E.jsx(Z0,{size:16,className:"mr-1"}),E.jsx("span",{className:"text-sm",children:h})]})]})},Ts="https://7de5d1a559ab.ngrok-free.app",Jd=(r,e)=>{try{localStorage.setItem(r,JSON.stringify(e))}catch(t){console.warn("Failed to save to localStorage:",t)}},Xd=(r,e=null)=>{try{const t=localStorage.getItem(r);return t?JSON.parse(t):e}catch(t){return console.warn("Failed to load from localStorage:",t),e}},Oc=r=>{const e=Math.floor(r/3600),t=Math.floor(r%3600/60),s=Math.floor(r%60);return e>0?`${e}:${t.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`:`${t}:${s.toString().padStart(2,"0")}`},mP=(r,e=null)=>{if(!r)return r;const t=l=>{const h=l.split(":");if(h.length===2){const[f,g]=h.map(Number);return f*60+g}else if(h.length===3){const[f,g,y]=h.map(Number);return f*3600+g*60+y}return 0},s=r.split(`
`),o=[];return s.forEach((l,h)=>{if(!l.trim()){o.push(E.jsx("br",{},`br-${h}`));return}const f=[];let g=0;const y=/(\$?\d{1,2}:\d{2}\$?|\*\*.*?\*\*|__.*?__)/g;let w;for(;(w=y.exec(l))!==null;){if(w.index>g&&f.push(l.slice(g,w.index)),/\d{1,2}:\d{2}/.test(w[0])){const I=w[0].replace(/\$/g,""),R=t(I);e?f.push(E.jsx("button",{onClick:()=>{console.log("🚀 TIMESTAMP CLICKED! Seeking to:",R),e(R)},className:"text-cyan-400 hover:text-cyan-300 font-mono text-sm bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded mx-1 transition-colors cursor-pointer inline-block",title:`Jump to ${I}`,children:I},`timestamp-${h}-${w.index}`)):f.push(E.jsx("span",{className:"text-cyan-400 font-mono text-sm bg-gray-700 px-2 py-1 rounded mx-1 inline-block",children:I},`timestamp-${h}-${w.index}`))}else{const I=w[0].replace(/^\*\*|\*\*$|^__|__$/g,"");f.push(E.jsx("strong",{className:"font-semibold",children:I},`bold-${h}-${w.index}`))}g=w.index+w[0].length}g<l.length&&f.push(l.slice(g)),f.length===0&&f.push(l),l.trim().startsWith("•")||l.trim().startsWith("-")||l.trim().startsWith("*")?o.push(E.jsxs("div",{className:"flex items-start mb-2 ml-4",children:[E.jsx("span",{className:"text-indigo-400 mr-2 mt-1 flex-shrink-0",children:"•"}),E.jsx("span",{className:"flex-1",children:f})]},`bullet-${h}`)):l.includes("🎯")||l.includes("📝")||l.includes("📋")||l.includes("⭐")||l.includes("💡")||l.includes("🚀")?o.push(E.jsx("div",{className:"font-bold text-cyan-300 mb-3 mt-4 text-base",children:f},`header-${h}`)):o.push(E.jsx("div",{className:"mb-2 leading-relaxed",children:f},`para-${h}`))}),E.jsx("div",{className:"space-y-1",children:o})},dl=({size:r=24,className:e=""})=>E.jsx("div",{className:`inline-block border-2 border-t-transparent border-white rounded-full animate-spin ${e}`,style:{width:r,height:r}}),gP=({currentVideo:r,onPlayerReady:e,onTimeUpdate:t,seekToTime:s})=>{const[o,l]=ae.useState(null),[h,f]=ae.useState(!1),[g,y]=ae.useState(!1),[w,I]=ae.useState(!1),[R,M]=ae.useState(0),[j,U]=ae.useState(0),[k,W]=ae.useState(0),[K,te]=ae.useState(!1),[ne,ue]=ae.useState(!1),ge=ae.useRef(null);ae.useEffect(()=>{if(window.YT)window.YT.Player&&!window.YT.loaded&&(window.YT.loaded=!0);else{console.log("Loading YouTube iframe API...");const Y=document.createElement("script");Y.src="https://www.youtube.com/iframe_api",Y.async=!0;const re=document.getElementsByTagName("script")[0];re.parentNode.insertBefore(Y,re),window.onYouTubeIframeAPIReady=()=>{console.log("YouTube iframe API loaded successfully"),window.YT.loaded=!0}}},[]);const P=()=>{if(ge.current){ge.current.innerHTML="";const Y=document.createElement("div");Y.id="youtube-player",Y.className="absolute top-0 left-0 w-full h-full",ge.current.appendChild(Y)}},S=Y=>{if(!Y||ne)return;if(console.log("Initializing YouTube player with video ID:",Y),ue(!0),o&&typeof o.destroy=="function"){try{o.destroy()}catch(V){console.warn("Error destroying player:",V)}l(null),f(!1)}P();const re=()=>{try{console.log("Creating new YouTube player...");const V=new window.YT.Player("youtube-player",{height:"100%",width:"100%",videoId:Y,playerVars:{autoplay:0,controls:0,rel:0,showinfo:0,modestbranding:1,enablejsapi:1,origin:"https://vidyaai.co",host:"https://www.youtube.com"},events:{onReady:x,onStateChange:N,onError:O}});l(V),console.log("YouTube player created successfully")}catch(V){console.error("Error creating YouTube player:",V),ue(!1)}};if(r.videoId===Y&&o&&h){console.log("Player already exists for this video, skipping initialization"),ue(!1);return}window.YT&&window.YT.Player&&window.YT.loaded?setTimeout(re,300):window.YT&&window.YT.Player?setTimeout(re,600):(console.log("YouTube API not ready, setting up callback"),window.onYouTubeIframeAPIReady=()=>{console.log("YouTube API ready callback triggered"),setTimeout(re,400)})},x=Y=>{console.log("YouTube player is ready");try{const re=Y.target;U(re.getDuration()),f(!0),l(re),ue(!1),setTimeout(()=>{L()},100),e&&e(re),console.log("Player setup completed")}catch(re){console.error("Error in onPlayerReady:",re),ue(!1)}},N=Y=>{L()},O=Y=>{console.error("YouTube player error:",Y.data),ue(!1)},L=()=>{if(!(!o||typeof o.getPlayerState!="function"))try{const Y=o.getPlayerState();if(y(Y===1),typeof o.isMuted=="function"&&I(o.isMuted()),!K&&typeof o.getCurrentTime=="function"){const re=o.getCurrentTime()||0;M(re),W(re),t&&t(re)}typeof o.getDuration=="function"&&U(o.getDuration()||0)}catch(Y){console.error("Error updating player state",Y)}};ae.useEffect(()=>{const Y=setInterval(()=>{L()},1e3);return()=>clearInterval(Y)},[o,K]),ae.useEffect(()=>{if(r.videoId&&!ne)if(o){if(o&&h){console.log("Loading new video in existing player:",r.videoId);try{typeof o.loadVideoById=="function"&&(o.loadVideoById(r.videoId),M(0),W(0),U(0))}catch(Y){console.error("Error loading new video:",Y),S(r.videoId)}}}else{console.log("Initializing player for video:",r.videoId);const Y=setTimeout(()=>{S(r.videoId)},1e3);return()=>clearTimeout(Y)}},[r.videoId]),ae.useEffect(()=>{s&&o&&typeof o.seekTo=="function"&&(window.playerSeekTo=Y=>{try{o.seekTo(Y,!0),M(Y),W(Y),typeof o.playVideo=="function"&&o.playVideo()}catch(re){console.error("Error seeking to time:",re)}})},[o,s]);const C=Y=>{W(parseFloat(Y.target.value)),K||te(!0)},Qe=()=>{if(o&&K&&typeof o.seekTo=="function")try{o.seekTo(k),M(k)}catch(Y){console.error("Error seeking to position:",Y)}finally{te(!1)}},Le=()=>{if(o)try{g&&typeof o.pauseVideo=="function"?o.pauseVideo():!g&&typeof o.playVideo=="function"&&o.playVideo()}catch(Y){console.error("Error toggling play:",Y)}},Pe=()=>{if(o)try{w&&typeof o.unMute=="function"?o.unMute():!w&&typeof o.mute=="function"&&o.mute()}catch(Y){console.error("Error toggling mute:",Y)}},Ne=()=>{if(!(!o||typeof o.seekTo!="function"))try{const Y=Math.max(0,R-10);o.seekTo(Y),M(Y),W(Y)}catch(Y){console.error("Error skipping backward:",Y)}},ie=()=>{if(!(!o||typeof o.seekTo!="function"))try{const Y=Math.min(j,R+10);o.seekTo(Y),M(Y),W(Y)}catch(Y){console.error("Error skipping forward:",Y)}};return E.jsxs("div",{className:"w-full",children:[E.jsx("div",{className:"relative overflow-hidden rounded-2xl bg-black shadow-2xl aspect-video",children:r.videoId?E.jsx("div",{ref:ge,className:"absolute top-0 left-0 w-full h-full"}):E.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900",children:E.jsx("div",{className:"text-center",children:E.jsx("p",{className:"text-gray-500",children:"Enter a YouTube URL to load a video"})})})}),E.jsxs("div",{className:"mt-6 flex items-center space-x-4",children:[E.jsx("button",{onClick:Le,className:"p-3 rounded-full bg-purple-600 hover:bg-purple-700 text-white transition-colors shadow-lg",disabled:!r.videoId,children:g?E.jsx(RC,{size:22}):E.jsx(CC,{size:22})}),E.jsx("button",{onClick:Pe,className:"p-3 rounded-full bg-purple-600 hover:bg-purple-700 text-white transition-colors shadow-lg",disabled:!r.videoId,children:w?E.jsx(DC,{size:22}):E.jsx(bC,{size:22})}),E.jsxs("div",{className:"flex-grow",children:[E.jsx("input",{type:"range",min:"0",max:j||100,value:k||0,onChange:C,onMouseUp:Qe,onTouchEnd:Qe,className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-purple-500",disabled:!r.videoId,style:{background:`linear-gradient(to right, rgb(168, 85, 247) 0%, rgb(168, 85, 247) ${k/(j||1)*100}%, rgb(55, 65, 81) ${k/(j||1)*100}%, rgb(55, 65, 81) 100%)`}}),E.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[E.jsx("span",{children:Oc(R||0)}),E.jsx("span",{children:Oc(j||0)})]})]})]}),E.jsxs("div",{className:"mt-2 flex justify-center space-x-4",children:[E.jsxs("button",{onClick:Ne,className:"p-2 rounded-full bg-gray-800 hover:bg-gray-700 text-white transition-colors",disabled:!r.videoId,children:[E.jsx(kC,{size:16}),E.jsx("span",{className:"sr-only",children:"Skip backward"})]}),E.jsxs("button",{onClick:ie,className:"p-2 rounded-full bg-gray-800 hover:bg-gray-700 text-white transition-colors",disabled:!r.videoId,children:[E.jsx(TC,{size:16}),E.jsx("span",{className:"sr-only",children:"Skip forward"})]})]})]})},yP=({currentVideo:r,transcript:e,onSeekToTime:t})=>{const[s,o]=ae.useState(!1),[l,h]=ae.useState(!1),[f,g]=ae.useState(""),[y,w]=ae.useState(!1),[I,R]=ae.useState({progress:0,current:0,total:0}),M=k=>{if(!k)return null;console.log("🔍 PARSING TRANSCRIPT - First 500 chars:",k.substring(0,500));const W=k.split(`
`),K=[];return W.forEach((te,ne)=>{const ue=te.trim();if(console.log(`🔍 Line ${ne}: "${ue}"`),ue.match(/^\d{1,2}:\d{2}\s*-\s*\d{1,2}:\d{2}$/)){console.log("🎯 TIMESTAMP DETECTED:",ue);const ge=ue.split("-"),P=ge[0].trim();ge[1].trim();const[S,x]=P.split(":").map(Number),N=S*60+x;console.log(`⏰ Start time: ${P} = ${N} seconds`),K.push(E.jsx("div",{className:"mb-2",children:E.jsx("button",{onClick:()=>{console.log("🚀 BUTTON CLICKED! Seeking to:",N),t&&t(N)},className:"text-cyan-400 hover:text-cyan-300 font-mono text-sm bg-gray-700 hover:bg-gray-600 px-3 py-2 rounded transition-colors cursor-pointer",title:`Jump to ${P}`,children:ue})},`timestamp-${ne}`))}else ue.startsWith("Title:")?K.push(E.jsx("div",{className:"mb-2 text-gray-400 font-medium",children:ue},`title-${ne}`)):ue.startsWith("Duration:")?K.push(E.jsx("div",{className:"mb-2 text-gray-400 font-medium",children:ue},`duration-${ne}`)):ue.includes("====")?K.push(E.jsx("div",{className:"mb-3 text-gray-600 text-xs",children:ue},`separator-${ne}`)):ue&&K.push(E.jsx("div",{className:"mb-2 text-gray-300 ml-4",children:ue},`content-${ne}`))}),console.log("✅ Total elements created:",K.length),E.jsx("div",{className:"space-y-1",children:K})},j=async()=>{if(console.log("🔍 loadTimestampedTranscript called"),console.log("🔍 currentVideo.videoId:",r.videoId),console.log("🔍 isLoadingTimestampedTranscript:",l),!r.videoId||l){console.log("❌ Early return - no video ID or already loading");return}h(!0),R({progress:0,current:0,total:0}),R({progress:1,current:0,total:0});try{console.log("📡 Making API call to:",`${Ts}/api/youtube/formatting-status/${r.videoId}`);const k=await We.get(`${Ts}/api/youtube/formatting-status/${r.videoId}`,{headers:{"ngrok-skip-browser-warning":"true"}});if(console.log("📋 API Response:",k.data),k.data.status==="completed"){console.log("✅ Status is completed, setting transcript"),g(k.data.formatted_transcript),w(!0),R({progress:100,current:0,total:0}),h(!1),console.log("✅ Transcript set and loading finished");return}if(k.data.status==="formatting"||k.data.status==="not_found")console.log("⏳ Status is formatting or not found, starting polling with progress"),k.data.progress!==void 0&&R({progress:k.data.progress||0,current:k.data.current_chunk||0,total:k.data.total_chunks||0}),await(async()=>{let K=0;const te=120;for(;K<te;){await new Promise(ne=>setTimeout(ne,2e3));try{const ne=await We.get(`${Ts}/api/youtube/formatting-status/${r.videoId}`,{headers:{"ngrok-skip-browser-warning":"true"}});if(console.log(`📊 Poll attempt ${K+1}:`,ne.data),ne.data.progress!==void 0&&(R({progress:ne.data.progress||0,current:ne.data.current_chunk||0,total:ne.data.total_chunks||0}),console.log(`📈 Progress updated: ${ne.data.progress}% (${ne.data.current_chunk}/${ne.data.total_chunks})`)),ne.data.status==="completed"){g(ne.data.formatted_transcript),w(!0),R({progress:100,current:0,total:0}),h(!1),console.log("✅ Formatting completed!");return}if(ne.data.status==="failed")throw new Error(ne.data.error||"AI formatting failed");K++}catch(ne){console.error("Error polling formatting status:",ne);break}}throw new Error("AI formatting took too long - please try again")})();else{console.log("🔍 Status not completed or formatting, trying direct fetch");const W=await We.get(`${Ts}/api/youtube/formatted-transcript/${r.videoId}`,{headers:{"ngrok-skip-browser-warning":"true"}});if(W.data.status==="completed")g(W.data.formatted_transcript),w(!0),R({progress:100,current:0,total:0});else throw new Error("Timestamped transcript not available yet - AI processing may still be in progress")}}catch(k){console.error("❌ Error loading timestamped transcript:",k)}finally{h(!1)}},U=()=>{const k=y&&f?f:e;k&&(navigator.clipboard.writeText(k),o(!0),setTimeout(()=>o(!1),2e3))};return ae.useEffect(()=>{g(""),w(!1),R({progress:0,current:0,total:0})},[r.videoId]),E.jsxs("div",{className:"mt-8 mb-6",children:[E.jsxs("div",{className:"flex items-center justify-between mb-3",children:[E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("button",{onClick:()=>w(!1),className:`text-sm px-3 py-2 rounded-lg transition-colors ${y?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-indigo-600 text-white"}`,disabled:!e,children:"Video Transcript"}),E.jsx("button",{onClick:async()=>{if(console.log("🔘 Timestamp button clicked"),f){console.log("✅ Already have timestamped transcript, showing it"),w(!0);return}console.log("⏳ Loading timestamped transcript with progress..."),await j()},className:`text-sm px-3 py-2 rounded-lg transition-colors flex items-center ${y?"bg-indigo-600 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"} ${r.videoId?"":"opacity-50 cursor-not-allowed"}`,disabled:!r.videoId||l,children:l?E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"relative mr-2",children:[E.jsx(dl,{size:14}),I.progress>0&&E.jsxs("div",{className:"absolute -top-1 -right-1 text-xs font-bold text-cyan-300 bg-gray-800 rounded px-1 min-w-[20px] text-center",children:[I.progress,"%"]})]}),E.jsxs("span",{className:"flex flex-col",children:[E.jsx("span",{className:"text-xs",children:I.progress>0?`AI Processing ${I.progress}%`:"Starting AI..."}),I.total>0&&E.jsxs("span",{className:"text-xs opacity-75",children:["(",I.current,"/",I.total," chunks)"]})]})]}):E.jsx("span",{children:"Transcript with Timestamps"})})]}),(e||f)&&E.jsxs("button",{onClick:U,className:"text-xs flex items-center px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-gray-300 transition-colors",children:[E.jsx(_C,{size:14,className:"mr-2"}),s?"Copied!":"Copy to clipboard"]})]}),l&&I.progress>0&&E.jsxs("div",{className:"mb-3",children:[E.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[E.jsx("span",{children:"AI Formatting Progress"}),E.jsxs("span",{children:[I.progress,"%"]})]}),E.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:E.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-cyan-500 h-2 rounded-full transition-all duration-300",style:{width:`${I.progress}%`}})}),I.total>0&&E.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Processing chunk ",I.current," of ",I.total]})]}),E.jsx("div",{className:"bg-gray-800 rounded-xl p-5 h-56 overflow-y-auto text-gray-300 text-sm leading-relaxed scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800 shadow-inner",children:y?f?M(f):E.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[E.jsx("p",{className:"text-gray-500 italic",children:"Timestamped transcript is being processed..."}),l&&E.jsxs("div",{className:"mt-4",children:[E.jsx(dl,{size:24}),I.progress>0&&E.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:[I.progress,"% complete"]})]})]}):e?e.split(`
`).map((k,W)=>E.jsx("p",{className:"mb-2",children:k},W)):E.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center",children:E.jsx("p",{className:"text-gray-500 italic",children:"Transcript will appear here after loading a video."})})})]})},_P=({currentVideo:r,currentTime:e,chatMessages:t,setChatMessages:s,onSeekToTime:o})=>{const[l,h]=ae.useState(""),[f,g]=ae.useState(!1),[y,w]=ae.useState("video"),I=ae.useRef(null),R=async M=>{if(M.preventDefault(),!l.trim()||!r.videoId||f)return;const j={id:Date.now(),sender:"user",text:l,timestamp:e};s(k=>[...k,j]);const U=l;h(""),g(!0);try{I.current&&(I.current.scrollTop=I.current.scrollHeight);const k=await We.post(`${Ts}/api/query/video`,{video_id:r.videoId,query:U,timestamp:e,is_image_query:y==="frame"},{headers:{"ngrok-skip-browser-warning":"true"}});if(k.data.is_downloading){const W={id:Date.now()+1,sender:"ai",text:k.data.response,timestamp:e,isDownloading:!0};s(K=>[...K,W])}else{const W={id:Date.now()+1,sender:"ai",text:k.data.response,timestamp:e};s(K=>[...K,W])}}catch(k){console.error("Error processing query:",k);const W={id:Date.now()+1,sender:"system",text:`Error: ${k.response?.data?.detail||k.message||"Something went wrong"}`,timestamp:null,isError:!0};s(K=>[...K,W])}finally{g(!1),setTimeout(()=>{I.current&&(I.current.scrollTop=I.current.scrollHeight)},100)}};return ae.useEffect(()=>{I.current&&(I.current.scrollTop=I.current.scrollHeight)},[t]),E.jsxs("div",{className:"w-full bg-gray-900 rounded-xl shadow-xl overflow-hidden flex flex-col h-[750px]",children:[E.jsxs("div",{className:"p-4 bg-gray-800 border-b border-gray-700",children:[E.jsx("h3",{className:"font-semibold text-lg text-white",children:"AI Video Assistant"}),E.jsxs("p",{className:"text-xs text-gray-400",children:["Current time: ",Oc(e||0)]})]}),E.jsxs("div",{ref:I,className:"flex-grow overflow-y-auto p-4 space-y-4 scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-900",children:[t.length===0?E.jsxs("div",{className:"text-center text-gray-500 my-12 flex flex-col items-center",children:[E.jsx(Nc,{size:40,className:"mb-4 text-gray-700"}),E.jsx("p",{children:"No messages yet"}),E.jsx("p",{className:"text-sm mt-2",children:"Ask me anything about this video!"})]}):t.map(M=>E.jsxs("div",{className:`${M.sender==="user"?"ml-8 bg-indigo-900 bg-opacity-50":M.sender==="system"?"bg-gray-700 bg-opacity-70":"mr-8 bg-gray-800"} rounded-xl p-4 ${M.isError?"border border-red-500":""} shadow-md`,children:[E.jsxs("div",{className:"flex items-center mb-2",children:[E.jsx("span",{className:`font-medium text-sm ${M.sender==="user"?"text-indigo-300":M.sender==="system"?"text-yellow-300":"text-cyan-300"}`,children:M.sender==="user"?"You":M.sender==="system"?"System":"AI Assistant"}),M.timestamp!==null&&E.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["at ",Oc(M.timestamp)]})]}),E.jsx("div",{className:"text-white",children:mP(M.text,o)})]},M.id)),f&&E.jsxs("div",{className:"mr-8 bg-gray-800 rounded-xl p-4 shadow-md",children:[E.jsx("div",{className:"flex items-center mb-2",children:E.jsx("span",{className:"font-medium text-sm text-cyan-300",children:"AI Assistant"})}),E.jsxs("div",{className:"flex items-center text-white",children:[E.jsx(dl,{size:16,className:"mr-3"}),"Thinking..."]})]})]}),E.jsxs("div",{className:"p-4 border-t border-gray-700 bg-gray-800 bg-opacity-50",children:[E.jsxs("div",{className:"flex space-x-4 mb-3",children:[E.jsxs("label",{className:"flex items-center",children:[E.jsx("input",{type:"radio",name:"queryType",value:"video",checked:y==="video",onChange:()=>w("video"),className:"mr-2 accent-indigo-500"}),E.jsx("span",{className:"text-sm text-white",children:"Ask about video"})]}),E.jsxs("label",{className:"flex items-center",children:[E.jsx("input",{type:"radio",name:"queryType",value:"frame",checked:y==="frame",onChange:()=>w("frame"),className:"mr-2 accent-indigo-500"}),E.jsx("span",{className:"text-sm text-white",children:"Ask about current frame"})]})]}),E.jsxs("form",{onSubmit:R,className:"flex space-x-2",children:[E.jsx("input",{type:"text",value:l,onChange:M=>h(M.target.value),placeholder:"Ask a question about the video...",className:"flex-grow px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-white placeholder-gray-400 shadow-inner",disabled:!r.videoId||f}),E.jsx("button",{type:"submit",className:"p-3 bg-indigo-600 hover:bg-indigo-700 rounded-xl transition-colors text-white disabled:opacity-50 disabled:hover:bg-indigo-600",disabled:!l.trim()||!r.videoId||f,children:E.jsx(PC,{size:20})})]})]})]})},vP=({quiz:r,userAnswers:e})=>!Array.isArray(r)||r.length===0?null:E.jsx("div",{className:"mt-4 space-y-4",children:r.map((t,s)=>{const o=e?.[t.id],l=o===t.answer;return E.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[E.jsxs("div",{className:"flex items-start justify-between mb-2",children:[E.jsxs("h4",{className:"text-white font-semibold",children:["Q",s+1,". ",t.question]}),E.jsx("span",{className:`text-xs px-2 py-1 rounded ${l?"bg-green-900 text-green-300":"bg-red-900 text-red-300"}`,children:l?"Correct":"Incorrect"})]}),E.jsxs("div",{className:"text-sm",children:[E.jsxs("div",{className:"text-gray-300",children:[E.jsx("span",{className:"font-medium text-gray-400",children:"Your answer:"})," ",o??"—"]}),E.jsxs("div",{className:"text-gray-300 mt-1",children:[E.jsx("span",{className:"font-medium text-gray-400",children:"Correct answer:"})," ",t.answer]}),t.explanation&&E.jsxs("div",{className:"text-gray-400 mt-2",children:[E.jsx("span",{className:"font-medium text-gray-500",children:"Explanation:"})," ",t.explanation]})]})]},t.id||s)})}),wP=({isOpen:r,videoId:e,onClose:t,onSystemMessage:s})=>{const[o,l]=ae.useState(!1),[h,f]=ae.useState([]),[g,y]=ae.useState(0),[w,I]=ae.useState({}),[R,M]=ae.useState(!1),[j,U]=ae.useState(0),[k,W]=ae.useState(!1),K=ae.useRef(null);if(ae.useEffect(()=>{if(!r||!e)return;let P=!1;async function S(){console.log("Fetching quiz for video ID:",e),l(!0),f([]),I({}),y(0),M(!1),U(0),W(!1);try{const x=Ts||"http://localhost:8000";console.log("Making API call to:",`${x}/api/quiz/generate`);const N=await We.post(`${x}/api/quiz/generate`,{video_id:e},{headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"}});if(console.log("Quiz API response:",N.data),console.log("Response type:",typeof N.data),console.log("Response keys:",Object.keys(N.data||{})),console.log("Quiz data type:",typeof N.data?.quiz),console.log("Quiz data:",N.data?.quiz),P)return;const O=Array.isArray(N.data?.quiz)?N.data.quiz:[];if(console.log("Parsed questions:",O),console.log("Questions length:",O.length),console.log("First question:",O[0]),O.length===0)throw new Error("No quiz questions received from the server");f(O),s&&s({id:Date.now(),sender:"system",text:`Quiz loaded successfully! ${O.length} questions ready.`,isError:!1})}catch(x){console.error("Error fetching quiz:",x);let N="Failed to load quiz";x.response?(console.error("Server error response:",x.response.data),N=x.response.data?.message||x.response.data?.error||`Server error: ${x.response.status}`):x.request?(console.error("Network error:",x.request),N="Network error - unable to reach quiz server"):N=x.message||"Unknown error occurred",!P&&s&&s({id:Date.now(),sender:"system",text:N,isError:!0}),!P&&t&&setTimeout(()=>t(),2e3)}finally{P||l(!1)}}return S(),()=>{console.log("Cancelling quiz fetch"),P=!0}},[r,e]),ae.useEffect(()=>{r&&K.current&&K.current.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},[r,g]),!r)return null;const te=h[g],ne=P=>{te&&(console.log("Answer selected:",P,"for question:",te.id),I(S=>({...S,[te.id]:P})))},ue=()=>{if(!te)return;if(!w[te.id]){console.log("No answer selected for current question");return}if(console.log("Moving to next question. Current index:",g),g<h.length-1)y(g+1);else{let S=0;for(const x of h)w[x.id]===x.answer&&(S+=1);console.log("Quiz completed. Final score:",S,"out of",h.length),U(S),M(!0),s&&s({id:Date.now(),sender:"system",text:`Quiz completed! You scored ${S} out of ${h.length} questions.`,isError:!1})}},ge=()=>{console.log("Restarting quiz"),y(0),I({}),M(!1),U(0),W(!1)};return E.jsxs("div",{ref:K,className:"mt-4 bg-gray-900 rounded-xl border border-gray-800 p-4 shadow-lg",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center",children:[E.jsx("span",{className:"text-2xl mr-2",children:"🧠"}),"Quiz"]}),E.jsx("button",{onClick:t,className:"px-3 py-1 text-sm bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors",children:"Close"})]}),o?E.jsxs("div",{className:"flex items-center justify-center py-8",children:[E.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500 mr-3"}),E.jsx("span",{className:"text-gray-300",children:"Loading quiz questions..."})]}):h.length===0?E.jsxs("div",{className:"text-center py-8",children:[E.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"No quiz available"}),E.jsx("div",{className:"text-gray-500 text-sm",children:"Unable to generate quiz questions for this video."})]}):R?E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:"text-center py-6",children:[E.jsx("div",{className:"text-4xl mb-4",children:j===h.length?"🎉":j>=h.length*.7?"👏":"📚"}),E.jsx("h4",{className:"text-white font-bold text-xl mb-2",children:"Quiz Complete!"}),E.jsxs("div",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-indigo-400 mb-4",children:["Score: ",j," / ",h.length]}),E.jsx("div",{className:"text-gray-300",children:j===h.length?"Perfect score! Excellent work!":j>=h.length*.7?"Great job! You understand the content well.":"Good effort! Consider reviewing the material."})]}),E.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[E.jsx("button",{onClick:()=>W(!k),className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors",children:k?"Hide Answers":"Show Correct Answers"}),E.jsx("button",{onClick:ge,className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 text-white rounded-lg transition-all duration-200",children:"Retake Quiz"})]}),k&&E.jsx(vP,{quiz:h,userAnswers:w})]}):E.jsxs("div",{className:"space-y-4",children:[E.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:E.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-500 h-2 rounded-full transition-all duration-300",style:{width:`${(g+1)/h.length*100}%`}})}),E.jsxs("div",{className:"flex items-center justify-between mb-3",children:[E.jsxs("h4",{className:"text-white font-semibold",children:["Question ",g+1," of ",h.length]}),te?.difficulty&&E.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-gray-700 text-gray-300 capitalize",children:te.difficulty})]}),E.jsx("div",{className:"text-white text-lg mb-4 leading-relaxed",children:te?.question}),E.jsx("div",{className:"space-y-3",children:te?.options?.map((P,S)=>{const x=w[te.id]===P;return E.jsxs("label",{className:`flex items-start p-4 rounded-lg cursor-pointer border transition-all duration-200 ${x?"border-indigo-500 bg-indigo-900 bg-opacity-40 shadow-lg":"border-gray-700 hover:bg-gray-800 hover:border-gray-600"}`,children:[E.jsx("input",{type:"radio",name:`q-${te.id}`,className:"mt-1 mr-3 text-indigo-500 focus:ring-indigo-500",checked:x,onChange:()=>ne(P)}),E.jsx("span",{className:"text-gray-200 leading-relaxed",children:P})]},S)})}),E.jsxs("div",{className:"flex justify-between items-center mt-6",children:[E.jsx("button",{onClick:ge,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors text-sm",children:"Restart Quiz"}),E.jsx("button",{onClick:ue,disabled:!w[te?.id],className:"px-6 py-2 bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-all duration-200 font-semibold",children:g===h.length-1?"Submit Quiz":"Next Question"})]})]})]})},EP=({onNavigateToTranslate:r,onNavigateToHome:e})=>{const[t,s]=ae.useState(""),[o,l]=ae.useState(""),[h,f]=ae.useState(!1),[g,y]=ae.useState(()=>Xd("currentVideo",{title:"",source:"",videoId:""})),[w,I]=ae.useState(()=>Xd("transcript","")),[R,M]=ae.useState(!1),[j,U]=ae.useState(()=>Xd("chatMessages",[])),[k,W]=ae.useState(0),[K,te]=ae.useState(null),[ne,ue]=ae.useState(!1),[ge,P]=ae.useState([]),S=ae.useRef(null),x=async Le=>{if(Le.preventDefault(),!!t.trim()){f(!0),l(""),I("");try{let Pe="";if(t.includes("youtube.com/watch?v="))Pe=new URLSearchParams(new URL(t).search).get("v");else if(t.includes("youtu.be/"))Pe=t.split("youtu.be/")[1].split("?")[0];else throw new Error("Invalid YouTube URL format");if(!Pe)throw new Error("Could not extract video ID from URL");if(g.videoId===Pe){console.log("Same video already loaded"),f(!1);return}let Ne;try{Ne=await We.post(`${Ts}/api/youtube/info`,{url:t},{timeout:6e4,headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"}})}catch(Y){if(Y.code==="ERR_NETWORK_CHANGED")console.log("Network changed, retrying..."),await new Promise(re=>setTimeout(re,1e3)),Ne=await We.post(`${Ts}/api/youtube/info`,{url:t},{headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"}});else throw Y}Ne.data.transcript?I(Ne.data.transcript):I("No transcript available for this video."),y({title:Ne.data.title||"YouTube Video",source:`https://www.youtube.com/embed/${Pe}?enablejsapi=1&origin=https://vidyaai.co&controls=0`,videoId:Pe});const ie=new URL(window.location);ie.searchParams.set("v",Pe),window.history.replaceState({},"",ie),U([]),ue(!1),P([])}catch(Pe){console.error("Error loading video:",Pe),l(Pe.message||"Failed to load video")}finally{f(!1)}}},N=Le=>{te(Le)},O=Le=>{W(Le)},L=Le=>{window.playerSeekTo&&window.playerSeekTo(Le)},C=Le=>{P(Pe=>[...Pe,Le])},Qe=()=>{if(!g.videoId){C({id:Date.now(),sender:"system",text:"Please load a video first to start the quiz.",isError:!0});return}ue(!0)};return ae.useEffect(()=>{function Le(Pe){S.current&&!S.current.contains(Pe.target)&&M(!1)}return document.addEventListener("mousedown",Le),()=>{document.removeEventListener("mousedown",Le)}},[S]),ae.useEffect(()=>{g.videoId&&Jd("currentVideo",g)},[g]),ae.useEffect(()=>{w&&Jd("transcript",w)},[w]),ae.useEffect(()=>{Jd("chatMessages",j)},[j]),ae.useEffect(()=>{const Pe=new URLSearchParams(window.location.search).get("v");Pe&&!g.videoId&&!t&&s(`https://www.youtube.com/watch?v=${Pe}`)},[]),E.jsxs("div",{className:"w-full min-h-screen px-6 py-8 bg-gray-950",children:[E.jsxs("div",{className:"flex items-center justify-between mb-8",children:[E.jsxs("div",{className:"flex-shrink-0 mr-4",children:[E.jsx("img",{src:"/logo-new.png",alt:"Website Logo",className:"h-16 w-auto max-w-[200px] object-cover object-center",style:{width:"240px",height:"50px"}}),E.jsx("h1",{className:"text-3xl font-bold text-white",children:"Chat with My Video"})]}),E.jsxs("div",{className:"relative",ref:S,children:[E.jsx("button",{onClick:()=>M(!R),className:"p-2 rounded-full bg-gray-800 hover:bg-gray-700 text-white transition-colors",children:E.jsx(ew,{size:24})}),R&&E.jsx("div",{className:"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-gray-800 ring-1 ring-black ring-opacity-5 z-50",children:E.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[E.jsxs("button",{onClick:e,className:"flex items-center w-full px-4 py-3 text-white hover:bg-gray-700 transition-colors text-left",role:"menuitem",children:[E.jsx(IC,{className:"mr-3",size:18}),E.jsx("span",{children:"Home"})]}),E.jsxs("button",{onClick:()=>{},className:"flex items-center w-full px-4 py-3 text-white hover:bg-gray-700 transition-colors text-left",role:"menuitem",children:[E.jsx(Nc,{className:"mr-3",size:18}),E.jsx("span",{children:"Chat with Video"})]}),E.jsxs("button",{onClick:r,className:"flex items-center w-full px-4 py-3 text-white hover:bg-gray-700 transition-colors text-left",role:"menuitem",children:[E.jsx(xf,{className:"mr-3",size:18}),E.jsx("span",{children:"Translate"})]})]})})]})]}),E.jsxs("form",{onSubmit:x,className:"mb-8",children:[E.jsxs("div",{className:"relative flex flex-col md:flex-row md:items-center gap-2",children:[E.jsxs("div",{className:"relative flex-grow",children:[E.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none",children:E.jsx(VC,{size:18,className:"text-red-500"})}),E.jsx("input",{type:"text",value:t,onChange:Le=>s(Le.target.value),placeholder:"Enter YouTube URL (e.g., https://www.youtube.com/watch?v=...)",className:"w-full pl-12 pr-4 py-4 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-white placeholder-gray-400 shadow-lg"})]}),E.jsx("button",{type:"submit",className:"px-6 py-4 bg-gradient-to-r from-red-500 to-pink-600 text-white rounded-xl hover:from-red-600 hover:to-pink-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-900 transition-all duration-200 shadow-lg flex items-center justify-center",disabled:h,children:h?E.jsxs(E.Fragment,{children:[E.jsx(dl,{size:20,className:"mr-2"}),E.jsx("span",{children:"Loading..."})]}):"Load Video"})]}),o&&E.jsxs("div",{className:"mt-3 text-red-400 text-sm bg-red-900 bg-opacity-30 p-3 rounded-lg",children:["âš ï¸ ",o]})]}),E.jsx("h2",{className:"text-2xl font-bold mb-6 text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-cyan-300",children:g.title||"Enter a YouTube URL to get started"}),g.videoId&&E.jsx(pP,{videoId:g.videoId,videoTitle:g.title}),E.jsxs("div",{className:"flex flex-col xl:flex-row gap-8 mt-6 w-full",children:[E.jsxs("div",{className:"w-full xl:w-3/5",children:[h&&E.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-70 z-10",children:E.jsxs("div",{className:"flex flex-col items-center",children:[E.jsx(dl,{size:48,className:"mb-4"}),E.jsx("p",{className:"text-white text-lg",children:"Loading video..."})]})}),E.jsx(gP,{currentVideo:g,onPlayerReady:N,onTimeUpdate:O,seekToTime:L}),E.jsxs("div",{className:"mt-6 space-y-4",children:[g.videoId&&!ne&&E.jsx("div",{className:"flex justify-center",children:E.jsx("button",{onClick:Qe,className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-indigo-600 text-white rounded-xl hover:from-purple-600 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 focus:ring-offset-gray-900 transition-all duration-200 shadow-lg font-semibold",children:"Start Quiz"})}),E.jsx(wP,{isOpen:ne,videoId:g.videoId,onClose:()=>ue(!1),onSystemMessage:C}),E.jsx(yP,{currentVideo:g,transcript:w,onSeekToTime:L})]})]}),E.jsx("div",{className:"w-full xl:w-2/5",children:E.jsx(_P,{currentVideo:g,currentTime:k,chatMessages:j,setChatMessages:U,onSeekToTime:L})})]})]})},TP=({children:r})=>{const{currentUser:e,loading:t}=Jc();return t?E.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"inline-block border-2 border-t-transparent border-white rounded-full animate-spin w-12 h-12 mb-4"}),E.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})}):e?r:(window.location.href="/",null)},IP=({onNavigateToHome:r})=>E.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:E.jsxs("div",{className:"text-center",children:[E.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Translation Service"}),E.jsx("p",{className:"text-gray-400 mb-6",children:"This component will be available soon!"}),E.jsx("button",{onClick:r,className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Back to Home"})]})});let Of;try{Of=require("./components/TranslatePage").default}catch{console.warn("TranslatePage component not found, using placeholder"),Of=IP}const Zd=()=>{const r=window.location.pathname;return r==="/chat"?"chat":r==="/translate"?"translate":"home"},SP=()=>{const{currentUser:r}=Jc(),[e,t]=ae.useState(Zd),s=()=>{t("home"),window.history.pushState({page:"home"},"","/")},o=()=>{t("chat"),window.history.pushState({page:"chat"},"","/chat")},l=()=>{t("translate"),window.history.pushState({page:"translate"},"","/translate")};return ae.useEffect(()=>{const f=g=>{const y=g.state?.page||Zd();t(y)};return window.history.state||window.history.replaceState({page:Zd()},"",window.location.pathname),window.addEventListener("popstate",f),()=>{window.removeEventListener("popstate",f)}},[]),r?(()=>{switch(e){case"home":return E.jsx(g_,{onNavigateToChat:o,onNavigateToTranslate:l});case"chat":return E.jsx(TP,{children:E.jsx(EP,{onNavigateToHome:s,onNavigateToTranslate:l})});case"translate":return E.jsx(Of,{onNavigateToHome:s,onNavigateToChat:o});default:return E.jsx(g_,{onNavigateToChat:o,onNavigateToTranslate:l})}})():E.jsx(LC,{})};function AP(){return E.jsx(cC,{children:E.jsx("div",{className:"App",children:E.jsx(SP,{})})})}UE.createRoot(document.getElementById("root")).render(E.jsx(bE.StrictMode,{children:E.jsx(AP,{})}));
